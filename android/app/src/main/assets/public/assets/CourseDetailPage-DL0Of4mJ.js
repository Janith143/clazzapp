var Ae=Object.defineProperty,Oe=Object.defineProperties;var _e=Object.getOwnPropertyDescriptors;var de=Object.getOwnPropertySymbols;var Be=Object.prototype.hasOwnProperty,He=Object.prototype.propertyIsEnumerable;var ce=(c,o,r)=>o in c?Ae(c,o,{enumerable:!0,configurable:!0,writable:!0,value:r}):c[o]=r,W=(c,o)=>{for(var r in o||(o={}))Be.call(o,r)&&ce(c,r,o[r]);if(de)for(var r of de(o))He.call(o,r)&&ce(c,r,o[r]);return c},J=(c,o)=>Oe(c,_e(o));var me=(c,o,r)=>new Promise((A,L)=>{var $=k=>{try{N(r.next(k))}catch(w){L(w)}},O=k=>{try{N(r.throw(k))}catch(w){L(w)}},N=k=>k.done?A(k.value):Promise.resolve(k.value).then($,O);N((r=r.apply(c,o)).next())});import{b as Ve,u as ze,e as Ke,d as Ye,r as u,aD as We,k as Je,j as e,S as Ue,c as Xe,C as qe,M as Qe,q as Ze,aa as xe,ag as U,aE as X,l as Ge,F as et,O as tt,D as st,y as rt,V as ue,N as at,X as nt,P as he}from"./index-BXN-gaEy.js";import{S as ge}from"./StarRating-BeOC4AZb.js";import{C as lt}from"./Countdown-tuRDrQvi.js";import{s as it}from"./slug-Be7lxzw5.js";import{S as ot}from"./SEOHead-fOquVp0s.js";import{C as dt}from"./ConfirmationModal-CVK0Y9X0.js";import{P as ct}from"./PaymentMethodSelector-CJgtkeLh.js";import"./vendor-firebase-CLtQg3ae.js";const yt=({courseId:c,slug:o})=>{var ne,le,ie;const{currentUser:r}=Ve(),{handleBack:A,handleNavigate:L}=ze(),{setModalState:$,setVideoPlayerState:O,addToast:N}=Ke(),{handleRateCourse:k,handleEnroll:w,handleUpdateTeacher:pe,sales:q,teachers:_,loading:be}=Ye(),fe=u.useMemo(()=>{if(c)return c;if(o&&_.length>0)for(const s of _){const a=s.courses.find(n=>it(n.title)===o);if(a)return a.id}return""},[c,o,_]),{item:ke,teacher:p,isOwner:S,isEnrolled:g}=We("course",fe),t=ke,[je,P]=u.useState(!1),[ye,B]=u.useState(!1),[H,V]=u.useState(null),[D,z]=u.useState(""),[Q,ve]=u.useState("join"),[m,M]=u.useState(null),h=t&&t.type||"recorded",Z=u.useMemo(()=>{var s,a;return!t||!("lectures"in t)?0:t.type==="recorded"?t.lectures.reduce((n,d)=>n+d.durationMinutes,0)/60:(((s=t.scheduleConfig)==null?void 0:s.durationMinutes)||60)*(((a=t.liveSessions)==null?void 0:a.length)||0)/60},[t]),Ne=u.useMemo(()=>!t||!p?null:{"@context":"https://schema.org","@type":"Course",name:t.title,description:t.description,provider:{"@type":"Person",name:p.name,image:p.avatar},hasCourseInstance:{"@type":"CourseInstance",courseMode:t.type==="live"?"Live":"Online",courseWorkload:`PT${Math.round(Z)}H`},offers:{"@type":"Offer",price:t.fee,priceCurrency:"LKR",category:"Paid"}},[t,p,Z]),G=u.useMemo(()=>Je(t&&"ratings"in t?t.ratings:void 0),[t]),ee=u.useMemo(()=>{var s,a;return((a=(s=t&&"ratings"in t?t.ratings:[])==null?void 0:s.find(n=>n.studentId===(r==null?void 0:r.id)))==null?void 0:a.rating)||0},[t,r]),te=u.useMemo(()=>{if(!g||!(r!=null&&r.watchHistory)||!t||!("lectures"in t)||!r.watchHistory[t.id])return 0;const s=r.watchHistory[t.id],a=Object.keys(s).length;if(h==="live"&&t.liveSessions)return 0;const n=t.lectures.length;return n>0?a/n*100:0},[r,t,g,h]),K=u.useMemo(()=>{if(!t||h!=="live"||!t.liveSessions)return null;const s=new Date;return t.liveSessions.filter(n=>new Date(`${n.date}T${n.endTime}`)>s).sort((n,d)=>new Date(`${n.date}T${n.startTime}`).getTime()-new Date(`${d.date}T${d.startTime}`).getTime())[0]},[t,h]),F=u.useMemo(()=>!r||!t?[]:q.filter(s=>s.itemId===t.id&&s.studentId===r.id&&s.status==="completed"),[q,r,t]),R=u.useMemo(()=>S?!0:F.some(s=>!s.purchaseMetadata||s.purchaseMetadata.type==="full"),[S,F]),E=(s,a)=>R?!0:F.some(n=>{var d,y;return((d=n.purchaseMetadata)==null?void 0:d.type)===s&&((y=n.purchaseMetadata)==null?void 0:y.index)===a});if(be)return e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-20 text-center flex flex-col items-center justify-center",children:[e.jsx(Ue,{className:"w-8 h-8 text-primary"}),e.jsx("p",{className:"mt-4 text-light-subtle dark:text-dark-subtle",children:"Loading course details..."})]});if(!t||!p||!("lectures"in t))return e.jsx("div",{children:"Course not found. It may have been removed by the teacher."});const j=(()=>{var d,y,i,x,l;let s=t.fee,a=t.title,n={type:"full"};if(h==="live"){if(t.paymentPlan==="installments_2")s=t.fee/2,a=`${t.title} (Installment 1 of 2)`,n={type:"installment",index:0};else if(t.paymentPlan==="monthly"){const f=((d=t.liveSessions)==null?void 0:d.length)||1,I=((i=(y=t.scheduleConfig)==null?void 0:y.days)==null?void 0:i.length)||1,v=((x=t.scheduleConfig)==null?void 0:x.weekCount)||Math.ceil(f/I)||1,T=Math.max(1,v/4);s=Math.round(t.fee/T),a=`${t.title} (Month 1)`,n={type:"month",index:0}}else if(t.paymentPlan==="per_session"){const f=((l=t.liveSessions)==null?void 0:l.length)||1;s=Math.round(t.fee/f),a=`${t.title} (Session 1)`,n={type:"session",index:0}}}return{amount:s,description:a,metadata:n}})(),we=()=>{r?(M(j),P(!0)):$({name:"login",preventRedirect:!0})},Ce=(s,a,n)=>{if(!r){$({name:"login",preventRedirect:!0});return}M({amount:s,description:a,metadata:n}),P(!0)},Le=()=>{if(m){const s=Math.min((r==null?void 0:r.accountBalance)||0,m.amount);m.amount-s>0?(B(!0),P(!1)):(w(t,"course",!1,m.amount,m.description,m.metadata),P(!1),M(null))}},Se=s=>{m&&w(t,"course",!1,m.amount,m.description,m.metadata,s),B(!1),M(null)},Pe=s=>{s.username?L({name:"teacher_profile_slug",slug:s.username}):L({name:"teacher_profile",teacherId:s.id})},se=(s,a,n)=>{O({isOpen:!0,lecture:s,course:a,isEnrolled:n})},re=(s,a,n)=>{V(s),z(a||""),ve(n)},Me=()=>me(void 0,null,function*(){if(!t.liveSessions||!H)return;if(D&&!D.startsWith("http")){alert("Please enter a valid URL starting with http:// or https://");return}const s=Q==="join"?"joinLink":"recordingLink",a=t.liveSessions.map(n=>n.id===H?J(W({},n),{[s]:D}):n);try{const n=p.courses.map(d=>d.id===t.id?J(W({},d),{liveSessions:a}):d);yield pe(p.id,{courses:n}),N("Link updated successfully!","success"),V(null),z("")}catch(n){N("Failed to update link.","error")}}),Ie=()=>{var d,y;const s=new Date,a=(t.liveSessions||[]).sort((i,x)=>new Date(i.date).getTime()-new Date(x.date).getTime());let n=[];if(t.paymentPlan==="monthly"){const x=(((y=(d=t.scheduleConfig)==null?void 0:d.days)==null?void 0:y.length)||1)*4,l=j.amount;for(let f=0;f<a.length;f+=x){const I=a.slice(f,f+x),v=f/x;n.push({title:`Month ${v+1}`,sessions:I,unlockCost:l,isLocked:!E("month",v),metadata:{type:"month",index:v}})}}else if(t.paymentPlan==="installments_2"){const i=Math.ceil(a.length/2),x=t.fee/2;n.push({title:"Part 1 (First Half)",sessions:a.slice(0,i),unlockCost:x,isLocked:!E("installment",0),metadata:{type:"installment",index:0}}),n.push({title:"Part 2 (Second Half)",sessions:a.slice(i),unlockCost:x,isLocked:!E("installment",1),metadata:{type:"installment",index:1}})}else if(t.paymentPlan==="per_session"){const i=Math.round(t.fee/a.length);n=a.map((x,l)=>({title:`Session ${l+1}`,sessions:[x],unlockCost:i,isLocked:!E("session",l),metadata:{type:"session",index:l}}))}else n.push({title:"All Sessions",sessions:a,unlockCost:t.fee,isLocked:!R,metadata:{type:"full"}});return a.length===0?e.jsx("div",{className:"text-center py-8 text-light-subtle dark:text-dark-subtle border-2 border-dashed border-light-border dark:border-dark-border rounded-lg",children:e.jsx("p",{children:"No live sessions scheduled yet."})}):e.jsx("div",{className:"space-y-6",children:n.map((i,x)=>e.jsxs("div",{className:"relative border border-light-border dark:border-dark-border rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"bg-light-background dark:bg-dark-background p-3 border-b border-light-border dark:border-dark-border flex justify-between items-center",children:[e.jsx("h3",{className:"font-bold text-light-text dark:text-dark-text",children:i.title}),i.isLocked?e.jsxs("span",{className:"text-xs font-bold text-red-500 flex items-center",children:[e.jsx(X,{className:"w-3 h-3 mr-1"})," Locked"]}):e.jsxs("span",{className:"text-xs font-bold text-green-600 flex items-center",children:[e.jsx(tt,{className:"w-3 h-3 mr-1"})," Unlocked"]})]}),e.jsxs("div",{className:"relative p-4 space-y-4 bg-light-surface dark:bg-dark-surface",children:[i.isLocked&&e.jsxs("div",{className:"flex flex-col items-center justify-center p-6 bg-light-background dark:bg-dark-background border border-light-border dark:border-dark-border rounded-lg text-center mb-4",children:[e.jsx(X,{className:"w-10 h-10 text-gray-400 mb-2"}),e.jsx("h4",{className:"font-bold text-lg text-gray-800 dark:text-gray-200",children:"Content Locked"}),e.jsx("p",{className:"text-sm text-light-subtle dark:text-dark-subtle mb-4",children:"Purchase this section to access class links and recordings."}),e.jsxs("button",{onClick:()=>Ce(i.unlockCost,`Unlock ${i.title}`,i.metadata),className:"px-6 py-2 bg-primary text-white font-bold rounded-full hover:bg-primary-dark transition-colors shadow-md",children:["Pay ",new Intl.NumberFormat("en-LK",{style:"currency",currency:"LKR",minimumFractionDigits:0}).format(i.unlockCost)," to Unlock"]})]}),i.sessions.map((l,f)=>{const I=new Date(`${l.date}T${l.startTime}`),v=new Date(`${l.date}T${l.endTime}`),T=s>=new Date(I.getTime()-15*6e4)&&s<=v,Re=H===l.id,oe=!i.isLocked||S;return e.jsxs("div",{className:`p-3 rounded-lg border ${T?"border-red-500 bg-red-50 dark:bg-red-900/20":"border-light-border dark:border-dark-border bg-light-background dark:bg-dark-background"} ${oe?"":"opacity-60 grayscale-[0.5]"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-light-text dark:text-dark-text text-sm",children:l.title}),e.jsxs("div",{className:"flex items-center text-xs text-light-subtle dark:text-dark-subtle mt-1 space-x-3",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(st,{className:"w-3 h-3 mr-1"}),new Date(l.date).toLocaleDateString()]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(rt,{className:"w-3 h-3 mr-1"}),l.startTime," - ",l.endTime]})]})]}),T&&e.jsx("span",{className:"px-2 py-0.5 bg-red-600 text-white text-[10px] font-bold rounded animate-pulse",children:"LIVE"})]}),oe&&!S&&e.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[T&&l.joinLink&&e.jsxs("a",{href:l.joinLink,target:"_blank",rel:"noopener noreferrer",className:"flex items-center px-3 py-1.5 bg-green-600 text-white text-xs rounded hover:bg-green-700",children:[e.jsx(ue,{className:"w-3 h-3 mr-1"})," Join Class"]}),l.recordingLink&&e.jsxs("a",{href:l.recordingLink,target:"_blank",rel:"noopener noreferrer",className:"flex items-center px-3 py-1.5 bg-primary text-white text-xs rounded hover:bg-primary-dark",children:[e.jsx(U,{className:"w-3 h-3 mr-1"})," Recording"]}),l.resourceLink&&e.jsxs("a",{href:l.resourceLink,target:"_blank",rel:"noopener noreferrer",className:"flex items-center px-3 py-1.5 border border-primary text-primary text-xs rounded hover:bg-primary/10",children:[e.jsx(xe,{className:"w-3 h-3 mr-1"})," Resources"]})]}),S&&e.jsx("div",{className:"mt-2 pt-2 border-t border-light-border dark:border-dark-border",children:Re?e.jsxs("div",{className:"flex items-center gap-2 bg-white dark:bg-gray-800 p-2 rounded border border-primary",children:[e.jsx("input",{type:"text",value:D,onChange:Ee=>z(Ee.target.value),className:"flex-grow p-1 text-xs border rounded bg-transparent text-light-text dark:text-dark-text focus:outline-none",placeholder:Q==="join"?"Zoom/Meet URL":"Recording URL",autoFocus:!0}),e.jsx("button",{onClick:Me,className:"text-green-600 hover:bg-green-100 p-1 rounded",children:e.jsx(at,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>V(null),className:"text-red-500 hover:bg-red-100 p-1 rounded",children:e.jsx(nt,{className:"w-4 h-4"})})]}):e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[e.jsx(ue,{className:"w-3 h-3 text-green-600"}),e.jsx("span",{className:"font-semibold",children:"Join Link:"}),l.joinLink?e.jsx("a",{href:l.joinLink,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 truncate",children:l.joinLink}):e.jsx("span",{className:"text-gray-400 italic",children:"Not set"})]}),e.jsx("button",{onClick:()=>re(l.id,l.joinLink||"","join"),className:"p-1 hover:bg-light-border dark:hover:bg-dark-border rounded text-primary",title:"Edit Join Link",children:e.jsx(he,{className:"w-3 h-3"})})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[e.jsx(U,{className:"w-3 h-3 text-red-600"}),e.jsx("span",{className:"font-semibold",children:"Recording:"}),l.recordingLink?e.jsx("a",{href:l.recordingLink,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 truncate",children:l.recordingLink}):e.jsx("span",{className:"text-gray-400 italic",children:"Not set"})]}),e.jsx("button",{onClick:()=>re(l.id,l.recordingLink||"","recording"),className:"p-1 hover:bg-light-border dark:hover:bg-dark-border rounded text-primary",title:"Edit Recording Link",children:e.jsx(he,{className:"w-3 h-3"})})]})]})})]},l.id)})]})]},x))})},b=new Intl.NumberFormat("en-LK",{style:"currency",currency:"LKR"}),Te=h==="recorded"?t.lectures.reduce((s,a)=>s+a.durationMinutes,0)/60:(((ne=t.scheduleConfig)==null?void 0:ne.durationMinutes)||60)*(((le=t.liveSessions)==null?void 0:le.length)||0)/60,C=Math.min((r==null?void 0:r.accountBalance)||0,j.amount),Y=j.amount-C,$e=Xe(t.coverImage,[400,800]),De=()=>R?"Course Fully Unlocked":F.length>0&&t.paymentPlan!=="full"?"Continue Learning":(r==null?void 0:r.role)==="teacher"||(r==null?void 0:r.role)==="admin"?"Only students can enroll":`Pay ${j.description} (${b.format(j.amount)})`,ae=R||t.paymentPlan==="full"&&g,Fe=ae||(r==null?void 0:r.role)==="teacher"||(r==null?void 0:r.role)==="admin";return e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8 animate-slideInUp",children:[e.jsx(ot,{title:t?t.title:"Course Details",description:t?t.description.substring(0,160):"View course details on clazz.lk",image:t&&"coverImage"in t?t.coverImage:void 0,structuredData:Ne}),e.jsx("div",{className:"mb-4",children:e.jsxs("button",{onClick:A,className:"flex items-center space-x-2 text-sm font-medium text-primary hover:text-primary-dark transition-colors",children:[e.jsx(qe,{className:"h-5 w-5"}),e.jsx("span",{children:"Back"})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsxs("div",{className:"bg-light-surface dark:bg-dark-surface p-6 rounded-lg shadow-md",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold",children:t.title}),h==="live"&&e.jsx("span",{className:"px-3 py-1 bg-red-100 text-red-600 rounded-full text-xs font-bold uppercase",children:"Live Course"})]}),e.jsx("div",{className:"mt-2 text-light-subtle dark:text-dark-subtle",children:e.jsx(Qe,{content:t.description,className:"prose-lg"})}),e.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-x-4 gap-y-2",children:[e.jsxs("button",{onClick:()=>Pe(p),className:"flex items-center space-x-2 group",children:[e.jsx("img",{src:p.avatar,alt:p.name,className:"w-10 h-10 rounded-full"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-light-subtle dark:text-dark-subtle",children:"Created by"}),e.jsx("p",{className:"font-semibold group-hover:underline",children:p.name})]})]}),e.jsx("div",{className:"h-8 w-px bg-light-border dark:bg-dark-border"}),e.jsx(ge,{rating:G.average,count:G.count,readOnly:!0})]})]}),g&&!t.isDeleted&&e.jsxs("div",{className:"mt-8 bg-light-surface dark:bg-dark-surface p-6 rounded-lg shadow-md animate-fadeIn space-y-4",children:[h==="recorded"&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold mb-2",children:"Your Progress"}),e.jsx(Ze,{value:te,max:100}),e.jsxs("p",{className:"text-xs text-right font-medium text-light-subtle dark:text-dark-subtle mt-1",children:[Math.round(te),"% Complete"]})]}),e.jsxs("div",{className:"pt-4 border-t border-light-border dark:border-dark-border",children:[e.jsx("h3",{className:"text-xl font-bold mb-2",children:ee>0?"Update your rating":"Rate this course"}),e.jsx("p",{className:"text-sm text-light-subtle dark:text-dark-subtle mb-4",children:"Your feedback helps other students."}),e.jsx(ge,{rating:ee,onRatingChange:s=>k(t.id,s),size:"lg",showLabel:!1})]})]}),e.jsxs("div",{className:"mt-8 bg-light-surface dark:bg-dark-surface p-6 rounded-lg shadow-md",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:h==="live"?"Class Schedule":"Course Content"}),h==="live"?Ie():e.jsx("div",{className:"space-y-3",children:t.lectures.map((s,a)=>e.jsxs("div",{className:`p-3 bg-light-background dark:bg-dark-background rounded-md border border-light-border dark:border-dark-border flex items-center justify-between transition-colors ${!g&&!s.isFreePreview?"opacity-70":"group hover:border-primary"}`,children:[e.jsxs("button",{onClick:()=>se(s,t,g),disabled:!g&&!s.isFreePreview,className:"flex items-start text-left flex-grow disabled:cursor-not-allowed",children:[e.jsx("span",{className:`mr-3 mt-1 font-bold text-sm ${!g&&!s.isFreePreview?"text-light-subtle dark:text-dark-subtle":"text-light-subtle dark:text-dark-subtle group-hover:text-primary"}`,children:a+1}),e.jsxs("div",{children:[e.jsx("p",{className:`font-semibold ${!g&&!s.isFreePreview?"text-light-text dark:text-dark-text":"text-light-text dark:text-dark-text group-hover:text-primary"}`,children:s.title}),e.jsxs("div",{className:"flex items-center text-xs text-light-subtle dark:text-dark-subtle mt-1",children:[e.jsxs("span",{children:[s.durationMinutes," mins"]}),s.isFreePreview&&e.jsx("span",{className:"ml-2 text-green-500 font-medium",children:"(Free Preview)"})]})]})]}),e.jsxs("div",{className:"flex-shrink-0 ml-2 flex items-center space-x-4",children:[g&&s.resourcesUrl&&e.jsx("a",{href:s.resourcesUrl,target:"_blank",rel:"noopener noreferrer",title:"View Resources",className:"flex items-center text-blue-500 hover:text-blue-700 z-10 p-2 rounded-full hover:bg-blue-50 dark:hover:bg-blue-900/50",children:e.jsx(xe,{className:"w-5 h-5"})}),e.jsx("div",{className:"flex-shrink-0",children:g||s.isFreePreview?e.jsx("button",{onClick:()=>se(s,t,g),title:"Play Lecture",children:e.jsx(U,{className:"w-6 h-6 text-light-subtle dark:text-dark-subtle group-hover:text-primary"})}):e.jsx("span",{title:"Enroll to watch",children:e.jsx(X,{className:"w-5 h-5 text-light-subtle dark:text-dark-subtle"})})})]})]},s.id))})]})]}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"sticky top-24 bg-light-surface dark:bg-dark-surface rounded-lg shadow-md overflow-hidden",children:[e.jsx("img",{src:Ge(t.coverImage,400),srcSet:$e,sizes:"33vw",alt:t.title,className:"w-full h-48 object-cover",crossOrigin:"anonymous"}),e.jsxs("div",{className:"p-6",children:[h==="live"&&K?e.jsxs("div",{className:"mb-6 pb-6 border-b border-light-border dark:border-dark-border",children:[e.jsx("h3",{className:"font-bold text-center text-lg mb-2",children:"Next Session Starts In"}),e.jsx(lt,{targetDate:new Date(`${K.date}T${K.startTime}`),completionMessage:"Class is starting!"})]}):null,e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-3xl font-bold text-primary",children:j.amount>0?b.format(j.amount):"Free"}),t.paymentPlan&&t.paymentPlan!=="full"&&e.jsxs("div",{className:"text-xs font-semibold text-light-subtle dark:text-dark-subtle uppercase mt-1",children:[e.jsxs("p",{children:["Plan: ",t.paymentPlan.replace("_"," ")]}),e.jsxs("p",{className:"text-[10px] opacity-75 mt-0.5 text-primary",children:["Total Fee: ",b.format(t.fee)]})]})]}),r&&C>0&&!ae&&!t.isDeleted&&e.jsxs("div",{className:"mt-4 p-3 text-sm bg-green-50 dark:bg-green-900/50 border border-green-200 dark:border-green-800 rounded-md",children:[e.jsx("p",{className:"font-semibold text-green-800 dark:text-green-200",children:"Account Balance Applied!"}),e.jsxs("div",{className:"flex justify-between text-green-700 dark:text-green-300",children:[e.jsx("span",{children:"Balance Used:"}),e.jsxs("span",{children:["-",b.format(C)]})]}),e.jsxs("div",{className:"flex justify-between font-bold mt-1 pt-1 border-t border-green-300 dark:border-green-700",children:[e.jsx("span",{children:"Amount to Pay:"}),e.jsx("span",{children:b.format(Y)})]})]}),t.isDeleted?e.jsx("div",{className:"mt-4 w-full text-center px-4 py-3 text-sm font-medium text-yellow-800 bg-yellow-100 dark:text-yellow-200 dark:bg-yellow-900/50 rounded-md",children:"This course has been removed by the teacher."}):e.jsx("button",{onClick:we,disabled:Fe,className:"mt-4 w-full bg-primary text-white font-bold py-3 rounded-md hover:bg-primary-dark transition-colors disabled:bg-gray-500 disabled:cursor-not-allowed",children:De()}),e.jsxs("div",{className:"mt-6 space-y-3 text-sm",children:[e.jsx("p",{children:e.jsx("strong",{children:"This course includes:"})}),e.jsxs("ul",{className:"list-disc list-inside text-light-subtle dark:text-dark-subtle",children:[e.jsx("li",{children:h==="live"?`${((ie=t.liveSessions)==null?void 0:ie.length)||0} Live Sessions`:`${t.lectures.length} lectures`}),e.jsxs("li",{children:[Te.toFixed(1)," hours of content"]}),h==="live"&&e.jsx("li",{children:"Live Q&A with Teacher"}),e.jsx("li",{children:"Certificate of Completion"})]})]})]})]})})]}),je&&m&&(()=>{let s,a;const n=m.amount;return C>0?Y>0?(s=`The price for "${m.description}" is ${b.format(n)}. Your account balance of ${b.format(C)} will be applied. Continue to select a payment method for the remaining ${b.format(Y)}?`,a="Continue to Payment"):(s=`Your account balance of ${b.format(C)} will fully cover the cost for "${m.description}". Continue?`,a="Use Balance to Purchase"):(s=`You are about to pay ${b.format(n)} for "${m.description}". Continue to select a payment method?`,a="Continue to Payment"),e.jsx(dt,{isOpen:!0,onClose:()=>{P(!1),M(null)},onConfirm:Le,title:`Confirm Purchase: ${t.title}`,message:s,confirmText:a})})(),ye&&e.jsx(et,{isOpen:!0,onClose:()=>B(!1),title:"Select Payment Method",children:e.jsx(ct,{onSelect:Se})})]})};export{yt as default};
