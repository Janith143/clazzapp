var O=Object.defineProperty,B=Object.defineProperties;var R=Object.getOwnPropertyDescriptors;var L=Object.getOwnPropertySymbols;var U=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var G=(r,o,i)=>o in r?O(r,o,{enumerable:!0,configurable:!0,writable:!0,value:i}):r[o]=i,y=(r,o)=>{for(var i in o||(o={}))U.call(o,i)&&G(r,i,o[i]);if(L)for(var i of L(o))q.call(o,i)&&G(r,i,o[i]);return r},v=(r,o)=>B(r,R(o));import{u as J,e as A,r as b,t as D,j as e,I as S,O as X,K as E,T as M,_ as Y,d as $,s as K,Y as Q,n as V,Z as W,G as N,J as Z,W as I,X as _,N as z}from"./index-BXN-gaEy.js";import{S as P}from"./SearchableSelect-Dgx7XP55.js";import"./vendor-firebase-CLtQg3ae.js";const H=({items:r,onChange:o})=>{const{subjects:i}=J(),{addToast:s}=A(),[l,n]=b.useState(D[0].value),[p,x]=b.useState(""),[h,j]=b.useState([]),[k,a]=b.useState([]),m=b.useMemo(()=>l?i[l]||[]:[],[l,i]),u=b.useMemo(()=>l.includes("Primary")?["Grade 1","Grade 2","Grade 3","Grade 4","Grade 5"]:l.includes("Secondary")||l.includes("Ordinary Level")?["Grade 6","Grade 7","Grade 8","Grade 9","Grade 10","Grade 11"]:l.includes("Advanced Level")?["Grade 12","Grade 13","Revision"]:[],[l]),f=t=>{j(d=>d.includes(t)?d.filter(g=>g!==t):[...d,t])},w=t=>{a(d=>d.includes(t)?d.filter(g=>g!==t):[...d,t])},T=()=>{if(!l||!p){s("Please select an audience and a subject.","error");return}if(h.length===0){s("Please select at least one medium.","error");return}if(u.length>0&&k.length===0){s("Please select at least one grade.","error");return}const t={id:Y(),audience:l,subject:p,mediums:h,grades:k};o([...r,t]),j([]),a([])},C=t=>{o(r.filter(d=>d.id!==t))};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-semibold border-b border-light-border dark:border-dark-border pb-2 text-light-text dark:text-dark-text",children:"Teaching Areas"}),e.jsxs("div",{className:"p-4 bg-light-surface dark:bg-dark-surface border border-light-border dark:border-dark-border rounded-lg",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsx(S,{label:"1. Target Audience",name:"audience",value:l,onChange:t=>{n(t.target.value),x("")},options:D}),e.jsx(S,{label:"2. Subject",name:"subject",value:p,onChange:t=>x(t.target.value),options:m})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-light-text dark:text-dark-text mb-2",children:"3. Medium"}),e.jsx("div",{className:"flex flex-wrap gap-3",children:["Sinhala","Tamil","English"].map(t=>e.jsxs("label",{className:`flex items-center px-3 py-1.5 rounded-full border cursor-pointer transition-colors ${h.includes(t)?"bg-primary/10 border-primary text-primary font-medium":"bg-light-background dark:bg-dark-background border-light-border dark:border-dark-border text-light-text dark:text-dark-text"}`,children:[e.jsx("input",{type:"checkbox",className:"hidden",checked:h.includes(t),onChange:()=>f(t)}),h.includes(t)&&e.jsx(X,{className:"w-4 h-4 mr-1.5"}),t]},t))})]}),u.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-light-text dark:text-dark-text mb-2",children:"4. Grade(s)"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:u.map(t=>e.jsxs("label",{className:`flex items-center px-3 py-1 rounded-md border cursor-pointer text-xs sm:text-sm transition-colors ${k.includes(t)?"bg-primary text-white border-primary":"bg-light-background dark:bg-dark-background border-light-border dark:border-dark-border text-light-text dark:text-dark-text"}`,children:[e.jsx("input",{type:"checkbox",className:"hidden",checked:k.includes(t),onChange:()=>w(t)}),t]},t))})]}),e.jsxs("button",{type:"button",onClick:T,className:"mt-2 flex items-center justify-center w-full py-2 px-4 border border-dashed border-primary text-primary rounded-md hover:bg-primary/10 transition-colors font-medium",children:[e.jsx(E,{className:"w-4 h-4 mr-2"})," Add This Subject"]})]}),r.length>0&&e.jsx("div",{className:"space-y-2",children:r.map(t=>e.jsxs("div",{className:"flex items-start justify-between p-3 bg-light-background dark:bg-dark-background rounded-md border border-light-border dark:border-dark-border",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-bold text-primary",children:t.subject}),e.jsx("span",{className:"text-xs px-2 py-0.5 bg-gray-200 dark:bg-gray-700 rounded-full text-gray-700 dark:text-gray-300",children:t.mediums.join(", ")})]}),e.jsx("p",{className:"text-xs text-light-subtle dark:text-dark-subtle mt-1",children:t.audience}),t.grades.length>0&&e.jsx("p",{className:"text-xs text-light-text dark:text-dark-text mt-1 font-medium",children:t.grades.join(", ")})]}),e.jsx("button",{type:"button",onClick:()=>C(t.id),className:"text-red-500 hover:bg-red-100 dark:hover:bg-red-900/50 p-1.5 rounded-full transition-colors",children:e.jsx(M,{className:"w-4 h-4"})})]},t.id))})]})},ee=({locations:r,onChange:o})=>{const{tuitionInstitutes:i,knownInstitutes:s}=$(),{addToast:l}=A(),[n,p]=b.useState(""),[x,h]=b.useState(""),[j,k]=b.useState(""),[a,m]=b.useState(""),u=b.useMemo(()=>{if(!n)return[];const t=K[n]||[];return[{value:"",label:"Select a town"},...t.map(d=>({value:d,label:d}))]},[n]),f=b.useMemo(()=>{if(!n||!x)return[];const t=i.map(c=>({name:c.name,type:"Tuition Institute"})),d=s.filter(c=>c.district===n&&c.town===x).map(c=>({name:c.name,type:c.type})),g=new Map;return t.forEach(c=>g.set(c.name,c)),d.forEach(c=>g.set(c.name,c)),Array.from(g.values()).sort((c,F)=>c.name.localeCompare(F.name))},[i,s,n,x]),w=t=>{const d=t.target.value;k(d);const g=f.find(c=>c.name.toLowerCase()===d.toLowerCase());g&&m(g.type)},T=()=>{if(!n||!x||!j||!a){l("Please fill in all location fields.","error");return}const t={id:Y(),district:n,town:x,instituteName:j,instituteType:a};o([...r,t]),k(""),m("")},C=t=>{o(r.filter(d=>d.id!==t))};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h2",{className:"text-xl font-semibold border-b border-light-border dark:border-dark-border pb-2 text-light-text dark:text-dark-text flex items-center",children:[e.jsx(Q,{className:"w-5 h-5 mr-2 text-primary"}),"Teaching Locations"]}),e.jsxs("div",{className:"p-4 bg-light-surface dark:bg-dark-surface border border-light-border dark:border-dark-border rounded-lg",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsx(P,{label:"District",options:V.map(t=>({value:t,label:t})),value:n,onChange:t=>{p(t),h("")},placeholder:"Select District"}),e.jsx(P,{label:"Town",options:u,value:x,onChange:h,placeholder:"Select Town",disabled:!n})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-light-text dark:text-dark-text mb-1",children:"Institute Name"}),e.jsx("input",{type:"text",list:"editor-institute-suggestions",value:j,onChange:w,placeholder:"Type or select...",className:"w-full px-3 py-2 border border-light-border dark:border-dark-border bg-light-background dark:bg-dark-background rounded-md focus:outline-none focus:ring-primary focus:border-primary sm:text-sm text-light-text dark:text-dark-text",disabled:!n||!x}),e.jsx("datalist",{id:"editor-institute-suggestions",children:f.map((t,d)=>e.jsx("option",{value:t.name},d))}),(!n||!x)&&e.jsx("p",{className:"text-xs text-light-subtle dark:text-dark-subtle mt-1",children:"Select District and Town first."})]}),e.jsx(S,{label:"Type",name:"locType",value:a,onChange:t=>m(t.target.value),options:W.map(t=>({value:t,label:t}))})]}),e.jsxs("button",{type:"button",onClick:T,className:"mt-2 flex items-center justify-center w-full py-2 px-4 border border-dashed border-primary text-primary rounded-md hover:bg-primary/10 transition-colors font-medium",children:[e.jsx(E,{className:"w-4 h-4 mr-2"})," Add Location"]})]}),r.length>0&&e.jsx("div",{className:"space-y-2",children:r.map(t=>e.jsxs("div",{className:"flex justify-between items-center p-3 bg-light-background dark:bg-dark-background rounded-md border border-light-border dark:border-dark-border",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-sm text-light-text dark:text-dark-text",children:t.instituteName}),e.jsxs("p",{className:"text-xs text-light-subtle dark:text-dark-subtle",children:[t.instituteType," â€¢ ",t.town,", ",t.district]})]}),e.jsx("button",{type:"button",onClick:()=>C(t.id),className:"text-red-500 hover:bg-red-100 dark:hover:bg-red-900/50 p-1.5 rounded-full",children:e.jsx(M,{className:"w-4 h-4"})})]},t.id))})]})},ne=({teacher:r,onSave:o,onCancel:i})=>{const[s,l]=b.useState(r),n=a=>{const{name:m,value:u}=a.target;l(f=>v(y({},f),{[m]:u}))},p=(a,m)=>{l(u=>v(y({},u),{[a]:m}))},x=a=>{const{name:m,value:u}=a.target;l(f=>v(y({},f),{contact:v(y({},f.contact),{[m]:u})}))},h=a=>{const m=Array.from(new Set(a.map(u=>u.subject)));l(u=>v(y({},u),{teachingItems:a,subjects:m}))},j=a=>{l(m=>v(y({},m),{teachingLocations:a}))},k=a=>{a.preventDefault(),o(s)};return e.jsxs("div",{className:"max-w-4xl mx-auto bg-light-surface dark:bg-dark-surface p-8 rounded-lg shadow-md animate-slideInUp",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6 text-light-text dark:text-dark-text",children:"Edit Your Profile"}),e.jsxs("form",{onSubmit:k,className:"space-y-8",children:[e.jsxs("section",{className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-semibold border-b border-light-border dark:border-dark-border pb-2 text-light-text dark:text-dark-text",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(N,{label:"Full Name",name:"name",value:s.name,onChange:n}),e.jsx(N,{label:"Username",name:"username",value:s.username,onChange:n})]}),e.jsx(N,{label:"Tagline",name:"tagline",value:s.tagline,onChange:n,placeholder:"e.g., Passionate Physics Educator"}),e.jsx(Z,{label:"Bio",id:"bio",name:"bio",value:s.bio,onChange:n,rows:4,placeholder:"Tell students about yourself..."})]}),e.jsxs("section",{className:"space-y-6",children:[e.jsx(H,{items:s.teachingItems||[],onChange:h}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-1 gap-6",children:e.jsx(N,{label:"Years of Experience",name:"experienceYears",type:"number",value:s.experienceYears.toString(),onChange:n})}),e.jsx(I,{label:"Exams You Prepare Students For",tags:s.exams,onTagsChange:a=>p("exams",a)}),e.jsx(I,{label:"Qualifications",tags:s.qualifications,onTagsChange:a=>p("qualifications",a)})]}),e.jsxs("section",{className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-semibold border-b border-light-border dark:border-dark-border pb-2 pt-4 text-light-text dark:text-dark-text",children:"Optional Details"}),e.jsx(I,{label:"YouTube Video Links",tags:s.youtubeLinks||[],onTagsChange:a=>p("youtubeLinks",a),placeholder:"Paste a YouTube link and press Enter"}),e.jsx("p",{className:"text-xs text-light-subtle dark:text-dark-subtle -mt-4",children:"Add links to your YouTube videos to showcase your teaching style or student testimonials. These will be displayed on your profile."}),e.jsxs("div",{className:"pt-4",children:[e.jsx(N,{label:"Google Drive Photo Gallery Link",name:"googleDriveLink",value:s.googleDriveLink||"",onChange:n,placeholder:"Paste a public Google Drive folder link"}),e.jsx("p",{className:"text-xs text-light-subtle dark:text-dark-subtle mt-1",children:"The folder must be public ('Anyone with the link can view') to create an image gallery on your profile."})]})]}),e.jsxs("section",{className:"space-y-6",children:[e.jsx(ee,{locations:s.teachingLocations||[],onChange:j}),e.jsx("h2",{className:"text-xl font-semibold border-b border-light-border dark:border-dark-border pb-2 pt-4 text-light-text dark:text-dark-text",children:"Contact Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(N,{label:"Phone Number",name:"phone",type:"tel",value:s.contact.phone,onChange:x}),e.jsx(N,{label:"Email Address",name:"email",type:"email",value:s.contact.email,onChange:x})]})]}),e.jsxs("div",{className:"pt-6 flex justify-end space-x-4",children:[e.jsxs("button",{type:"button",onClick:i,className:"inline-flex items-center justify-center px-6 py-2 border border-light-border dark:border-dark-border text-sm font-medium rounded-md shadow-sm text-light-text dark:text-dark-text bg-light-surface dark:bg-dark-surface hover:bg-light-border dark:hover:bg-dark-border/50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-light transition-colors",children:[e.jsx(_,{className:"w-5 h-5 mr-2"}),"Cancel"]}),e.jsxs("button",{type:"submit",className:"inline-flex items-center justify-center px-6 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary hover:bg-primary-dark focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-light transition-colors",children:[e.jsx(z,{className:"w-5 h-5 mr-2"}),"Save Changes"]})]})]})]})};export{ne as default};
