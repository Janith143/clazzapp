var $o=Object.defineProperty,Yo=Object.defineProperties;var Wo=Object.getOwnPropertyDescriptors;var ct=Object.getOwnPropertySymbols;var Ko=Object.prototype.hasOwnProperty,Oo=Object.prototype.propertyIsEnumerable;var Ge=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t),zo=t=>{throw TypeError(t)};var ft=(t,e,n)=>e in t?$o(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ee=(t,e)=>{for(var n in e||(e={}))Ko.call(e,n)&&ft(t,n,e[n]);if(ct)for(var n of ct(e))Oo.call(e,n)&&ft(t,n,e[n]);return t},te=(t,e)=>Yo(t,Wo(e));var g=(t,e,n)=>new Promise((o,s)=>{var l=c=>{try{u(n.next(c))}catch(d){s(d)}},a=c=>{try{u(n.throw(c))}catch(d){s(d)}},u=c=>c.done?o(c.value):Promise.resolve(c.value).then(l,a);u((n=n.apply(t,e)).next())}),Xo=function(t,e){this[0]=t,this[1]=e};var pt=t=>{var e=t[Ge("asyncIterator")],n=!1,o,s={};return e==null?(e=t[Ge("iterator")](),o=l=>s[l]=a=>e[l](a)):(e=e.call(t),o=l=>s[l]=a=>{if(n){if(n=!1,l==="throw")throw a;return a}return n=!0,{done:!1,value:new Xo(new Promise(u=>{var c=e[l](a);c instanceof Object||zo("Object expected"),u(c)}),1)}}),s[Ge("iterator")]=()=>s,o("next"),"throw"in e?o("throw"):s.throw=l=>{throw l},"return"in e&&o("return"),s};import{r as me,d as Qo,u as Xn,j as x,g as mt,am as Zo,l as ht,B as jo,V as ei}from"./index-BXN-gaEy.js";import{E as ti}from"./ExamCard-DZTlommE.js";var ni={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let oi,ii;function si(){return{geminiUrl:oi,vertexUrl:ii}}function ri(t,e,n,o){var s,l;if(!(t!=null&&t.baseUrl)){const a=si();return e?(s=a.vertexUrl)!==null&&s!==void 0?s:n:(l=a.geminiUrl)!==null&&l!==void 0?l:o}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class X{}function C(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(o,s)=>{if(Object.prototype.hasOwnProperty.call(e,s)){const l=e[s];return l!=null?String(l):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function r(t,e,n){for(let l=0;l<e.length-1;l++){const a=e[l];if(a.endsWith("[]")){const u=a.slice(0,-2);if(!(u in t))if(Array.isArray(n))t[u]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${a}`);if(Array.isArray(t[u])){const c=t[u];if(Array.isArray(n))for(let d=0;d<c.length;d++){const f=c[d];r(f,e.slice(l+1),n[d])}else for(const d of c)r(d,e.slice(l+1),n)}return}else if(a.endsWith("[0]")){const u=a.slice(0,-3);u in t||(t[u]=[{}]);const c=t[u];r(c[0],e.slice(l+1),n);return}(!t[a]||typeof t[a]!="object")&&(t[a]={}),t=t[a]}const o=e[e.length-1],s=t[o];if(s!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===s)return;if(typeof s=="object"&&typeof n=="object"&&s!==null&&n!==null)Object.assign(s,n);else throw new Error(`Cannot set value for an existing key. Key: ${o}`)}else o==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[o]=n}function i(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let o=0;o<e.length;o++){if(typeof t!="object"||t===null)return n;const s=e[o];if(s.endsWith("[]")){const l=s.slice(0,-2);if(l in t){const a=t[l];return Array.isArray(a)?a.map(u=>i(u,e.slice(o+1),n)):n}else return n}else t=t[s]}return t}catch(o){if(o instanceof TypeError)return n;throw o}}function li(t,e){for(const[n,o]of Object.entries(e)){const s=n.split("."),l=o.split("."),a=new Set;let u=-1;for(let c=0;c<s.length;c++)if(s[c]==="*"){u=c;break}if(u!==-1&&l.length>u)for(let c=u;c<l.length;c++){const d=l[c];d!=="*"&&!d.endsWith("[]")&&!d.endsWith("[0]")&&a.add(d)}be(t,s,l,0,a)}}function be(t,e,n,o,s){if(o>=e.length||typeof t!="object"||t===null)return;const l=e[o];if(l.endsWith("[]")){const a=l.slice(0,-2),u=t;if(a in u&&Array.isArray(u[a]))for(const c of u[a])be(c,e,n,o+1,s)}else if(l==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const a=t,u=Object.keys(a).filter(d=>!d.startsWith("_")&&!s.has(d)),c={};for(const d of u)c[d]=a[d];for(const[d,f]of Object.entries(c)){const p=[];for(const m of n.slice(o))m==="*"?p.push(d):p.push(m);r(a,p,f)}for(const d of u)delete a[d]}}else{const a=t;l in a&&be(a[l],e,n,o+1,s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tt(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ai(t){const e={},n=i(t,["operationName"]);n!=null&&r(e,["operationName"],n);const o=i(t,["resourceName"]);return o!=null&&r(e,["_url","resourceName"],o),e}function ui(t){const e={},n=i(t,["name"]);n!=null&&r(e,["name"],n);const o=i(t,["metadata"]);o!=null&&r(e,["metadata"],o);const s=i(t,["done"]);s!=null&&r(e,["done"],s);const l=i(t,["error"]);l!=null&&r(e,["error"],l);const a=i(t,["response","generateVideoResponse"]);return a!=null&&r(e,["response"],ci(a)),e}function di(t){const e={},n=i(t,["name"]);n!=null&&r(e,["name"],n);const o=i(t,["metadata"]);o!=null&&r(e,["metadata"],o);const s=i(t,["done"]);s!=null&&r(e,["done"],s);const l=i(t,["error"]);l!=null&&r(e,["error"],l);const a=i(t,["response"]);return a!=null&&r(e,["response"],fi(a)),e}function ci(t){const e={},n=i(t,["generatedSamples"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(a=>pi(a))),r(e,["generatedVideos"],l)}const o=i(t,["raiMediaFilteredCount"]);o!=null&&r(e,["raiMediaFilteredCount"],o);const s=i(t,["raiMediaFilteredReasons"]);return s!=null&&r(e,["raiMediaFilteredReasons"],s),e}function fi(t){const e={},n=i(t,["videos"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(a=>mi(a))),r(e,["generatedVideos"],l)}const o=i(t,["raiMediaFilteredCount"]);o!=null&&r(e,["raiMediaFilteredCount"],o);const s=i(t,["raiMediaFilteredReasons"]);return s!=null&&r(e,["raiMediaFilteredReasons"],s),e}function pi(t){const e={},n=i(t,["video"]);return n!=null&&r(e,["video"],_i(n)),e}function mi(t){const e={},n=i(t,["_self"]);return n!=null&&r(e,["video"],Ei(n)),e}function hi(t){const e={},n=i(t,["operationName"]);return n!=null&&r(e,["_url","operationName"],n),e}function gi(t){const e={},n=i(t,["operationName"]);return n!=null&&r(e,["_url","operationName"],n),e}function yi(t){const e={},n=i(t,["name"]);n!=null&&r(e,["name"],n);const o=i(t,["metadata"]);o!=null&&r(e,["metadata"],o);const s=i(t,["done"]);s!=null&&r(e,["done"],s);const l=i(t,["error"]);l!=null&&r(e,["error"],l);const a=i(t,["response"]);return a!=null&&r(e,["response"],vi(a)),e}function vi(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["parent"]);o!=null&&r(e,["parent"],o);const s=i(t,["documentName"]);return s!=null&&r(e,["documentName"],s),e}function Qn(t){const e={},n=i(t,["name"]);n!=null&&r(e,["name"],n);const o=i(t,["metadata"]);o!=null&&r(e,["metadata"],o);const s=i(t,["done"]);s!=null&&r(e,["done"],s);const l=i(t,["error"]);l!=null&&r(e,["error"],l);const a=i(t,["response"]);return a!=null&&r(e,["response"],Ti(a)),e}function Ti(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["parent"]);o!=null&&r(e,["parent"],o);const s=i(t,["documentName"]);return s!=null&&r(e,["documentName"],s),e}function _i(t){const e={},n=i(t,["uri"]);n!=null&&r(e,["uri"],n);const o=i(t,["encodedVideo"]);o!=null&&r(e,["videoBytes"],tt(o));const s=i(t,["encoding"]);return s!=null&&r(e,["mimeType"],s),e}function Ei(t){const e={},n=i(t,["gcsUri"]);n!=null&&r(e,["uri"],n);const o=i(t,["bytesBase64Encoded"]);o!=null&&r(e,["videoBytes"],tt(o));const s=i(t,["mimeType"]);return s!=null&&r(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var gt;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(gt||(gt={}));var yt;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(yt||(yt={}));var vt;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(vt||(vt={}));var Z;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Z||(Z={}));var Tt;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Tt||(Tt={}));var _t;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(_t||(_t={}));var Et;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(Et||(Et={}));var Ct;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Ct||(Ct={}));var St;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(St||(St={}));var It;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(It||(It={}));var At;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(At||(At={}));var Rt;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(Rt||(Rt={}));var wt;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(wt||(wt={}));var Mt;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(Mt||(Mt={}));var Nt;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(Nt||(Nt={}));var Pt;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Pt||(Pt={}));var xt;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(xt||(xt={}));var Dt;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(Dt||(Dt={}));var Ut;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Ut||(Ut={}));var Se;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Se||(Se={}));var kt;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(kt||(kt={}));var Lt;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Lt||(Lt={}));var Ft;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Ft||(Ft={}));var Be;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Be||(Be={}));var Gt;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Gt||(Gt={}));var Vt;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(Vt||(Vt={}));var qt;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(qt||(qt={}));var Ht;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(Ht||(Ht={}));var bt;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(bt||(bt={}));var Bt;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Bt||(Bt={}));var Jt;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(Jt||(Jt={}));var $t;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})($t||($t={}));var Yt;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(Yt||(Yt={}));var Wt;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(Wt||(Wt={}));var Kt;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Kt||(Kt={}));var Ot;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Ot||(Ot={}));var zt;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(zt||(zt={}));var Xt;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Xt||(Xt={}));var Qt;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(Qt||(Qt={}));var Zt;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(Zt||(Zt={}));var jt;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(jt||(jt={}));var en;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(en||(en={}));var tn;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(tn||(tn={}));var nn;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(nn||(nn={}));var on;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(on||(on={}));var sn;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(sn||(sn={}));var rn;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(rn||(rn={}));var ln;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(ln||(ln={}));var an;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(an||(an={}));var un;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(un||(un={}));var dn;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(dn||(dn={}));var cn;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(cn||(cn={}));var fn;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(fn||(fn={}));var pn;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(pn||(pn={}));var mn;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(mn||(mn={}));var se;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(se||(se={}));class Je{constructor(e){const n={};for(const o of e.headers.entries())n[o[0]]=o[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class fe{get text(){var e,n,o,s,l,a,u,c;if(((s=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let d="",f=!1;const p=[];for(const m of(c=(u=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)!==null&&c!==void 0?c:[]){for(const[h,v]of Object.entries(m))h!=="text"&&h!=="thought"&&h!=="thoughtSignature"&&(v!==null||v!==void 0)&&p.push(h);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;f=!0,d+=m.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?d:void 0}get data(){var e,n,o,s,l,a,u,c;if(((s=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let d="";const f=[];for(const p of(c=(u=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)!==null&&c!==void 0?c:[]){for(const[m,h]of Object.entries(p))m!=="inlineData"&&(h!==null||h!==void 0)&&f.push(m);p.inlineData&&typeof p.inlineData.data=="string"&&(d+=atob(p.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),d.length>0?btoa(d):void 0}get functionCalls(){var e,n,o,s,l,a,u,c;if(((s=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const d=(c=(u=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||c===void 0?void 0:c.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>f!==void 0);if((d==null?void 0:d.length)!==0)return d}get executableCode(){var e,n,o,s,l,a,u,c,d;if(((s=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const f=(c=(u=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||c===void 0?void 0:c.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return(d=f==null?void 0:f[0])===null||d===void 0?void 0:d.code}get codeExecutionResult(){var e,n,o,s,l,a,u,c,d;if(((s=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const f=(c=(u=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||c===void 0?void 0:c.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return(d=f==null?void 0:f[0])===null||d===void 0?void 0:d.output}}class hn{}class gn{}class Ci{}class Si{}class Ii{}class Ai{}class yn{}class vn{}class Tn{}class Ri{}class Ie{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const o=new Ie;let s;const l=e;return n?s=di(l):s=ui(l),Object.assign(o,s),o}}class _n{}class En{}class Cn{}class Sn{}class wi{}class Mi{}class Ni{}class nt{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const o=new nt,l=yi(e);return Object.assign(o,l),o}}class Pi{}class xi{}class Di{}class In{}class Ui{get text(){var e,n,o;let s="",l=!1;const a=[];for(const u of(o=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(const[c,d]of Object.entries(u))c!=="text"&&c!=="thought"&&d!==null&&a.push(c);if(typeof u.text=="string"){if(typeof u.thought=="boolean"&&u.thought)continue;l=!0,s+=u.text}}return a.length>0&&console.warn(`there are non-text parts ${a} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?s:void 0}get data(){var e,n,o;let s="";const l=[];for(const a of(o=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(const[u,c]of Object.entries(a))u!=="inlineData"&&c!==null&&l.push(u);a.inlineData&&typeof a.inlineData.data=="string"&&(s+=atob(a.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class ki{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class ot{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const o=new ot,l=Qn(e);return Object.assign(o,l),o}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function D(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function Zn(t,e){const n=D(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function jn(t){return Array.isArray(t)?t.map(e=>Ae(e)):[Ae(t)]}function Ae(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function eo(t){const e=Ae(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function to(t){const e=Ae(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function An(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function no(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>An(e)):[An(t)]}function $e(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function Rn(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function wn(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function V(t){if(t==null)throw new Error("ContentUnion is required");return $e(t)?t:{role:"user",parts:no(t)}}function it(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const o=V(n);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]});if(t.isVertexAI()){const n=V(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>V(n)):[V(e)]}function B(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(Rn(t)||wn(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[V(t)]}const e=[],n=[],o=$e(t[0]);for(const s of t){const l=$e(s);if(l!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(s);else{if(Rn(s)||wn(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(s)}}return o||e.push({role:"user",parts:no(n)}),e}function Li(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(o=>o!=="null");if(n.length===1)e.type=Object.values(Z).includes(n[0].toUpperCase())?n[0].toUpperCase():Z.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const o of n)e.anyOf.push({type:Object.values(Z).includes(o.toUpperCase())?o.toUpperCase():Z.TYPE_UNSPECIFIED})}}function le(t){const e={},n=["items"],o=["anyOf"],s=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=t.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,t=l[1]):l[1].type==="null"&&(e.nullable=!0,t=l[0])),t.type instanceof Array&&Li(t.type,e);for(const[a,u]of Object.entries(t))if(u!=null)if(a=="type"){if(u==="null")throw new Error("type: null can not be the only possible type for the field.");if(u instanceof Array)continue;e.type=Object.values(Z).includes(u.toUpperCase())?u.toUpperCase():Z.TYPE_UNSPECIFIED}else if(n.includes(a))e[a]=le(u);else if(o.includes(a)){const c=[];for(const d of u){if(d.type=="null"){e.nullable=!0;continue}c.push(le(d))}e[a]=c}else if(s.includes(a)){const c={};for(const[d,f]of Object.entries(u))c[d]=le(f);e[a]=c}else{if(a==="additionalProperties")continue;e[a]=u}return e}function st(t){return le(t)}function rt(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function lt(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function ue(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=le(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=le(e.response));return t}function de(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function Fi(t,e,n,o=1){const s=!e.startsWith(`${n}/`)&&e.split("/").length===o;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:s?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:s?`${n}/${e}`:e}function Q(t,e){if(typeof e!="string")throw new Error("name must be a string");return Fi(t,e,"cachedContents")}function oo(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function j(t){return tt(t)}function Gi(t){return t!=null&&typeof t=="object"&&"name"in t}function Vi(t){return t!=null&&typeof t=="object"&&"video"in t}function qi(t){return t!=null&&typeof t=="object"&&"uri"in t}function io(t){var e;let n;if(Gi(t)&&(n=t.name),!(qi(t)&&(n=t.uri,n===void 0))&&!(Vi(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const s=n.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${n}`);n=s[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function so(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function ro(t){for(const e of["models","tunedModels","publisherModels"])if(Hi(t,e))return t[e];return[]}function Hi(t,e){return t!==null&&typeof t=="object"&&e in t}function bi(t,e={}){const n=t,o={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(o.responseJsonSchema=n.outputSchema),e.behavior&&(o.behavior=e.behavior),{functionDeclarations:[o]}}function Bi(t,e={}){const n=[],o=new Set;for(const s of t){const l=s.name;if(o.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);o.add(l);const a=bi(s,e);a.functionDeclarations&&n.push(...a.functionDeclarations)}return{functionDeclarations:n}}function lo(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const o=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,s=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(s>0||o!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(o>0||s!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function Ji(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function ao(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const s=n.inlinedResponses;if(!Array.isArray(s)||s.length===0)return t;let l=!1;for(const a of s){if(typeof a!="object"||a===null)continue;const c=a.response;if(typeof c!="object"||c===null)continue;if(c.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function ce(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function uo(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $i(t){const e={},n=i(t,["responsesFile"]);n!=null&&r(e,["fileName"],n);const o=i(t,["inlinedResponses","inlinedResponses"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>Is(a))),r(e,["inlinedResponses"],l)}const s=i(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(a=>a)),r(e,["inlinedEmbedContentResponses"],l)}return e}function Yi(t){const e={},n=i(t,["predictionsFormat"]);n!=null&&r(e,["format"],n);const o=i(t,["gcsDestination","outputUriPrefix"]);o!=null&&r(e,["gcsUri"],o);const s=i(t,["bigqueryDestination","outputUri"]);return s!=null&&r(e,["bigqueryUri"],s),e}function Wi(t){const e={},n=i(t,["format"]);n!=null&&r(e,["predictionsFormat"],n);const o=i(t,["gcsUri"]);o!=null&&r(e,["gcsDestination","outputUriPrefix"],o);const s=i(t,["bigqueryUri"]);if(s!=null&&r(e,["bigqueryDestination","outputUri"],s),i(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(i(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(i(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Ee(t){const e={},n=i(t,["name"]);n!=null&&r(e,["name"],n);const o=i(t,["metadata","displayName"]);o!=null&&r(e,["displayName"],o);const s=i(t,["metadata","state"]);s!=null&&r(e,["state"],uo(s));const l=i(t,["metadata","createTime"]);l!=null&&r(e,["createTime"],l);const a=i(t,["metadata","endTime"]);a!=null&&r(e,["endTime"],a);const u=i(t,["metadata","updateTime"]);u!=null&&r(e,["updateTime"],u);const c=i(t,["metadata","model"]);c!=null&&r(e,["model"],c);const d=i(t,["metadata","output"]);return d!=null&&r(e,["dest"],$i(ao(d))),e}function Ye(t){const e={},n=i(t,["name"]);n!=null&&r(e,["name"],n);const o=i(t,["displayName"]);o!=null&&r(e,["displayName"],o);const s=i(t,["state"]);s!=null&&r(e,["state"],uo(s));const l=i(t,["error"]);l!=null&&r(e,["error"],l);const a=i(t,["createTime"]);a!=null&&r(e,["createTime"],a);const u=i(t,["startTime"]);u!=null&&r(e,["startTime"],u);const c=i(t,["endTime"]);c!=null&&r(e,["endTime"],c);const d=i(t,["updateTime"]);d!=null&&r(e,["updateTime"],d);const f=i(t,["model"]);f!=null&&r(e,["model"],f);const p=i(t,["inputConfig"]);p!=null&&r(e,["src"],Ki(p));const m=i(t,["outputConfig"]);m!=null&&r(e,["dest"],Yi(ao(m)));const h=i(t,["completionStats"]);return h!=null&&r(e,["completionStats"],h),e}function Ki(t){const e={},n=i(t,["instancesFormat"]);n!=null&&r(e,["format"],n);const o=i(t,["gcsSource","uris"]);o!=null&&r(e,["gcsUri"],o);const s=i(t,["bigquerySource","inputUri"]);return s!=null&&r(e,["bigqueryUri"],s),e}function Oi(t,e){const n={};if(i(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(i(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(i(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const o=i(e,["fileName"]);o!=null&&r(n,["fileName"],o);const s=i(e,["inlinedRequests"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(a=>Ss(t,a))),r(n,["requests","requests"],l)}return n}function zi(t){const e={},n=i(t,["format"]);n!=null&&r(e,["instancesFormat"],n);const o=i(t,["gcsUri"]);o!=null&&r(e,["gcsSource","uris"],o);const s=i(t,["bigqueryUri"]);if(s!=null&&r(e,["bigquerySource","inputUri"],s),i(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(i(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function Xi(t){const e={},n=i(t,["data"]);if(n!=null&&r(e,["data"],n),i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function Qi(t,e){const n={},o=i(e,["name"]);return o!=null&&r(n,["_url","name"],ce(t,o)),n}function Zi(t,e){const n={},o=i(e,["name"]);return o!=null&&r(n,["_url","name"],ce(t,o)),n}function ji(t){const e={},n=i(t,["content"]);n!=null&&r(e,["content"],n);const o=i(t,["citationMetadata"]);o!=null&&r(e,["citationMetadata"],es(o));const s=i(t,["tokenCount"]);s!=null&&r(e,["tokenCount"],s);const l=i(t,["finishReason"]);l!=null&&r(e,["finishReason"],l);const a=i(t,["avgLogprobs"]);a!=null&&r(e,["avgLogprobs"],a);const u=i(t,["groundingMetadata"]);u!=null&&r(e,["groundingMetadata"],u);const c=i(t,["index"]);c!=null&&r(e,["index"],c);const d=i(t,["logprobsResult"]);d!=null&&r(e,["logprobsResult"],d);const f=i(t,["safetyRatings"]);if(f!=null){let m=f;Array.isArray(m)&&(m=m.map(h=>h)),r(e,["safetyRatings"],m)}const p=i(t,["urlContextMetadata"]);return p!=null&&r(e,["urlContextMetadata"],p),e}function es(t){const e={},n=i(t,["citationSources"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>s)),r(e,["citations"],o)}return e}function co(t){const e={},n=i(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>xs(l))),r(e,["parts"],s)}const o=i(t,["role"]);return o!=null&&r(e,["role"],o),e}function ts(t,e){const n={},o=i(t,["displayName"]);if(e!==void 0&&o!=null&&r(e,["batch","displayName"],o),i(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function ns(t,e){const n={},o=i(t,["displayName"]);e!==void 0&&o!=null&&r(e,["displayName"],o);const s=i(t,["dest"]);return e!==void 0&&s!=null&&r(e,["outputConfig"],Wi(Ji(s))),n}function Mn(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],D(t,o));const s=i(e,["src"]);s!=null&&r(n,["batch","inputConfig"],Oi(t,lo(t,s)));const l=i(e,["config"]);return l!=null&&ts(l,n),n}function os(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["model"],D(t,o));const s=i(e,["src"]);s!=null&&r(n,["inputConfig"],zi(lo(t,s)));const l=i(e,["config"]);return l!=null&&ns(l,n),n}function is(t,e){const n={},o=i(t,["displayName"]);return e!==void 0&&o!=null&&r(e,["batch","displayName"],o),n}function ss(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],D(t,o));const s=i(e,["src"]);s!=null&&r(n,["batch","inputConfig"],fs(t,s));const l=i(e,["config"]);return l!=null&&is(l,n),n}function rs(t,e){const n={},o=i(e,["name"]);return o!=null&&r(n,["_url","name"],ce(t,o)),n}function ls(t,e){const n={},o=i(e,["name"]);return o!=null&&r(n,["_url","name"],ce(t,o)),n}function as(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["name"]);o!=null&&r(e,["name"],o);const s=i(t,["done"]);s!=null&&r(e,["done"],s);const l=i(t,["error"]);return l!=null&&r(e,["error"],l),e}function us(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["name"]);o!=null&&r(e,["name"],o);const s=i(t,["done"]);s!=null&&r(e,["done"],s);const l=i(t,["error"]);return l!=null&&r(e,["error"],l),e}function ds(t,e){const n={},o=i(e,["contents"]);if(o!=null){let l=it(t,o);Array.isArray(l)&&(l=l.map(a=>a)),r(n,["requests[]","request","content"],l)}const s=i(e,["config"]);return s!=null&&(r(n,["_self"],cs(s,n)),li(n,{"requests[].*":"requests[].request.*"})),n}function cs(t,e){const n={},o=i(t,["taskType"]);e!==void 0&&o!=null&&r(e,["requests[]","taskType"],o);const s=i(t,["title"]);e!==void 0&&s!=null&&r(e,["requests[]","title"],s);const l=i(t,["outputDimensionality"]);if(e!==void 0&&l!=null&&r(e,["requests[]","outputDimensionality"],l),i(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(i(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function fs(t,e){const n={},o=i(e,["fileName"]);o!=null&&r(n,["file_name"],o);const s=i(e,["inlinedRequests"]);return s!=null&&r(n,["requests"],ds(t,s)),n}function ps(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["fileUri"]);n!=null&&r(e,["fileUri"],n);const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function ms(t){const e={},n=i(t,["id"]);n!=null&&r(e,["id"],n);const o=i(t,["args"]);o!=null&&r(e,["args"],o);const s=i(t,["name"]);if(s!=null&&r(e,["name"],s),i(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(i(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function hs(t){const e={},n=i(t,["mode"]);n!=null&&r(e,["mode"],n);const o=i(t,["allowedFunctionNames"]);if(o!=null&&r(e,["allowedFunctionNames"],o),i(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function gs(t,e,n){const o={},s=i(e,["systemInstruction"]);n!==void 0&&s!=null&&r(n,["systemInstruction"],co(V(s)));const l=i(e,["temperature"]);l!=null&&r(o,["temperature"],l);const a=i(e,["topP"]);a!=null&&r(o,["topP"],a);const u=i(e,["topK"]);u!=null&&r(o,["topK"],u);const c=i(e,["candidateCount"]);c!=null&&r(o,["candidateCount"],c);const d=i(e,["maxOutputTokens"]);d!=null&&r(o,["maxOutputTokens"],d);const f=i(e,["stopSequences"]);f!=null&&r(o,["stopSequences"],f);const p=i(e,["responseLogprobs"]);p!=null&&r(o,["responseLogprobs"],p);const m=i(e,["logprobs"]);m!=null&&r(o,["logprobs"],m);const h=i(e,["presencePenalty"]);h!=null&&r(o,["presencePenalty"],h);const v=i(e,["frequencyPenalty"]);v!=null&&r(o,["frequencyPenalty"],v);const T=i(e,["seed"]);T!=null&&r(o,["seed"],T);const y=i(e,["responseMimeType"]);y!=null&&r(o,["responseMimeType"],y);const _=i(e,["responseSchema"]);_!=null&&r(o,["responseSchema"],st(_));const I=i(e,["responseJsonSchema"]);if(I!=null&&r(o,["responseJsonSchema"],I),i(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(i(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const S=i(e,["safetySettings"]);if(n!==void 0&&S!=null){let E=S;Array.isArray(E)&&(E=E.map(k=>Ds(k))),r(n,["safetySettings"],E)}const A=i(e,["tools"]);if(n!==void 0&&A!=null){let E=de(A);Array.isArray(E)&&(E=E.map(k=>ks(ue(k)))),r(n,["tools"],E)}const M=i(e,["toolConfig"]);if(n!==void 0&&M!=null&&r(n,["toolConfig"],Us(M)),i(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const P=i(e,["cachedContent"]);n!==void 0&&P!=null&&r(n,["cachedContent"],Q(t,P));const N=i(e,["responseModalities"]);N!=null&&r(o,["responseModalities"],N);const L=i(e,["mediaResolution"]);L!=null&&r(o,["mediaResolution"],L);const R=i(e,["speechConfig"]);if(R!=null&&r(o,["speechConfig"],rt(R)),i(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const U=i(e,["thinkingConfig"]);U!=null&&r(o,["thinkingConfig"],U);const F=i(e,["imageConfig"]);F!=null&&r(o,["imageConfig"],Cs(F));const $=i(e,["enableEnhancedCivicAnswers"]);return $!=null&&r(o,["enableEnhancedCivicAnswers"],$),o}function ys(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["candidates"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(d=>ji(d))),r(e,["candidates"],c)}const s=i(t,["modelVersion"]);s!=null&&r(e,["modelVersion"],s);const l=i(t,["promptFeedback"]);l!=null&&r(e,["promptFeedback"],l);const a=i(t,["responseId"]);a!=null&&r(e,["responseId"],a);const u=i(t,["usageMetadata"]);return u!=null&&r(e,["usageMetadata"],u),e}function vs(t,e){const n={},o=i(e,["name"]);return o!=null&&r(n,["_url","name"],ce(t,o)),n}function Ts(t,e){const n={},o=i(e,["name"]);return o!=null&&r(n,["_url","name"],ce(t,o)),n}function _s(t){const e={};if(i(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=i(t,["enableWidget"]);return n!=null&&r(e,["enableWidget"],n),e}function Es(t){const e={};if(i(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(i(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=i(t,["timeRangeFilter"]);return n!=null&&r(e,["timeRangeFilter"],n),e}function Cs(t){const e={},n=i(t,["aspectRatio"]);n!=null&&r(e,["aspectRatio"],n);const o=i(t,["imageSize"]);if(o!=null&&r(e,["imageSize"],o),i(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(i(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function Ss(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["request","model"],D(t,o));const s=i(e,["contents"]);if(s!=null){let u=B(s);Array.isArray(u)&&(u=u.map(c=>co(c))),r(n,["request","contents"],u)}const l=i(e,["metadata"]);l!=null&&r(n,["metadata"],l);const a=i(e,["config"]);return a!=null&&r(n,["request","generationConfig"],gs(t,a,i(n,["request"],{}))),n}function Is(t){const e={},n=i(t,["response"]);n!=null&&r(e,["response"],ys(n));const o=i(t,["error"]);return o!=null&&r(e,["error"],o),e}function As(t,e){const n={},o=i(t,["pageSize"]);e!==void 0&&o!=null&&r(e,["_query","pageSize"],o);const s=i(t,["pageToken"]);if(e!==void 0&&s!=null&&r(e,["_query","pageToken"],s),i(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function Rs(t,e){const n={},o=i(t,["pageSize"]);e!==void 0&&o!=null&&r(e,["_query","pageSize"],o);const s=i(t,["pageToken"]);e!==void 0&&s!=null&&r(e,["_query","pageToken"],s);const l=i(t,["filter"]);return e!==void 0&&l!=null&&r(e,["_query","filter"],l),n}function ws(t){const e={},n=i(t,["config"]);return n!=null&&As(n,e),e}function Ms(t){const e={},n=i(t,["config"]);return n!=null&&Rs(n,e),e}function Ns(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["nextPageToken"]);o!=null&&r(e,["nextPageToken"],o);const s=i(t,["operations"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(a=>Ee(a))),r(e,["batchJobs"],l)}return e}function Ps(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["nextPageToken"]);o!=null&&r(e,["nextPageToken"],o);const s=i(t,["batchPredictionJobs"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(a=>Ye(a))),r(e,["batchJobs"],l)}return e}function xs(t){const e={},n=i(t,["mediaResolution"]);n!=null&&r(e,["mediaResolution"],n);const o=i(t,["codeExecutionResult"]);o!=null&&r(e,["codeExecutionResult"],o);const s=i(t,["executableCode"]);s!=null&&r(e,["executableCode"],s);const l=i(t,["fileData"]);l!=null&&r(e,["fileData"],ps(l));const a=i(t,["functionCall"]);a!=null&&r(e,["functionCall"],ms(a));const u=i(t,["functionResponse"]);u!=null&&r(e,["functionResponse"],u);const c=i(t,["inlineData"]);c!=null&&r(e,["inlineData"],Xi(c));const d=i(t,["text"]);d!=null&&r(e,["text"],d);const f=i(t,["thought"]);f!=null&&r(e,["thought"],f);const p=i(t,["thoughtSignature"]);p!=null&&r(e,["thoughtSignature"],p);const m=i(t,["videoMetadata"]);return m!=null&&r(e,["videoMetadata"],m),e}function Ds(t){const e={},n=i(t,["category"]);if(n!=null&&r(e,["category"],n),i(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=i(t,["threshold"]);return o!=null&&r(e,["threshold"],o),e}function Us(t){const e={},n=i(t,["functionCallingConfig"]);n!=null&&r(e,["functionCallingConfig"],hs(n));const o=i(t,["retrievalConfig"]);return o!=null&&r(e,["retrievalConfig"],o),e}function ks(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),r(e,["functionDeclarations"],f)}if(i(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(t,["googleSearchRetrieval"]);o!=null&&r(e,["googleSearchRetrieval"],o);const s=i(t,["computerUse"]);s!=null&&r(e,["computerUse"],s);const l=i(t,["fileSearch"]);l!=null&&r(e,["fileSearch"],l);const a=i(t,["codeExecution"]);if(a!=null&&r(e,["codeExecution"],a),i(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=i(t,["googleMaps"]);u!=null&&r(e,["googleMaps"],_s(u));const c=i(t,["googleSearch"]);c!=null&&r(e,["googleSearch"],Es(c));const d=i(t,["urlContext"]);return d!=null&&r(e,["urlContext"],d),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var z;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(z||(z={}));class oe{constructor(e,n,o,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,o,s)}init(e,n,o){var s,l;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let a={config:{}};!o||Object.keys(o).length===0?a={config:{}}:typeof o=="object"?a=Object.assign({},o):a=o,a.config&&(a.config.pageToken=n.nextPageToken),this.paramsInternal=a,this.pageInternalSize=(l=(s=a.config)===null||s===void 0?void 0:s.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:()=>g(this,null,function*(){if(this.idxInternal>=this.pageLength)if(this.hasNextPage())yield this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}}),return:()=>g(this,null,function*(){return{value:void 0,done:!0}})}}nextPage(){return g(this,null,function*(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=yield this.requestInternal(this.params);return this.initNextPage(e),this.page})}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ls extends X{constructor(e){super(),this.apiClient=e,this.list=(...o)=>g(this,[...o],function*(n={}){return new oe(z.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),yield this.listInternal(n),n)}),this.create=n=>g(this,null,function*(){return this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)}),this.createEmbeddings=n=>g(this,null,function*(){if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)})}createInlinedGenerateContentRequest(e){const n=Mn(this.apiClient,e),o=n._url,s=C("{model}:batchGenerateContent",o),u=n.batch.inputConfig.requests,c=u.requests,d=[];for(const f of c){const p=Object.assign({},f);if(p.systemInstruction){const m=p.systemInstruction;delete p.systemInstruction;const h=p.request;h.systemInstruction=m,p.request=h}d.push(p)}return u.requests=d,delete n.config,delete n._url,delete n._query,{path:s,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const o=n?Object.assign({},n):{},s=Date.now().toString();if(o.displayName||(o.displayName=`genaiBatchJob_${s}`),o.dest===void 0){const l=this.getGcsUri(e),a=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?o.dest=`${l.slice(0,-6)}/dest`:o.dest=`${l}_dest_${s}`;else if(a)o.dest=`${a}_dest_${s}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return o}createInternal(e){return g(this,null,function*(){var n,o,s,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=os(this.apiClient,e);return u=C("batchPredictionJobs",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>Ye(f))}else{const d=Mn(this.apiClient,e);return u=C("{model}:batchGenerateContent",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>Ee(f))}})}createEmbeddingsInternal(e){return g(this,null,function*(){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=ss(this.apiClient,e);return l=C("{model}:asyncBatchEmbedContent",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),s.then(c=>Ee(c))}})}get(e){return g(this,null,function*(){var n,o,s,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=Ts(this.apiClient,e);return u=C("batchPredictionJobs/{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>Ye(f))}else{const d=vs(this.apiClient,e);return u=C("batches/{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>Ee(f))}})}cancel(e){return g(this,null,function*(){var n,o,s,l;let a="",u={};if(this.apiClient.isVertexAI()){const c=Zi(this.apiClient,e);a=C("batchPredictionJobs/{name}:cancel",c._url),u=c._query,delete c._url,delete c._query,yield this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{const c=Qi(this.apiClient,e);a=C("batches/{name}:cancel",c._url),u=c._query,delete c._url,delete c._query,yield this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}})}listInternal(e){return g(this,null,function*(){var n,o,s,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=Ms(e);return u=C("batchPredictionJobs",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=Ps(f),m=new In;return Object.assign(m,p),m})}else{const d=ws(e);return u=C("batches",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=Ns(f),m=new In;return Object.assign(m,p),m})}})}delete(e){return g(this,null,function*(){var n,o,s,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=ls(this.apiClient,e);return u=C("batchPredictionJobs/{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>us(f))}else{const d=rs(this.apiClient,e);return u=C("batches/{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>as(f))}})}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Fs(t){const e={},n=i(t,["data"]);if(n!=null&&r(e,["data"],n),i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function Nn(t){const e={},n=i(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>sr(l))),r(e,["parts"],s)}const o=i(t,["role"]);return o!=null&&r(e,["role"],o),e}function Gs(t,e){const n={},o=i(t,["ttl"]);e!==void 0&&o!=null&&r(e,["ttl"],o);const s=i(t,["expireTime"]);e!==void 0&&s!=null&&r(e,["expireTime"],s);const l=i(t,["displayName"]);e!==void 0&&l!=null&&r(e,["displayName"],l);const a=i(t,["contents"]);if(e!==void 0&&a!=null){let f=B(a);Array.isArray(f)&&(f=f.map(p=>Nn(p))),r(e,["contents"],f)}const u=i(t,["systemInstruction"]);e!==void 0&&u!=null&&r(e,["systemInstruction"],Nn(V(u)));const c=i(t,["tools"]);if(e!==void 0&&c!=null){let f=c;Array.isArray(f)&&(f=f.map(p=>lr(p))),r(e,["tools"],f)}const d=i(t,["toolConfig"]);if(e!==void 0&&d!=null&&r(e,["toolConfig"],rr(d)),i(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function Vs(t,e){const n={},o=i(t,["ttl"]);e!==void 0&&o!=null&&r(e,["ttl"],o);const s=i(t,["expireTime"]);e!==void 0&&s!=null&&r(e,["expireTime"],s);const l=i(t,["displayName"]);e!==void 0&&l!=null&&r(e,["displayName"],l);const a=i(t,["contents"]);if(e!==void 0&&a!=null){let p=B(a);Array.isArray(p)&&(p=p.map(m=>m)),r(e,["contents"],p)}const u=i(t,["systemInstruction"]);e!==void 0&&u!=null&&r(e,["systemInstruction"],V(u));const c=i(t,["tools"]);if(e!==void 0&&c!=null){let p=c;Array.isArray(p)&&(p=p.map(m=>ar(m))),r(e,["tools"],p)}const d=i(t,["toolConfig"]);e!==void 0&&d!=null&&r(e,["toolConfig"],d);const f=i(t,["kmsKeyName"]);return e!==void 0&&f!=null&&r(e,["encryption_spec","kmsKeyName"],f),n}function qs(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["model"],Zn(t,o));const s=i(e,["config"]);return s!=null&&Gs(s,n),n}function Hs(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["model"],Zn(t,o));const s=i(e,["config"]);return s!=null&&Vs(s,n),n}function bs(t,e){const n={},o=i(e,["name"]);return o!=null&&r(n,["_url","name"],Q(t,o)),n}function Bs(t,e){const n={},o=i(e,["name"]);return o!=null&&r(n,["_url","name"],Q(t,o)),n}function Js(t){const e={},n=i(t,["sdkHttpResponse"]);return n!=null&&r(e,["sdkHttpResponse"],n),e}function $s(t){const e={},n=i(t,["sdkHttpResponse"]);return n!=null&&r(e,["sdkHttpResponse"],n),e}function Ys(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["fileUri"]);n!=null&&r(e,["fileUri"],n);const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function Ws(t){const e={},n=i(t,["id"]);n!=null&&r(e,["id"],n);const o=i(t,["args"]);o!=null&&r(e,["args"],o);const s=i(t,["name"]);if(s!=null&&r(e,["name"],s),i(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(i(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Ks(t){const e={},n=i(t,["mode"]);n!=null&&r(e,["mode"],n);const o=i(t,["allowedFunctionNames"]);if(o!=null&&r(e,["allowedFunctionNames"],o),i(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Os(t){const e={};if(i(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=i(t,["description"]);n!=null&&r(e,["description"],n);const o=i(t,["name"]);o!=null&&r(e,["name"],o);const s=i(t,["parameters"]);s!=null&&r(e,["parameters"],s);const l=i(t,["parametersJsonSchema"]);l!=null&&r(e,["parametersJsonSchema"],l);const a=i(t,["response"]);a!=null&&r(e,["response"],a);const u=i(t,["responseJsonSchema"]);return u!=null&&r(e,["responseJsonSchema"],u),e}function zs(t,e){const n={},o=i(e,["name"]);return o!=null&&r(n,["_url","name"],Q(t,o)),n}function Xs(t,e){const n={},o=i(e,["name"]);return o!=null&&r(n,["_url","name"],Q(t,o)),n}function Qs(t){const e={};if(i(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=i(t,["enableWidget"]);return n!=null&&r(e,["enableWidget"],n),e}function Zs(t){const e={};if(i(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(i(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=i(t,["timeRangeFilter"]);return n!=null&&r(e,["timeRangeFilter"],n),e}function js(t,e){const n={},o=i(t,["pageSize"]);e!==void 0&&o!=null&&r(e,["_query","pageSize"],o);const s=i(t,["pageToken"]);return e!==void 0&&s!=null&&r(e,["_query","pageToken"],s),n}function er(t,e){const n={},o=i(t,["pageSize"]);e!==void 0&&o!=null&&r(e,["_query","pageSize"],o);const s=i(t,["pageToken"]);return e!==void 0&&s!=null&&r(e,["_query","pageToken"],s),n}function tr(t){const e={},n=i(t,["config"]);return n!=null&&js(n,e),e}function nr(t){const e={},n=i(t,["config"]);return n!=null&&er(n,e),e}function or(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["nextPageToken"]);o!=null&&r(e,["nextPageToken"],o);const s=i(t,["cachedContents"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(a=>a)),r(e,["cachedContents"],l)}return e}function ir(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["nextPageToken"]);o!=null&&r(e,["nextPageToken"],o);const s=i(t,["cachedContents"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(a=>a)),r(e,["cachedContents"],l)}return e}function sr(t){const e={},n=i(t,["mediaResolution"]);n!=null&&r(e,["mediaResolution"],n);const o=i(t,["codeExecutionResult"]);o!=null&&r(e,["codeExecutionResult"],o);const s=i(t,["executableCode"]);s!=null&&r(e,["executableCode"],s);const l=i(t,["fileData"]);l!=null&&r(e,["fileData"],Ys(l));const a=i(t,["functionCall"]);a!=null&&r(e,["functionCall"],Ws(a));const u=i(t,["functionResponse"]);u!=null&&r(e,["functionResponse"],u);const c=i(t,["inlineData"]);c!=null&&r(e,["inlineData"],Fs(c));const d=i(t,["text"]);d!=null&&r(e,["text"],d);const f=i(t,["thought"]);f!=null&&r(e,["thought"],f);const p=i(t,["thoughtSignature"]);p!=null&&r(e,["thoughtSignature"],p);const m=i(t,["videoMetadata"]);return m!=null&&r(e,["videoMetadata"],m),e}function rr(t){const e={},n=i(t,["functionCallingConfig"]);n!=null&&r(e,["functionCallingConfig"],Ks(n));const o=i(t,["retrievalConfig"]);return o!=null&&r(e,["retrievalConfig"],o),e}function lr(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),r(e,["functionDeclarations"],f)}if(i(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(t,["googleSearchRetrieval"]);o!=null&&r(e,["googleSearchRetrieval"],o);const s=i(t,["computerUse"]);s!=null&&r(e,["computerUse"],s);const l=i(t,["fileSearch"]);l!=null&&r(e,["fileSearch"],l);const a=i(t,["codeExecution"]);if(a!=null&&r(e,["codeExecution"],a),i(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=i(t,["googleMaps"]);u!=null&&r(e,["googleMaps"],Qs(u));const c=i(t,["googleSearch"]);c!=null&&r(e,["googleSearch"],Zs(c));const d=i(t,["urlContext"]);return d!=null&&r(e,["urlContext"],d),e}function ar(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>Os(m))),r(e,["functionDeclarations"],p)}const o=i(t,["retrieval"]);o!=null&&r(e,["retrieval"],o);const s=i(t,["googleSearchRetrieval"]);s!=null&&r(e,["googleSearchRetrieval"],s);const l=i(t,["computerUse"]);if(l!=null&&r(e,["computerUse"],l),i(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=i(t,["codeExecution"]);a!=null&&r(e,["codeExecution"],a);const u=i(t,["enterpriseWebSearch"]);u!=null&&r(e,["enterpriseWebSearch"],u);const c=i(t,["googleMaps"]);c!=null&&r(e,["googleMaps"],c);const d=i(t,["googleSearch"]);d!=null&&r(e,["googleSearch"],d);const f=i(t,["urlContext"]);return f!=null&&r(e,["urlContext"],f),e}function ur(t,e){const n={},o=i(t,["ttl"]);e!==void 0&&o!=null&&r(e,["ttl"],o);const s=i(t,["expireTime"]);return e!==void 0&&s!=null&&r(e,["expireTime"],s),n}function dr(t,e){const n={},o=i(t,["ttl"]);e!==void 0&&o!=null&&r(e,["ttl"],o);const s=i(t,["expireTime"]);return e!==void 0&&s!=null&&r(e,["expireTime"],s),n}function cr(t,e){const n={},o=i(e,["name"]);o!=null&&r(n,["_url","name"],Q(t,o));const s=i(e,["config"]);return s!=null&&ur(s,n),n}function fr(t,e){const n={},o=i(e,["name"]);o!=null&&r(n,["_url","name"],Q(t,o));const s=i(e,["config"]);return s!=null&&dr(s,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pr extends X{constructor(e){super(),this.apiClient=e,this.list=(...o)=>g(this,[...o],function*(n={}){return new oe(z.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),yield this.listInternal(n),n)})}create(e){return g(this,null,function*(){var n,o,s,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=Hs(this.apiClient,e);return u=C("cachedContents",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>f)}else{const d=qs(this.apiClient,e);return u=C("cachedContents",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>f)}})}get(e){return g(this,null,function*(){var n,o,s,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=Xs(this.apiClient,e);return u=C("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>f)}else{const d=zs(this.apiClient,e);return u=C("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>f)}})}delete(e){return g(this,null,function*(){var n,o,s,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=Bs(this.apiClient,e);return u=C("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=$s(f),m=new Cn;return Object.assign(m,p),m})}else{const d=bs(this.apiClient,e);return u=C("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=Js(f),m=new Cn;return Object.assign(m,p),m})}})}update(e){return g(this,null,function*(){var n,o,s,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=fr(this.apiClient,e);return u=C("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>f)}else{const d=cr(this.apiClient,e);return u=C("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>f)}})}listInternal(e){return g(this,null,function*(){var n,o,s,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=nr(e);return u=C("cachedContents",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=ir(f),m=new Sn;return Object.assign(m,p),m})}else{const d=tr(e);return u=C("cachedContents",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=or(f),m=new Sn;return Object.assign(m,p),m})}})}}function Re(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,o=Object.getOwnPropertySymbols(t);s<o.length;s++)e.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(t,o[s])&&(n[o[s]]=t[o[s]]);return n}function Pn(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function w(t){return this instanceof w?(this.v=t,this):new w(t)}function W(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=n.apply(t,e||[]),s,l=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",a),s[Symbol.asyncIterator]=function(){return this},s;function a(h){return function(v){return Promise.resolve(v).then(h,p)}}function u(h,v){o[h]&&(s[h]=function(T){return new Promise(function(y,_){l.push([h,T,y,_])>1||c(h,T)})},v&&(s[h]=v(s[h])))}function c(h,v){try{d(o[h](v))}catch(T){m(l[0][3],T)}}function d(h){h.value instanceof w?Promise.resolve(h.value.v).then(f,p):m(l[0][2],h)}function f(h){c("next",h)}function p(h){c("throw",h)}function m(h,v){h(v),l.shift(),l.length&&c(l[0][0],l[0][1])}}function K(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Pn=="function"?Pn(t):t[Symbol.iterator](),n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n);function o(l){n[l]=t[l]&&function(a){return new Promise(function(u,c){a=t[l](a),s(u,c,a.done,a.value)})}}function s(l,a,u,c){Promise.resolve(c).then(function(d){l({value:d,done:u})},a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mr(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:fo(n)}function fo(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function hr(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function xn(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let o=0;for(;o<n;)if(t[o].role==="user")e.push(t[o]),o++;else{const s=[];let l=!0;for(;o<n&&t[o].role==="model";)s.push(t[o]),l&&!fo(t[o])&&(l=!1),o++;l?e.push(...s):e.pop()}return e}class gr{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new yr(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class yr{constructor(e,n,o,s={},l=[]){this.apiClient=e,this.modelsModule=n,this.model=o,this.config=s,this.history=l,this.sendPromise=Promise.resolve(),hr(l)}sendMessage(e){return g(this,null,function*(){var n;yield this.sendPromise;const o=V(e.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=g(this,null,function*(){var l,a,u;const c=yield s,d=(a=(l=c.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content,f=c.automaticFunctionCallingHistory,p=this.getHistory(!0).length;let m=[];f!=null&&(m=(u=f.slice(p))!==null&&u!==void 0?u:[]);const h=d?[d]:[];this.recordHistory(o,h,m)}),yield this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s})}sendMessageStream(e){return g(this,null,function*(){var n;yield this.sendPromise;const o=V(e.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const l=yield s;return this.processStreamResponse(l,o)})}getHistory(e=!1){const n=e?xn(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return W(this,arguments,function*(){var s,l,a,u,c,d;const f=[];try{for(var p=!0,m=K(e),h;h=yield w(m.next()),s=h.done,!s;p=!0){u=h.value,p=!1;const v=u;if(mr(v)){const T=(d=(c=v.candidates)===null||c===void 0?void 0:c[0])===null||d===void 0?void 0:d.content;T!==void 0&&f.push(T)}yield yield w(v)}}catch(v){l={error:v}}finally{try{!p&&!s&&(a=m.return)&&(yield w(a.call(m)))}finally{if(l)throw l.error}}this.recordHistory(n,f)})}recordHistory(e,n,o){let s=[];n.length>0&&n.every(l=>l.role!==void 0)?s=n:s.push({role:"model",parts:[]}),o&&o.length>0?this.history.push(...xn(o)):this.history.push(e),this.history.push(...s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ne extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Ne.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vr(t){const e={},n=i(t,["file"]);return n!=null&&r(e,["file"],n),e}function Tr(t){const e={},n=i(t,["sdkHttpResponse"]);return n!=null&&r(e,["sdkHttpResponse"],n),e}function _r(t){const e={},n=i(t,["name"]);return n!=null&&r(e,["_url","file"],io(n)),e}function Er(t){const e={},n=i(t,["sdkHttpResponse"]);return n!=null&&r(e,["sdkHttpResponse"],n),e}function Cr(t){const e={},n=i(t,["name"]);return n!=null&&r(e,["_url","file"],io(n)),e}function Sr(t,e){const n={},o=i(t,["pageSize"]);e!==void 0&&o!=null&&r(e,["_query","pageSize"],o);const s=i(t,["pageToken"]);return e!==void 0&&s!=null&&r(e,["_query","pageToken"],s),n}function Ir(t){const e={},n=i(t,["config"]);return n!=null&&Sr(n,e),e}function Ar(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["nextPageToken"]);o!=null&&r(e,["nextPageToken"],o);const s=i(t,["files"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(a=>a)),r(e,["files"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Rr extends X{constructor(e){super(),this.apiClient=e,this.list=(...o)=>g(this,[...o],function*(n={}){return new oe(z.PAGED_ITEM_FILES,s=>this.listInternal(s),yield this.listInternal(n),n)})}upload(e){return g(this,null,function*(){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)})}download(e){return g(this,null,function*(){yield this.apiClient.downloadFile(e)})}listInternal(e){return g(this,null,function*(){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Ir(e);return l=C("files",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),s.then(c=>{const d=Ar(c),f=new Pi;return Object.assign(f,d),f})}})}createInternal(e){return g(this,null,function*(){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=vr(e);return l=C("upload/v1beta/files",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),s.then(c=>{const d=Tr(c),f=new xi;return Object.assign(f,d),f})}})}get(e){return g(this,null,function*(){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Cr(e);return l=C("files/{file}",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),s.then(c=>c)}})}delete(e){return g(this,null,function*(){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=_r(e);return l=C("files/{file}",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),s.then(c=>{const d=Er(c),f=new Di;return Object.assign(f,d),f})}})}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ce(t){const e={},n=i(t,["data"]);if(n!=null&&r(e,["data"],n),i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function wr(t){const e={},n=i(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>Jr(l))),r(e,["parts"],s)}const o=i(t,["role"]);return o!=null&&r(e,["role"],o),e}function Mr(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["fileUri"]);n!=null&&r(e,["fileUri"],n);const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function Nr(t){const e={},n=i(t,["id"]);n!=null&&r(e,["id"],n);const o=i(t,["args"]);o!=null&&r(e,["args"],o);const s=i(t,["name"]);if(s!=null&&r(e,["name"],s),i(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(i(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Pr(t){const e={};if(i(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=i(t,["description"]);n!=null&&r(e,["description"],n);const o=i(t,["name"]);o!=null&&r(e,["name"],o);const s=i(t,["parameters"]);s!=null&&r(e,["parameters"],s);const l=i(t,["parametersJsonSchema"]);l!=null&&r(e,["parametersJsonSchema"],l);const a=i(t,["response"]);a!=null&&r(e,["response"],a);const u=i(t,["responseJsonSchema"]);return u!=null&&r(e,["responseJsonSchema"],u),e}function xr(t){const e={},n=i(t,["modelSelectionConfig"]);n!=null&&r(e,["modelConfig"],n);const o=i(t,["responseJsonSchema"]);o!=null&&r(e,["responseJsonSchema"],o);const s=i(t,["audioTimestamp"]);s!=null&&r(e,["audioTimestamp"],s);const l=i(t,["candidateCount"]);l!=null&&r(e,["candidateCount"],l);const a=i(t,["enableAffectiveDialog"]);a!=null&&r(e,["enableAffectiveDialog"],a);const u=i(t,["frequencyPenalty"]);u!=null&&r(e,["frequencyPenalty"],u);const c=i(t,["logprobs"]);c!=null&&r(e,["logprobs"],c);const d=i(t,["maxOutputTokens"]);d!=null&&r(e,["maxOutputTokens"],d);const f=i(t,["mediaResolution"]);f!=null&&r(e,["mediaResolution"],f);const p=i(t,["presencePenalty"]);p!=null&&r(e,["presencePenalty"],p);const m=i(t,["responseLogprobs"]);m!=null&&r(e,["responseLogprobs"],m);const h=i(t,["responseMimeType"]);h!=null&&r(e,["responseMimeType"],h);const v=i(t,["responseModalities"]);v!=null&&r(e,["responseModalities"],v);const T=i(t,["responseSchema"]);T!=null&&r(e,["responseSchema"],T);const y=i(t,["routingConfig"]);y!=null&&r(e,["routingConfig"],y);const _=i(t,["seed"]);_!=null&&r(e,["seed"],_);const I=i(t,["speechConfig"]);I!=null&&r(e,["speechConfig"],I);const S=i(t,["stopSequences"]);S!=null&&r(e,["stopSequences"],S);const A=i(t,["temperature"]);A!=null&&r(e,["temperature"],A);const M=i(t,["thinkingConfig"]);M!=null&&r(e,["thinkingConfig"],M);const P=i(t,["topK"]);P!=null&&r(e,["topK"],P);const N=i(t,["topP"]);if(N!=null&&r(e,["topP"],N),i(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Dr(t){const e={};if(i(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=i(t,["enableWidget"]);return n!=null&&r(e,["enableWidget"],n),e}function Ur(t){const e={};if(i(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(i(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=i(t,["timeRangeFilter"]);return n!=null&&r(e,["timeRangeFilter"],n),e}function kr(t,e){const n={},o=i(t,["generationConfig"]);e!==void 0&&o!=null&&r(e,["setup","generationConfig"],o);const s=i(t,["responseModalities"]);e!==void 0&&s!=null&&r(e,["setup","generationConfig","responseModalities"],s);const l=i(t,["temperature"]);e!==void 0&&l!=null&&r(e,["setup","generationConfig","temperature"],l);const a=i(t,["topP"]);e!==void 0&&a!=null&&r(e,["setup","generationConfig","topP"],a);const u=i(t,["topK"]);e!==void 0&&u!=null&&r(e,["setup","generationConfig","topK"],u);const c=i(t,["maxOutputTokens"]);e!==void 0&&c!=null&&r(e,["setup","generationConfig","maxOutputTokens"],c);const d=i(t,["mediaResolution"]);e!==void 0&&d!=null&&r(e,["setup","generationConfig","mediaResolution"],d);const f=i(t,["seed"]);e!==void 0&&f!=null&&r(e,["setup","generationConfig","seed"],f);const p=i(t,["speechConfig"]);e!==void 0&&p!=null&&r(e,["setup","generationConfig","speechConfig"],lt(p));const m=i(t,["thinkingConfig"]);e!==void 0&&m!=null&&r(e,["setup","generationConfig","thinkingConfig"],m);const h=i(t,["enableAffectiveDialog"]);e!==void 0&&h!=null&&r(e,["setup","generationConfig","enableAffectiveDialog"],h);const v=i(t,["systemInstruction"]);e!==void 0&&v!=null&&r(e,["setup","systemInstruction"],wr(V(v)));const T=i(t,["tools"]);if(e!==void 0&&T!=null){let P=de(T);Array.isArray(P)&&(P=P.map(N=>Yr(ue(N)))),r(e,["setup","tools"],P)}const y=i(t,["sessionResumption"]);e!==void 0&&y!=null&&r(e,["setup","sessionResumption"],$r(y));const _=i(t,["inputAudioTranscription"]);e!==void 0&&_!=null&&r(e,["setup","inputAudioTranscription"],_);const I=i(t,["outputAudioTranscription"]);e!==void 0&&I!=null&&r(e,["setup","outputAudioTranscription"],I);const S=i(t,["realtimeInputConfig"]);e!==void 0&&S!=null&&r(e,["setup","realtimeInputConfig"],S);const A=i(t,["contextWindowCompression"]);e!==void 0&&A!=null&&r(e,["setup","contextWindowCompression"],A);const M=i(t,["proactivity"]);if(e!==void 0&&M!=null&&r(e,["setup","proactivity"],M),i(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function Lr(t,e){const n={},o=i(t,["generationConfig"]);e!==void 0&&o!=null&&r(e,["setup","generationConfig"],xr(o));const s=i(t,["responseModalities"]);e!==void 0&&s!=null&&r(e,["setup","generationConfig","responseModalities"],s);const l=i(t,["temperature"]);e!==void 0&&l!=null&&r(e,["setup","generationConfig","temperature"],l);const a=i(t,["topP"]);e!==void 0&&a!=null&&r(e,["setup","generationConfig","topP"],a);const u=i(t,["topK"]);e!==void 0&&u!=null&&r(e,["setup","generationConfig","topK"],u);const c=i(t,["maxOutputTokens"]);e!==void 0&&c!=null&&r(e,["setup","generationConfig","maxOutputTokens"],c);const d=i(t,["mediaResolution"]);e!==void 0&&d!=null&&r(e,["setup","generationConfig","mediaResolution"],d);const f=i(t,["seed"]);e!==void 0&&f!=null&&r(e,["setup","generationConfig","seed"],f);const p=i(t,["speechConfig"]);e!==void 0&&p!=null&&r(e,["setup","generationConfig","speechConfig"],lt(p));const m=i(t,["thinkingConfig"]);e!==void 0&&m!=null&&r(e,["setup","generationConfig","thinkingConfig"],m);const h=i(t,["enableAffectiveDialog"]);e!==void 0&&h!=null&&r(e,["setup","generationConfig","enableAffectiveDialog"],h);const v=i(t,["systemInstruction"]);e!==void 0&&v!=null&&r(e,["setup","systemInstruction"],V(v));const T=i(t,["tools"]);if(e!==void 0&&T!=null){let N=de(T);Array.isArray(N)&&(N=N.map(L=>Wr(ue(L)))),r(e,["setup","tools"],N)}const y=i(t,["sessionResumption"]);e!==void 0&&y!=null&&r(e,["setup","sessionResumption"],y);const _=i(t,["inputAudioTranscription"]);e!==void 0&&_!=null&&r(e,["setup","inputAudioTranscription"],_);const I=i(t,["outputAudioTranscription"]);e!==void 0&&I!=null&&r(e,["setup","outputAudioTranscription"],I);const S=i(t,["realtimeInputConfig"]);e!==void 0&&S!=null&&r(e,["setup","realtimeInputConfig"],S);const A=i(t,["contextWindowCompression"]);e!==void 0&&A!=null&&r(e,["setup","contextWindowCompression"],A);const M=i(t,["proactivity"]);e!==void 0&&M!=null&&r(e,["setup","proactivity"],M);const P=i(t,["explicitVadSignal"]);return e!==void 0&&P!=null&&r(e,["setup","explicitVadSignal"],P),n}function Fr(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["setup","model"],D(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],kr(s,n)),n}function Gr(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["setup","model"],D(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],Lr(s,n)),n}function Vr(t){const e={},n=i(t,["musicGenerationConfig"]);return n!=null&&r(e,["musicGenerationConfig"],n),e}function qr(t){const e={},n=i(t,["weightedPrompts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>s)),r(e,["weightedPrompts"],o)}return e}function Hr(t){const e={},n=i(t,["media"]);if(n!=null){let d=jn(n);Array.isArray(d)&&(d=d.map(f=>Ce(f))),r(e,["mediaChunks"],d)}const o=i(t,["audio"]);o!=null&&r(e,["audio"],Ce(to(o)));const s=i(t,["audioStreamEnd"]);s!=null&&r(e,["audioStreamEnd"],s);const l=i(t,["video"]);l!=null&&r(e,["video"],Ce(eo(l)));const a=i(t,["text"]);a!=null&&r(e,["text"],a);const u=i(t,["activityStart"]);u!=null&&r(e,["activityStart"],u);const c=i(t,["activityEnd"]);return c!=null&&r(e,["activityEnd"],c),e}function br(t){const e={},n=i(t,["media"]);if(n!=null){let d=jn(n);Array.isArray(d)&&(d=d.map(f=>f)),r(e,["mediaChunks"],d)}const o=i(t,["audio"]);o!=null&&r(e,["audio"],to(o));const s=i(t,["audioStreamEnd"]);s!=null&&r(e,["audioStreamEnd"],s);const l=i(t,["video"]);l!=null&&r(e,["video"],eo(l));const a=i(t,["text"]);a!=null&&r(e,["text"],a);const u=i(t,["activityStart"]);u!=null&&r(e,["activityStart"],u);const c=i(t,["activityEnd"]);return c!=null&&r(e,["activityEnd"],c),e}function Br(t){const e={},n=i(t,["setupComplete"]);n!=null&&r(e,["setupComplete"],n);const o=i(t,["serverContent"]);o!=null&&r(e,["serverContent"],o);const s=i(t,["toolCall"]);s!=null&&r(e,["toolCall"],s);const l=i(t,["toolCallCancellation"]);l!=null&&r(e,["toolCallCancellation"],l);const a=i(t,["usageMetadata"]);a!=null&&r(e,["usageMetadata"],Kr(a));const u=i(t,["goAway"]);u!=null&&r(e,["goAway"],u);const c=i(t,["sessionResumptionUpdate"]);c!=null&&r(e,["sessionResumptionUpdate"],c);const d=i(t,["voiceActivityDetectionSignal"]);return d!=null&&r(e,["voiceActivityDetectionSignal"],d),e}function Jr(t){const e={},n=i(t,["mediaResolution"]);n!=null&&r(e,["mediaResolution"],n);const o=i(t,["codeExecutionResult"]);o!=null&&r(e,["codeExecutionResult"],o);const s=i(t,["executableCode"]);s!=null&&r(e,["executableCode"],s);const l=i(t,["fileData"]);l!=null&&r(e,["fileData"],Mr(l));const a=i(t,["functionCall"]);a!=null&&r(e,["functionCall"],Nr(a));const u=i(t,["functionResponse"]);u!=null&&r(e,["functionResponse"],u);const c=i(t,["inlineData"]);c!=null&&r(e,["inlineData"],Ce(c));const d=i(t,["text"]);d!=null&&r(e,["text"],d);const f=i(t,["thought"]);f!=null&&r(e,["thought"],f);const p=i(t,["thoughtSignature"]);p!=null&&r(e,["thoughtSignature"],p);const m=i(t,["videoMetadata"]);return m!=null&&r(e,["videoMetadata"],m),e}function $r(t){const e={},n=i(t,["handle"]);if(n!=null&&r(e,["handle"],n),i(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Yr(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),r(e,["functionDeclarations"],f)}if(i(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(t,["googleSearchRetrieval"]);o!=null&&r(e,["googleSearchRetrieval"],o);const s=i(t,["computerUse"]);s!=null&&r(e,["computerUse"],s);const l=i(t,["fileSearch"]);l!=null&&r(e,["fileSearch"],l);const a=i(t,["codeExecution"]);if(a!=null&&r(e,["codeExecution"],a),i(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=i(t,["googleMaps"]);u!=null&&r(e,["googleMaps"],Dr(u));const c=i(t,["googleSearch"]);c!=null&&r(e,["googleSearch"],Ur(c));const d=i(t,["urlContext"]);return d!=null&&r(e,["urlContext"],d),e}function Wr(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>Pr(m))),r(e,["functionDeclarations"],p)}const o=i(t,["retrieval"]);o!=null&&r(e,["retrieval"],o);const s=i(t,["googleSearchRetrieval"]);s!=null&&r(e,["googleSearchRetrieval"],s);const l=i(t,["computerUse"]);if(l!=null&&r(e,["computerUse"],l),i(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=i(t,["codeExecution"]);a!=null&&r(e,["codeExecution"],a);const u=i(t,["enterpriseWebSearch"]);u!=null&&r(e,["enterpriseWebSearch"],u);const c=i(t,["googleMaps"]);c!=null&&r(e,["googleMaps"],c);const d=i(t,["googleSearch"]);d!=null&&r(e,["googleSearch"],d);const f=i(t,["urlContext"]);return f!=null&&r(e,["urlContext"],f),e}function Kr(t){const e={},n=i(t,["promptTokenCount"]);n!=null&&r(e,["promptTokenCount"],n);const o=i(t,["cachedContentTokenCount"]);o!=null&&r(e,["cachedContentTokenCount"],o);const s=i(t,["candidatesTokenCount"]);s!=null&&r(e,["responseTokenCount"],s);const l=i(t,["toolUsePromptTokenCount"]);l!=null&&r(e,["toolUsePromptTokenCount"],l);const a=i(t,["thoughtsTokenCount"]);a!=null&&r(e,["thoughtsTokenCount"],a);const u=i(t,["totalTokenCount"]);u!=null&&r(e,["totalTokenCount"],u);const c=i(t,["promptTokensDetails"]);if(c!=null){let h=c;Array.isArray(h)&&(h=h.map(v=>v)),r(e,["promptTokensDetails"],h)}const d=i(t,["cacheTokensDetails"]);if(d!=null){let h=d;Array.isArray(h)&&(h=h.map(v=>v)),r(e,["cacheTokensDetails"],h)}const f=i(t,["candidatesTokensDetails"]);if(f!=null){let h=f;Array.isArray(h)&&(h=h.map(v=>v)),r(e,["responseTokensDetails"],h)}const p=i(t,["toolUsePromptTokensDetails"]);if(p!=null){let h=p;Array.isArray(h)&&(h=h.map(v=>v)),r(e,["toolUsePromptTokensDetails"],h)}const m=i(t,["trafficType"]);return m!=null&&r(e,["trafficType"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Or(t){const e={},n=i(t,["data"]);if(n!=null&&r(e,["data"],n),i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function zr(t){const e={},n=i(t,["content"]);n!=null&&r(e,["content"],n);const o=i(t,["citationMetadata"]);o!=null&&r(e,["citationMetadata"],Xr(o));const s=i(t,["tokenCount"]);s!=null&&r(e,["tokenCount"],s);const l=i(t,["finishReason"]);l!=null&&r(e,["finishReason"],l);const a=i(t,["avgLogprobs"]);a!=null&&r(e,["avgLogprobs"],a);const u=i(t,["groundingMetadata"]);u!=null&&r(e,["groundingMetadata"],u);const c=i(t,["index"]);c!=null&&r(e,["index"],c);const d=i(t,["logprobsResult"]);d!=null&&r(e,["logprobsResult"],d);const f=i(t,["safetyRatings"]);if(f!=null){let m=f;Array.isArray(m)&&(m=m.map(h=>h)),r(e,["safetyRatings"],m)}const p=i(t,["urlContextMetadata"]);return p!=null&&r(e,["urlContextMetadata"],p),e}function Xr(t){const e={},n=i(t,["citationSources"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>s)),r(e,["citations"],o)}return e}function Qr(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],D(t,o));const s=i(e,["contents"]);if(s!=null){let l=B(s);Array.isArray(l)&&(l=l.map(a=>a)),r(n,["contents"],l)}return n}function Zr(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["tokensInfo"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>l)),r(e,["tokensInfo"],s)}return e}function jr(t){const e={},n=i(t,["values"]);n!=null&&r(e,["values"],n);const o=i(t,["statistics"]);return o!=null&&r(e,["statistics"],el(o)),e}function el(t){const e={},n=i(t,["truncated"]);n!=null&&r(e,["truncated"],n);const o=i(t,["token_count"]);return o!=null&&r(e,["tokenCount"],o),e}function Pe(t){const e={},n=i(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>ua(l))),r(e,["parts"],s)}const o=i(t,["role"]);return o!=null&&r(e,["role"],o),e}function tl(t){const e={},n=i(t,["controlType"]);n!=null&&r(e,["controlType"],n);const o=i(t,["enableControlImageComputation"]);return o!=null&&r(e,["computeControl"],o),e}function nl(t){const e={};if(i(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(i(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(i(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function ol(t,e){const n={},o=i(t,["systemInstruction"]);e!==void 0&&o!=null&&r(e,["systemInstruction"],V(o));const s=i(t,["tools"]);if(e!==void 0&&s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>go(u))),r(e,["tools"],a)}const l=i(t,["generationConfig"]);return e!==void 0&&l!=null&&r(e,["generationConfig"],Ol(l)),n}function il(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],D(t,o));const s=i(e,["contents"]);if(s!=null){let a=B(s);Array.isArray(a)&&(a=a.map(u=>Pe(u))),r(n,["contents"],a)}const l=i(e,["config"]);return l!=null&&nl(l),n}function sl(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],D(t,o));const s=i(e,["contents"]);if(s!=null){let a=B(s);Array.isArray(a)&&(a=a.map(u=>u)),r(n,["contents"],a)}const l=i(e,["config"]);return l!=null&&ol(l,n),n}function rl(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["totalTokens"]);o!=null&&r(e,["totalTokens"],o);const s=i(t,["cachedContentTokenCount"]);return s!=null&&r(e,["cachedContentTokenCount"],s),e}function ll(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["totalTokens"]);return o!=null&&r(e,["totalTokens"],o),e}function al(t,e){const n={},o=i(e,["model"]);return o!=null&&r(n,["_url","name"],D(t,o)),n}function ul(t,e){const n={},o=i(e,["model"]);return o!=null&&r(n,["_url","name"],D(t,o)),n}function dl(t){const e={},n=i(t,["sdkHttpResponse"]);return n!=null&&r(e,["sdkHttpResponse"],n),e}function cl(t){const e={},n=i(t,["sdkHttpResponse"]);return n!=null&&r(e,["sdkHttpResponse"],n),e}function fl(t,e){const n={},o=i(t,["outputGcsUri"]);e!==void 0&&o!=null&&r(e,["parameters","storageUri"],o);const s=i(t,["negativePrompt"]);e!==void 0&&s!=null&&r(e,["parameters","negativePrompt"],s);const l=i(t,["numberOfImages"]);e!==void 0&&l!=null&&r(e,["parameters","sampleCount"],l);const a=i(t,["aspectRatio"]);e!==void 0&&a!=null&&r(e,["parameters","aspectRatio"],a);const u=i(t,["guidanceScale"]);e!==void 0&&u!=null&&r(e,["parameters","guidanceScale"],u);const c=i(t,["seed"]);e!==void 0&&c!=null&&r(e,["parameters","seed"],c);const d=i(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&r(e,["parameters","safetySetting"],d);const f=i(t,["personGeneration"]);e!==void 0&&f!=null&&r(e,["parameters","personGeneration"],f);const p=i(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&r(e,["parameters","includeSafetyAttributes"],p);const m=i(t,["includeRaiReason"]);e!==void 0&&m!=null&&r(e,["parameters","includeRaiReason"],m);const h=i(t,["language"]);e!==void 0&&h!=null&&r(e,["parameters","language"],h);const v=i(t,["outputMimeType"]);e!==void 0&&v!=null&&r(e,["parameters","outputOptions","mimeType"],v);const T=i(t,["outputCompressionQuality"]);e!==void 0&&T!=null&&r(e,["parameters","outputOptions","compressionQuality"],T);const y=i(t,["addWatermark"]);e!==void 0&&y!=null&&r(e,["parameters","addWatermark"],y);const _=i(t,["labels"]);e!==void 0&&_!=null&&r(e,["labels"],_);const I=i(t,["editMode"]);e!==void 0&&I!=null&&r(e,["parameters","editMode"],I);const S=i(t,["baseSteps"]);return e!==void 0&&S!=null&&r(e,["parameters","editConfig","baseSteps"],S),n}function pl(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],D(t,o));const s=i(e,["prompt"]);s!=null&&r(n,["instances[0]","prompt"],s);const l=i(e,["referenceImages"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(c=>ha(c))),r(n,["instances[0]","referenceImages"],u)}const a=i(e,["config"]);return a!=null&&fl(a,n),n}function ml(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["predictions"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>xe(l))),r(e,["generatedImages"],s)}return e}function hl(t,e){const n={},o=i(t,["taskType"]);e!==void 0&&o!=null&&r(e,["requests[]","taskType"],o);const s=i(t,["title"]);e!==void 0&&s!=null&&r(e,["requests[]","title"],s);const l=i(t,["outputDimensionality"]);if(e!==void 0&&l!=null&&r(e,["requests[]","outputDimensionality"],l),i(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(i(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function gl(t,e){const n={},o=i(t,["taskType"]);e!==void 0&&o!=null&&r(e,["instances[]","task_type"],o);const s=i(t,["title"]);e!==void 0&&s!=null&&r(e,["instances[]","title"],s);const l=i(t,["outputDimensionality"]);e!==void 0&&l!=null&&r(e,["parameters","outputDimensionality"],l);const a=i(t,["mimeType"]);e!==void 0&&a!=null&&r(e,["instances[]","mimeType"],a);const u=i(t,["autoTruncate"]);return e!==void 0&&u!=null&&r(e,["parameters","autoTruncate"],u),n}function yl(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],D(t,o));const s=i(e,["contents"]);if(s!=null){let u=it(t,s);Array.isArray(u)&&(u=u.map(c=>c)),r(n,["requests[]","content"],u)}const l=i(e,["config"]);l!=null&&hl(l,n);const a=i(e,["model"]);return a!==void 0&&r(n,["requests[]","model"],D(t,a)),n}function vl(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],D(t,o));const s=i(e,["contents"]);if(s!=null){let a=it(t,s);Array.isArray(a)&&(a=a.map(u=>u)),r(n,["instances[]","content"],a)}const l=i(e,["config"]);return l!=null&&gl(l,n),n}function Tl(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["embeddings"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>a)),r(e,["embeddings"],l)}const s=i(t,["metadata"]);return s!=null&&r(e,["metadata"],s),e}function _l(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["predictions[]","embeddings"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>jr(a))),r(e,["embeddings"],l)}const s=i(t,["metadata"]);return s!=null&&r(e,["metadata"],s),e}function El(t){const e={},n=i(t,["endpoint"]);n!=null&&r(e,["name"],n);const o=i(t,["deployedModelId"]);return o!=null&&r(e,["deployedModelId"],o),e}function Cl(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["fileUri"]);n!=null&&r(e,["fileUri"],n);const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function Sl(t){const e={},n=i(t,["id"]);n!=null&&r(e,["id"],n);const o=i(t,["args"]);o!=null&&r(e,["args"],o);const s=i(t,["name"]);if(s!=null&&r(e,["name"],s),i(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(i(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Il(t){const e={},n=i(t,["mode"]);n!=null&&r(e,["mode"],n);const o=i(t,["allowedFunctionNames"]);if(o!=null&&r(e,["allowedFunctionNames"],o),i(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Al(t){const e={};if(i(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=i(t,["description"]);n!=null&&r(e,["description"],n);const o=i(t,["name"]);o!=null&&r(e,["name"],o);const s=i(t,["parameters"]);s!=null&&r(e,["parameters"],s);const l=i(t,["parametersJsonSchema"]);l!=null&&r(e,["parametersJsonSchema"],l);const a=i(t,["response"]);a!=null&&r(e,["response"],a);const u=i(t,["responseJsonSchema"]);return u!=null&&r(e,["responseJsonSchema"],u),e}function Rl(t,e,n){const o={},s=i(e,["systemInstruction"]);n!==void 0&&s!=null&&r(n,["systemInstruction"],Pe(V(s)));const l=i(e,["temperature"]);l!=null&&r(o,["temperature"],l);const a=i(e,["topP"]);a!=null&&r(o,["topP"],a);const u=i(e,["topK"]);u!=null&&r(o,["topK"],u);const c=i(e,["candidateCount"]);c!=null&&r(o,["candidateCount"],c);const d=i(e,["maxOutputTokens"]);d!=null&&r(o,["maxOutputTokens"],d);const f=i(e,["stopSequences"]);f!=null&&r(o,["stopSequences"],f);const p=i(e,["responseLogprobs"]);p!=null&&r(o,["responseLogprobs"],p);const m=i(e,["logprobs"]);m!=null&&r(o,["logprobs"],m);const h=i(e,["presencePenalty"]);h!=null&&r(o,["presencePenalty"],h);const v=i(e,["frequencyPenalty"]);v!=null&&r(o,["frequencyPenalty"],v);const T=i(e,["seed"]);T!=null&&r(o,["seed"],T);const y=i(e,["responseMimeType"]);y!=null&&r(o,["responseMimeType"],y);const _=i(e,["responseSchema"]);_!=null&&r(o,["responseSchema"],st(_));const I=i(e,["responseJsonSchema"]);if(I!=null&&r(o,["responseJsonSchema"],I),i(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(i(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const S=i(e,["safetySettings"]);if(n!==void 0&&S!=null){let E=S;Array.isArray(E)&&(E=E.map(k=>ga(k))),r(n,["safetySettings"],E)}const A=i(e,["tools"]);if(n!==void 0&&A!=null){let E=de(A);Array.isArray(E)&&(E=E.map(k=>Sa(ue(k)))),r(n,["tools"],E)}const M=i(e,["toolConfig"]);if(n!==void 0&&M!=null&&r(n,["toolConfig"],Ca(M)),i(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const P=i(e,["cachedContent"]);n!==void 0&&P!=null&&r(n,["cachedContent"],Q(t,P));const N=i(e,["responseModalities"]);N!=null&&r(o,["responseModalities"],N);const L=i(e,["mediaResolution"]);L!=null&&r(o,["mediaResolution"],L);const R=i(e,["speechConfig"]);if(R!=null&&r(o,["speechConfig"],rt(R)),i(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const U=i(e,["thinkingConfig"]);U!=null&&r(o,["thinkingConfig"],U);const F=i(e,["imageConfig"]);F!=null&&r(o,["imageConfig"],jl(F));const $=i(e,["enableEnhancedCivicAnswers"]);return $!=null&&r(o,["enableEnhancedCivicAnswers"],$),o}function wl(t,e,n){const o={},s=i(e,["systemInstruction"]);n!==void 0&&s!=null&&r(n,["systemInstruction"],V(s));const l=i(e,["temperature"]);l!=null&&r(o,["temperature"],l);const a=i(e,["topP"]);a!=null&&r(o,["topP"],a);const u=i(e,["topK"]);u!=null&&r(o,["topK"],u);const c=i(e,["candidateCount"]);c!=null&&r(o,["candidateCount"],c);const d=i(e,["maxOutputTokens"]);d!=null&&r(o,["maxOutputTokens"],d);const f=i(e,["stopSequences"]);f!=null&&r(o,["stopSequences"],f);const p=i(e,["responseLogprobs"]);p!=null&&r(o,["responseLogprobs"],p);const m=i(e,["logprobs"]);m!=null&&r(o,["logprobs"],m);const h=i(e,["presencePenalty"]);h!=null&&r(o,["presencePenalty"],h);const v=i(e,["frequencyPenalty"]);v!=null&&r(o,["frequencyPenalty"],v);const T=i(e,["seed"]);T!=null&&r(o,["seed"],T);const y=i(e,["responseMimeType"]);y!=null&&r(o,["responseMimeType"],y);const _=i(e,["responseSchema"]);_!=null&&r(o,["responseSchema"],st(_));const I=i(e,["responseJsonSchema"]);I!=null&&r(o,["responseJsonSchema"],I);const S=i(e,["routingConfig"]);S!=null&&r(o,["routingConfig"],S);const A=i(e,["modelSelectionConfig"]);A!=null&&r(o,["modelConfig"],A);const M=i(e,["safetySettings"]);if(n!==void 0&&M!=null){let b=M;Array.isArray(b)&&(b=b.map(Fe=>Fe)),r(n,["safetySettings"],b)}const P=i(e,["tools"]);if(n!==void 0&&P!=null){let b=de(P);Array.isArray(b)&&(b=b.map(Fe=>go(ue(Fe)))),r(n,["tools"],b)}const N=i(e,["toolConfig"]);n!==void 0&&N!=null&&r(n,["toolConfig"],N);const L=i(e,["labels"]);n!==void 0&&L!=null&&r(n,["labels"],L);const R=i(e,["cachedContent"]);n!==void 0&&R!=null&&r(n,["cachedContent"],Q(t,R));const U=i(e,["responseModalities"]);U!=null&&r(o,["responseModalities"],U);const F=i(e,["mediaResolution"]);F!=null&&r(o,["mediaResolution"],F);const $=i(e,["speechConfig"]);$!=null&&r(o,["speechConfig"],rt($));const E=i(e,["audioTimestamp"]);E!=null&&r(o,["audioTimestamp"],E);const k=i(e,["thinkingConfig"]);k!=null&&r(o,["thinkingConfig"],k);const Y=i(e,["imageConfig"]);if(Y!=null&&r(o,["imageConfig"],ea(Y)),i(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return o}function Dn(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],D(t,o));const s=i(e,["contents"]);if(s!=null){let a=B(s);Array.isArray(a)&&(a=a.map(u=>Pe(u))),r(n,["contents"],a)}const l=i(e,["config"]);return l!=null&&r(n,["generationConfig"],Rl(t,l,n)),n}function Un(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],D(t,o));const s=i(e,["contents"]);if(s!=null){let a=B(s);Array.isArray(a)&&(a=a.map(u=>u)),r(n,["contents"],a)}const l=i(e,["config"]);return l!=null&&r(n,["generationConfig"],wl(t,l,n)),n}function kn(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["candidates"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(d=>zr(d))),r(e,["candidates"],c)}const s=i(t,["modelVersion"]);s!=null&&r(e,["modelVersion"],s);const l=i(t,["promptFeedback"]);l!=null&&r(e,["promptFeedback"],l);const a=i(t,["responseId"]);a!=null&&r(e,["responseId"],a);const u=i(t,["usageMetadata"]);return u!=null&&r(e,["usageMetadata"],u),e}function Ln(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["candidates"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(f=>f)),r(e,["candidates"],d)}const s=i(t,["createTime"]);s!=null&&r(e,["createTime"],s);const l=i(t,["modelVersion"]);l!=null&&r(e,["modelVersion"],l);const a=i(t,["promptFeedback"]);a!=null&&r(e,["promptFeedback"],a);const u=i(t,["responseId"]);u!=null&&r(e,["responseId"],u);const c=i(t,["usageMetadata"]);return c!=null&&r(e,["usageMetadata"],c),e}function Ml(t,e){const n={};if(i(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(i(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const o=i(t,["numberOfImages"]);e!==void 0&&o!=null&&r(e,["parameters","sampleCount"],o);const s=i(t,["aspectRatio"]);e!==void 0&&s!=null&&r(e,["parameters","aspectRatio"],s);const l=i(t,["guidanceScale"]);if(e!==void 0&&l!=null&&r(e,["parameters","guidanceScale"],l),i(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=i(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&r(e,["parameters","safetySetting"],a);const u=i(t,["personGeneration"]);e!==void 0&&u!=null&&r(e,["parameters","personGeneration"],u);const c=i(t,["includeSafetyAttributes"]);e!==void 0&&c!=null&&r(e,["parameters","includeSafetyAttributes"],c);const d=i(t,["includeRaiReason"]);e!==void 0&&d!=null&&r(e,["parameters","includeRaiReason"],d);const f=i(t,["language"]);e!==void 0&&f!=null&&r(e,["parameters","language"],f);const p=i(t,["outputMimeType"]);e!==void 0&&p!=null&&r(e,["parameters","outputOptions","mimeType"],p);const m=i(t,["outputCompressionQuality"]);if(e!==void 0&&m!=null&&r(e,["parameters","outputOptions","compressionQuality"],m),i(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(i(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const h=i(t,["imageSize"]);if(e!==void 0&&h!=null&&r(e,["parameters","sampleImageSize"],h),i(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function Nl(t,e){const n={},o=i(t,["outputGcsUri"]);e!==void 0&&o!=null&&r(e,["parameters","storageUri"],o);const s=i(t,["negativePrompt"]);e!==void 0&&s!=null&&r(e,["parameters","negativePrompt"],s);const l=i(t,["numberOfImages"]);e!==void 0&&l!=null&&r(e,["parameters","sampleCount"],l);const a=i(t,["aspectRatio"]);e!==void 0&&a!=null&&r(e,["parameters","aspectRatio"],a);const u=i(t,["guidanceScale"]);e!==void 0&&u!=null&&r(e,["parameters","guidanceScale"],u);const c=i(t,["seed"]);e!==void 0&&c!=null&&r(e,["parameters","seed"],c);const d=i(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&r(e,["parameters","safetySetting"],d);const f=i(t,["personGeneration"]);e!==void 0&&f!=null&&r(e,["parameters","personGeneration"],f);const p=i(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&r(e,["parameters","includeSafetyAttributes"],p);const m=i(t,["includeRaiReason"]);e!==void 0&&m!=null&&r(e,["parameters","includeRaiReason"],m);const h=i(t,["language"]);e!==void 0&&h!=null&&r(e,["parameters","language"],h);const v=i(t,["outputMimeType"]);e!==void 0&&v!=null&&r(e,["parameters","outputOptions","mimeType"],v);const T=i(t,["outputCompressionQuality"]);e!==void 0&&T!=null&&r(e,["parameters","outputOptions","compressionQuality"],T);const y=i(t,["addWatermark"]);e!==void 0&&y!=null&&r(e,["parameters","addWatermark"],y);const _=i(t,["labels"]);e!==void 0&&_!=null&&r(e,["labels"],_);const I=i(t,["imageSize"]);e!==void 0&&I!=null&&r(e,["parameters","sampleImageSize"],I);const S=i(t,["enhancePrompt"]);return e!==void 0&&S!=null&&r(e,["parameters","enhancePrompt"],S),n}function Pl(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],D(t,o));const s=i(e,["prompt"]);s!=null&&r(n,["instances[0]","prompt"],s);const l=i(e,["config"]);return l!=null&&Ml(l,n),n}function xl(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],D(t,o));const s=i(e,["prompt"]);s!=null&&r(n,["instances[0]","prompt"],s);const l=i(e,["config"]);return l!=null&&Nl(l,n),n}function Dl(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["predictions"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>$l(a))),r(e,["generatedImages"],l)}const s=i(t,["positivePromptSafetyAttributes"]);return s!=null&&r(e,["positivePromptSafetyAttributes"],mo(s)),e}function Ul(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["predictions"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>xe(a))),r(e,["generatedImages"],l)}const s=i(t,["positivePromptSafetyAttributes"]);return s!=null&&r(e,["positivePromptSafetyAttributes"],ho(s)),e}function kl(t,e){const n={},o=i(t,["numberOfVideos"]);if(e!==void 0&&o!=null&&r(e,["parameters","sampleCount"],o),i(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(i(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=i(t,["durationSeconds"]);if(e!==void 0&&s!=null&&r(e,["parameters","durationSeconds"],s),i(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=i(t,["aspectRatio"]);e!==void 0&&l!=null&&r(e,["parameters","aspectRatio"],l);const a=i(t,["resolution"]);e!==void 0&&a!=null&&r(e,["parameters","resolution"],a);const u=i(t,["personGeneration"]);if(e!==void 0&&u!=null&&r(e,["parameters","personGeneration"],u),i(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const c=i(t,["negativePrompt"]);e!==void 0&&c!=null&&r(e,["parameters","negativePrompt"],c);const d=i(t,["enhancePrompt"]);if(e!==void 0&&d!=null&&r(e,["parameters","enhancePrompt"],d),i(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const f=i(t,["lastFrame"]);e!==void 0&&f!=null&&r(e,["instances[0]","lastFrame"],De(f));const p=i(t,["referenceImages"]);if(e!==void 0&&p!=null){let m=p;Array.isArray(m)&&(m=m.map(h=>Fa(h))),r(e,["instances[0]","referenceImages"],m)}if(i(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(i(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function Ll(t,e){const n={},o=i(t,["numberOfVideos"]);e!==void 0&&o!=null&&r(e,["parameters","sampleCount"],o);const s=i(t,["outputGcsUri"]);e!==void 0&&s!=null&&r(e,["parameters","storageUri"],s);const l=i(t,["fps"]);e!==void 0&&l!=null&&r(e,["parameters","fps"],l);const a=i(t,["durationSeconds"]);e!==void 0&&a!=null&&r(e,["parameters","durationSeconds"],a);const u=i(t,["seed"]);e!==void 0&&u!=null&&r(e,["parameters","seed"],u);const c=i(t,["aspectRatio"]);e!==void 0&&c!=null&&r(e,["parameters","aspectRatio"],c);const d=i(t,["resolution"]);e!==void 0&&d!=null&&r(e,["parameters","resolution"],d);const f=i(t,["personGeneration"]);e!==void 0&&f!=null&&r(e,["parameters","personGeneration"],f);const p=i(t,["pubsubTopic"]);e!==void 0&&p!=null&&r(e,["parameters","pubsubTopic"],p);const m=i(t,["negativePrompt"]);e!==void 0&&m!=null&&r(e,["parameters","negativePrompt"],m);const h=i(t,["enhancePrompt"]);e!==void 0&&h!=null&&r(e,["parameters","enhancePrompt"],h);const v=i(t,["generateAudio"]);e!==void 0&&v!=null&&r(e,["parameters","generateAudio"],v);const T=i(t,["lastFrame"]);e!==void 0&&T!=null&&r(e,["instances[0]","lastFrame"],O(T));const y=i(t,["referenceImages"]);if(e!==void 0&&y!=null){let S=y;Array.isArray(S)&&(S=S.map(A=>Ga(A))),r(e,["instances[0]","referenceImages"],S)}const _=i(t,["mask"]);e!==void 0&&_!=null&&r(e,["instances[0]","mask"],La(_));const I=i(t,["compressionQuality"]);return e!==void 0&&I!=null&&r(e,["parameters","compressionQuality"],I),n}function Fl(t){const e={},n=i(t,["name"]);n!=null&&r(e,["name"],n);const o=i(t,["metadata"]);o!=null&&r(e,["metadata"],o);const s=i(t,["done"]);s!=null&&r(e,["done"],s);const l=i(t,["error"]);l!=null&&r(e,["error"],l);const a=i(t,["response","generateVideoResponse"]);return a!=null&&r(e,["response"],Hl(a)),e}function Gl(t){const e={},n=i(t,["name"]);n!=null&&r(e,["name"],n);const o=i(t,["metadata"]);o!=null&&r(e,["metadata"],o);const s=i(t,["done"]);s!=null&&r(e,["done"],s);const l=i(t,["error"]);l!=null&&r(e,["error"],l);const a=i(t,["response"]);return a!=null&&r(e,["response"],bl(a)),e}function Vl(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],D(t,o));const s=i(e,["prompt"]);s!=null&&r(n,["instances[0]","prompt"],s);const l=i(e,["image"]);l!=null&&r(n,["instances[0]","image"],De(l));const a=i(e,["video"]);a!=null&&r(n,["instances[0]","video"],yo(a));const u=i(e,["source"]);u!=null&&Bl(u,n);const c=i(e,["config"]);return c!=null&&kl(c,n),n}function ql(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],D(t,o));const s=i(e,["prompt"]);s!=null&&r(n,["instances[0]","prompt"],s);const l=i(e,["image"]);l!=null&&r(n,["instances[0]","image"],O(l));const a=i(e,["video"]);a!=null&&r(n,["instances[0]","video"],vo(a));const u=i(e,["source"]);u!=null&&Jl(u,n);const c=i(e,["config"]);return c!=null&&Ll(c,n),n}function Hl(t){const e={},n=i(t,["generatedSamples"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(a=>Wl(a))),r(e,["generatedVideos"],l)}const o=i(t,["raiMediaFilteredCount"]);o!=null&&r(e,["raiMediaFilteredCount"],o);const s=i(t,["raiMediaFilteredReasons"]);return s!=null&&r(e,["raiMediaFilteredReasons"],s),e}function bl(t){const e={},n=i(t,["videos"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(a=>Kl(a))),r(e,["generatedVideos"],l)}const o=i(t,["raiMediaFilteredCount"]);o!=null&&r(e,["raiMediaFilteredCount"],o);const s=i(t,["raiMediaFilteredReasons"]);return s!=null&&r(e,["raiMediaFilteredReasons"],s),e}function Bl(t,e){const n={},o=i(t,["prompt"]);e!==void 0&&o!=null&&r(e,["instances[0]","prompt"],o);const s=i(t,["image"]);e!==void 0&&s!=null&&r(e,["instances[0]","image"],De(s));const l=i(t,["video"]);return e!==void 0&&l!=null&&r(e,["instances[0]","video"],yo(l)),n}function Jl(t,e){const n={},o=i(t,["prompt"]);e!==void 0&&o!=null&&r(e,["instances[0]","prompt"],o);const s=i(t,["image"]);e!==void 0&&s!=null&&r(e,["instances[0]","image"],O(s));const l=i(t,["video"]);return e!==void 0&&l!=null&&r(e,["instances[0]","video"],vo(l)),n}function $l(t){const e={},n=i(t,["_self"]);n!=null&&r(e,["image"],ta(n));const o=i(t,["raiFilteredReason"]);o!=null&&r(e,["raiFilteredReason"],o);const s=i(t,["_self"]);return s!=null&&r(e,["safetyAttributes"],mo(s)),e}function xe(t){const e={},n=i(t,["_self"]);n!=null&&r(e,["image"],po(n));const o=i(t,["raiFilteredReason"]);o!=null&&r(e,["raiFilteredReason"],o);const s=i(t,["_self"]);s!=null&&r(e,["safetyAttributes"],ho(s));const l=i(t,["prompt"]);return l!=null&&r(e,["enhancedPrompt"],l),e}function Yl(t){const e={},n=i(t,["_self"]);n!=null&&r(e,["mask"],po(n));const o=i(t,["labels"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>l)),r(e,["labels"],s)}return e}function Wl(t){const e={},n=i(t,["video"]);return n!=null&&r(e,["video"],Ua(n)),e}function Kl(t){const e={},n=i(t,["_self"]);return n!=null&&r(e,["video"],ka(n)),e}function Ol(t){const e={},n=i(t,["modelSelectionConfig"]);n!=null&&r(e,["modelConfig"],n);const o=i(t,["responseJsonSchema"]);o!=null&&r(e,["responseJsonSchema"],o);const s=i(t,["audioTimestamp"]);s!=null&&r(e,["audioTimestamp"],s);const l=i(t,["candidateCount"]);l!=null&&r(e,["candidateCount"],l);const a=i(t,["enableAffectiveDialog"]);a!=null&&r(e,["enableAffectiveDialog"],a);const u=i(t,["frequencyPenalty"]);u!=null&&r(e,["frequencyPenalty"],u);const c=i(t,["logprobs"]);c!=null&&r(e,["logprobs"],c);const d=i(t,["maxOutputTokens"]);d!=null&&r(e,["maxOutputTokens"],d);const f=i(t,["mediaResolution"]);f!=null&&r(e,["mediaResolution"],f);const p=i(t,["presencePenalty"]);p!=null&&r(e,["presencePenalty"],p);const m=i(t,["responseLogprobs"]);m!=null&&r(e,["responseLogprobs"],m);const h=i(t,["responseMimeType"]);h!=null&&r(e,["responseMimeType"],h);const v=i(t,["responseModalities"]);v!=null&&r(e,["responseModalities"],v);const T=i(t,["responseSchema"]);T!=null&&r(e,["responseSchema"],T);const y=i(t,["routingConfig"]);y!=null&&r(e,["routingConfig"],y);const _=i(t,["seed"]);_!=null&&r(e,["seed"],_);const I=i(t,["speechConfig"]);I!=null&&r(e,["speechConfig"],I);const S=i(t,["stopSequences"]);S!=null&&r(e,["stopSequences"],S);const A=i(t,["temperature"]);A!=null&&r(e,["temperature"],A);const M=i(t,["thinkingConfig"]);M!=null&&r(e,["thinkingConfig"],M);const P=i(t,["topK"]);P!=null&&r(e,["topK"],P);const N=i(t,["topP"]);if(N!=null&&r(e,["topP"],N),i(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function zl(t,e){const n={},o=i(e,["model"]);return o!=null&&r(n,["_url","name"],D(t,o)),n}function Xl(t,e){const n={},o=i(e,["model"]);return o!=null&&r(n,["_url","name"],D(t,o)),n}function Ql(t){const e={};if(i(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=i(t,["enableWidget"]);return n!=null&&r(e,["enableWidget"],n),e}function Zl(t){const e={};if(i(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(i(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=i(t,["timeRangeFilter"]);return n!=null&&r(e,["timeRangeFilter"],n),e}function jl(t){const e={},n=i(t,["aspectRatio"]);n!=null&&r(e,["aspectRatio"],n);const o=i(t,["imageSize"]);if(o!=null&&r(e,["imageSize"],o),i(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(i(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function ea(t){const e={},n=i(t,["aspectRatio"]);n!=null&&r(e,["aspectRatio"],n);const o=i(t,["imageSize"]);o!=null&&r(e,["imageSize"],o);const s=i(t,["outputMimeType"]);s!=null&&r(e,["imageOutputOptions","mimeType"],s);const l=i(t,["outputCompressionQuality"]);return l!=null&&r(e,["imageOutputOptions","compressionQuality"],l),e}function ta(t){const e={},n=i(t,["bytesBase64Encoded"]);n!=null&&r(e,["imageBytes"],j(n));const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function po(t){const e={},n=i(t,["gcsUri"]);n!=null&&r(e,["gcsUri"],n);const o=i(t,["bytesBase64Encoded"]);o!=null&&r(e,["imageBytes"],j(o));const s=i(t,["mimeType"]);return s!=null&&r(e,["mimeType"],s),e}function De(t){const e={};if(i(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=i(t,["imageBytes"]);n!=null&&r(e,["bytesBase64Encoded"],j(n));const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function O(t){const e={},n=i(t,["gcsUri"]);n!=null&&r(e,["gcsUri"],n);const o=i(t,["imageBytes"]);o!=null&&r(e,["bytesBase64Encoded"],j(o));const s=i(t,["mimeType"]);return s!=null&&r(e,["mimeType"],s),e}function na(t,e,n){const o={},s=i(e,["pageSize"]);n!==void 0&&s!=null&&r(n,["_query","pageSize"],s);const l=i(e,["pageToken"]);n!==void 0&&l!=null&&r(n,["_query","pageToken"],l);const a=i(e,["filter"]);n!==void 0&&a!=null&&r(n,["_query","filter"],a);const u=i(e,["queryBase"]);return n!==void 0&&u!=null&&r(n,["_url","models_url"],so(t,u)),o}function oa(t,e,n){const o={},s=i(e,["pageSize"]);n!==void 0&&s!=null&&r(n,["_query","pageSize"],s);const l=i(e,["pageToken"]);n!==void 0&&l!=null&&r(n,["_query","pageToken"],l);const a=i(e,["filter"]);n!==void 0&&a!=null&&r(n,["_query","filter"],a);const u=i(e,["queryBase"]);return n!==void 0&&u!=null&&r(n,["_url","models_url"],so(t,u)),o}function ia(t,e){const n={},o=i(e,["config"]);return o!=null&&na(t,o,n),n}function sa(t,e){const n={},o=i(e,["config"]);return o!=null&&oa(t,o,n),n}function ra(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["nextPageToken"]);o!=null&&r(e,["nextPageToken"],o);const s=i(t,["_self"]);if(s!=null){let l=ro(s);Array.isArray(l)&&(l=l.map(a=>We(a))),r(e,["models"],l)}return e}function la(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["nextPageToken"]);o!=null&&r(e,["nextPageToken"],o);const s=i(t,["_self"]);if(s!=null){let l=ro(s);Array.isArray(l)&&(l=l.map(a=>Ke(a))),r(e,["models"],l)}return e}function aa(t){const e={},n=i(t,["maskMode"]);n!=null&&r(e,["maskMode"],n);const o=i(t,["segmentationClasses"]);o!=null&&r(e,["maskClasses"],o);const s=i(t,["maskDilation"]);return s!=null&&r(e,["dilation"],s),e}function We(t){const e={},n=i(t,["name"]);n!=null&&r(e,["name"],n);const o=i(t,["displayName"]);o!=null&&r(e,["displayName"],o);const s=i(t,["description"]);s!=null&&r(e,["description"],s);const l=i(t,["version"]);l!=null&&r(e,["version"],l);const a=i(t,["_self"]);a!=null&&r(e,["tunedModelInfo"],Ia(a));const u=i(t,["inputTokenLimit"]);u!=null&&r(e,["inputTokenLimit"],u);const c=i(t,["outputTokenLimit"]);c!=null&&r(e,["outputTokenLimit"],c);const d=i(t,["supportedGenerationMethods"]);d!=null&&r(e,["supportedActions"],d);const f=i(t,["temperature"]);f!=null&&r(e,["temperature"],f);const p=i(t,["maxTemperature"]);p!=null&&r(e,["maxTemperature"],p);const m=i(t,["topP"]);m!=null&&r(e,["topP"],m);const h=i(t,["topK"]);h!=null&&r(e,["topK"],h);const v=i(t,["thinking"]);return v!=null&&r(e,["thinking"],v),e}function Ke(t){const e={},n=i(t,["name"]);n!=null&&r(e,["name"],n);const o=i(t,["displayName"]);o!=null&&r(e,["displayName"],o);const s=i(t,["description"]);s!=null&&r(e,["description"],s);const l=i(t,["versionId"]);l!=null&&r(e,["version"],l);const a=i(t,["deployedModels"]);if(a!=null){let p=a;Array.isArray(p)&&(p=p.map(m=>El(m))),r(e,["endpoints"],p)}const u=i(t,["labels"]);u!=null&&r(e,["labels"],u);const c=i(t,["_self"]);c!=null&&r(e,["tunedModelInfo"],Aa(c));const d=i(t,["defaultCheckpointId"]);d!=null&&r(e,["defaultCheckpointId"],d);const f=i(t,["checkpoints"]);if(f!=null){let p=f;Array.isArray(p)&&(p=p.map(m=>m)),r(e,["checkpoints"],p)}return e}function ua(t){const e={},n=i(t,["mediaResolution"]);n!=null&&r(e,["mediaResolution"],n);const o=i(t,["codeExecutionResult"]);o!=null&&r(e,["codeExecutionResult"],o);const s=i(t,["executableCode"]);s!=null&&r(e,["executableCode"],s);const l=i(t,["fileData"]);l!=null&&r(e,["fileData"],Cl(l));const a=i(t,["functionCall"]);a!=null&&r(e,["functionCall"],Sl(a));const u=i(t,["functionResponse"]);u!=null&&r(e,["functionResponse"],u);const c=i(t,["inlineData"]);c!=null&&r(e,["inlineData"],Or(c));const d=i(t,["text"]);d!=null&&r(e,["text"],d);const f=i(t,["thought"]);f!=null&&r(e,["thought"],f);const p=i(t,["thoughtSignature"]);p!=null&&r(e,["thoughtSignature"],p);const m=i(t,["videoMetadata"]);return m!=null&&r(e,["videoMetadata"],m),e}function da(t){const e={},n=i(t,["productImage"]);return n!=null&&r(e,["image"],O(n)),e}function ca(t,e){const n={},o=i(t,["numberOfImages"]);e!==void 0&&o!=null&&r(e,["parameters","sampleCount"],o);const s=i(t,["baseSteps"]);e!==void 0&&s!=null&&r(e,["parameters","baseSteps"],s);const l=i(t,["outputGcsUri"]);e!==void 0&&l!=null&&r(e,["parameters","storageUri"],l);const a=i(t,["seed"]);e!==void 0&&a!=null&&r(e,["parameters","seed"],a);const u=i(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&r(e,["parameters","safetySetting"],u);const c=i(t,["personGeneration"]);e!==void 0&&c!=null&&r(e,["parameters","personGeneration"],c);const d=i(t,["addWatermark"]);e!==void 0&&d!=null&&r(e,["parameters","addWatermark"],d);const f=i(t,["outputMimeType"]);e!==void 0&&f!=null&&r(e,["parameters","outputOptions","mimeType"],f);const p=i(t,["outputCompressionQuality"]);e!==void 0&&p!=null&&r(e,["parameters","outputOptions","compressionQuality"],p);const m=i(t,["enhancePrompt"]);e!==void 0&&m!=null&&r(e,["parameters","enhancePrompt"],m);const h=i(t,["labels"]);return e!==void 0&&h!=null&&r(e,["labels"],h),n}function fa(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],D(t,o));const s=i(e,["source"]);s!=null&&ma(s,n);const l=i(e,["config"]);return l!=null&&ca(l,n),n}function pa(t){const e={},n=i(t,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>xe(s))),r(e,["generatedImages"],o)}return e}function ma(t,e){const n={},o=i(t,["prompt"]);e!==void 0&&o!=null&&r(e,["instances[0]","prompt"],o);const s=i(t,["personImage"]);e!==void 0&&s!=null&&r(e,["instances[0]","personImage","image"],O(s));const l=i(t,["productImages"]);if(e!==void 0&&l!=null){let a=l;Array.isArray(a)&&(a=a.map(u=>da(u))),r(e,["instances[0]","productImages"],a)}return n}function ha(t){const e={},n=i(t,["referenceImage"]);n!=null&&r(e,["referenceImage"],O(n));const o=i(t,["referenceId"]);o!=null&&r(e,["referenceId"],o);const s=i(t,["referenceType"]);s!=null&&r(e,["referenceType"],s);const l=i(t,["maskImageConfig"]);l!=null&&r(e,["maskImageConfig"],aa(l));const a=i(t,["controlImageConfig"]);a!=null&&r(e,["controlImageConfig"],tl(a));const u=i(t,["styleImageConfig"]);u!=null&&r(e,["styleImageConfig"],u);const c=i(t,["subjectImageConfig"]);return c!=null&&r(e,["subjectImageConfig"],c),e}function mo(t){const e={},n=i(t,["safetyAttributes","categories"]);n!=null&&r(e,["categories"],n);const o=i(t,["safetyAttributes","scores"]);o!=null&&r(e,["scores"],o);const s=i(t,["contentType"]);return s!=null&&r(e,["contentType"],s),e}function ho(t){const e={},n=i(t,["safetyAttributes","categories"]);n!=null&&r(e,["categories"],n);const o=i(t,["safetyAttributes","scores"]);o!=null&&r(e,["scores"],o);const s=i(t,["contentType"]);return s!=null&&r(e,["contentType"],s),e}function ga(t){const e={},n=i(t,["category"]);if(n!=null&&r(e,["category"],n),i(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=i(t,["threshold"]);return o!=null&&r(e,["threshold"],o),e}function ya(t){const e={},n=i(t,["image"]);return n!=null&&r(e,["image"],O(n)),e}function va(t,e){const n={},o=i(t,["mode"]);e!==void 0&&o!=null&&r(e,["parameters","mode"],o);const s=i(t,["maxPredictions"]);e!==void 0&&s!=null&&r(e,["parameters","maxPredictions"],s);const l=i(t,["confidenceThreshold"]);e!==void 0&&l!=null&&r(e,["parameters","confidenceThreshold"],l);const a=i(t,["maskDilation"]);e!==void 0&&a!=null&&r(e,["parameters","maskDilation"],a);const u=i(t,["binaryColorThreshold"]);e!==void 0&&u!=null&&r(e,["parameters","binaryColorThreshold"],u);const c=i(t,["labels"]);return e!==void 0&&c!=null&&r(e,["labels"],c),n}function Ta(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],D(t,o));const s=i(e,["source"]);s!=null&&Ea(s,n);const l=i(e,["config"]);return l!=null&&va(l,n),n}function _a(t){const e={},n=i(t,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>Yl(s))),r(e,["generatedMasks"],o)}return e}function Ea(t,e){const n={},o=i(t,["prompt"]);e!==void 0&&o!=null&&r(e,["instances[0]","prompt"],o);const s=i(t,["image"]);e!==void 0&&s!=null&&r(e,["instances[0]","image"],O(s));const l=i(t,["scribbleImage"]);return e!==void 0&&l!=null&&r(e,["instances[0]","scribble"],ya(l)),n}function Ca(t){const e={},n=i(t,["functionCallingConfig"]);n!=null&&r(e,["functionCallingConfig"],Il(n));const o=i(t,["retrievalConfig"]);return o!=null&&r(e,["retrievalConfig"],o),e}function Sa(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),r(e,["functionDeclarations"],f)}if(i(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(t,["googleSearchRetrieval"]);o!=null&&r(e,["googleSearchRetrieval"],o);const s=i(t,["computerUse"]);s!=null&&r(e,["computerUse"],s);const l=i(t,["fileSearch"]);l!=null&&r(e,["fileSearch"],l);const a=i(t,["codeExecution"]);if(a!=null&&r(e,["codeExecution"],a),i(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=i(t,["googleMaps"]);u!=null&&r(e,["googleMaps"],Ql(u));const c=i(t,["googleSearch"]);c!=null&&r(e,["googleSearch"],Zl(c));const d=i(t,["urlContext"]);return d!=null&&r(e,["urlContext"],d),e}function go(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>Al(m))),r(e,["functionDeclarations"],p)}const o=i(t,["retrieval"]);o!=null&&r(e,["retrieval"],o);const s=i(t,["googleSearchRetrieval"]);s!=null&&r(e,["googleSearchRetrieval"],s);const l=i(t,["computerUse"]);if(l!=null&&r(e,["computerUse"],l),i(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=i(t,["codeExecution"]);a!=null&&r(e,["codeExecution"],a);const u=i(t,["enterpriseWebSearch"]);u!=null&&r(e,["enterpriseWebSearch"],u);const c=i(t,["googleMaps"]);c!=null&&r(e,["googleMaps"],c);const d=i(t,["googleSearch"]);d!=null&&r(e,["googleSearch"],d);const f=i(t,["urlContext"]);return f!=null&&r(e,["urlContext"],f),e}function Ia(t){const e={},n=i(t,["baseModel"]);n!=null&&r(e,["baseModel"],n);const o=i(t,["createTime"]);o!=null&&r(e,["createTime"],o);const s=i(t,["updateTime"]);return s!=null&&r(e,["updateTime"],s),e}function Aa(t){const e={},n=i(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&r(e,["baseModel"],n);const o=i(t,["createTime"]);o!=null&&r(e,["createTime"],o);const s=i(t,["updateTime"]);return s!=null&&r(e,["updateTime"],s),e}function Ra(t,e){const n={},o=i(t,["displayName"]);e!==void 0&&o!=null&&r(e,["displayName"],o);const s=i(t,["description"]);e!==void 0&&s!=null&&r(e,["description"],s);const l=i(t,["defaultCheckpointId"]);return e!==void 0&&l!=null&&r(e,["defaultCheckpointId"],l),n}function wa(t,e){const n={},o=i(t,["displayName"]);e!==void 0&&o!=null&&r(e,["displayName"],o);const s=i(t,["description"]);e!==void 0&&s!=null&&r(e,["description"],s);const l=i(t,["defaultCheckpointId"]);return e!==void 0&&l!=null&&r(e,["defaultCheckpointId"],l),n}function Ma(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","name"],D(t,o));const s=i(e,["config"]);return s!=null&&Ra(s,n),n}function Na(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],D(t,o));const s=i(e,["config"]);return s!=null&&wa(s,n),n}function Pa(t,e){const n={},o=i(t,["outputGcsUri"]);e!==void 0&&o!=null&&r(e,["parameters","storageUri"],o);const s=i(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&r(e,["parameters","safetySetting"],s);const l=i(t,["personGeneration"]);e!==void 0&&l!=null&&r(e,["parameters","personGeneration"],l);const a=i(t,["includeRaiReason"]);e!==void 0&&a!=null&&r(e,["parameters","includeRaiReason"],a);const u=i(t,["outputMimeType"]);e!==void 0&&u!=null&&r(e,["parameters","outputOptions","mimeType"],u);const c=i(t,["outputCompressionQuality"]);e!==void 0&&c!=null&&r(e,["parameters","outputOptions","compressionQuality"],c);const d=i(t,["enhanceInputImage"]);e!==void 0&&d!=null&&r(e,["parameters","upscaleConfig","enhanceInputImage"],d);const f=i(t,["imagePreservationFactor"]);e!==void 0&&f!=null&&r(e,["parameters","upscaleConfig","imagePreservationFactor"],f);const p=i(t,["labels"]);e!==void 0&&p!=null&&r(e,["labels"],p);const m=i(t,["numberOfImages"]);e!==void 0&&m!=null&&r(e,["parameters","sampleCount"],m);const h=i(t,["mode"]);return e!==void 0&&h!=null&&r(e,["parameters","mode"],h),n}function xa(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],D(t,o));const s=i(e,["image"]);s!=null&&r(n,["instances[0]","image"],O(s));const l=i(e,["upscaleFactor"]);l!=null&&r(n,["parameters","upscaleConfig","upscaleFactor"],l);const a=i(e,["config"]);return a!=null&&Pa(a,n),n}function Da(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["predictions"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>xe(l))),r(e,["generatedImages"],s)}return e}function Ua(t){const e={},n=i(t,["uri"]);n!=null&&r(e,["uri"],n);const o=i(t,["encodedVideo"]);o!=null&&r(e,["videoBytes"],j(o));const s=i(t,["encoding"]);return s!=null&&r(e,["mimeType"],s),e}function ka(t){const e={},n=i(t,["gcsUri"]);n!=null&&r(e,["uri"],n);const o=i(t,["bytesBase64Encoded"]);o!=null&&r(e,["videoBytes"],j(o));const s=i(t,["mimeType"]);return s!=null&&r(e,["mimeType"],s),e}function La(t){const e={},n=i(t,["image"]);n!=null&&r(e,["_self"],O(n));const o=i(t,["maskMode"]);return o!=null&&r(e,["maskMode"],o),e}function Fa(t){const e={},n=i(t,["image"]);n!=null&&r(e,["image"],De(n));const o=i(t,["referenceType"]);return o!=null&&r(e,["referenceType"],o),e}function Ga(t){const e={},n=i(t,["image"]);n!=null&&r(e,["image"],O(n));const o=i(t,["referenceType"]);return o!=null&&r(e,["referenceType"],o),e}function yo(t){const e={},n=i(t,["uri"]);n!=null&&r(e,["uri"],n);const o=i(t,["videoBytes"]);o!=null&&r(e,["encodedVideo"],j(o));const s=i(t,["mimeType"]);return s!=null&&r(e,["encoding"],s),e}function vo(t){const e={},n=i(t,["uri"]);n!=null&&r(e,["gcsUri"],n);const o=i(t,["videoBytes"]);o!=null&&r(e,["bytesBase64Encoded"],j(o));const s=i(t,["mimeType"]);return s!=null&&r(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Va(t,e){const n={},o=i(t,["displayName"]);return e!==void 0&&o!=null&&r(e,["displayName"],o),n}function qa(t){const e={},n=i(t,["config"]);return n!=null&&Va(n,e),e}function Ha(t,e){const n={},o=i(t,["force"]);return e!==void 0&&o!=null&&r(e,["_query","force"],o),n}function ba(t){const e={},n=i(t,["name"]);n!=null&&r(e,["_url","name"],n);const o=i(t,["config"]);return o!=null&&Ha(o,e),e}function Ba(t){const e={},n=i(t,["name"]);return n!=null&&r(e,["_url","name"],n),e}function Ja(t,e){const n={},o=i(t,["customMetadata"]);if(e!==void 0&&o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>a)),r(e,["customMetadata"],l)}const s=i(t,["chunkingConfig"]);return e!==void 0&&s!=null&&r(e,["chunkingConfig"],s),n}function $a(t){const e={},n=i(t,["name"]);n!=null&&r(e,["name"],n);const o=i(t,["metadata"]);o!=null&&r(e,["metadata"],o);const s=i(t,["done"]);s!=null&&r(e,["done"],s);const l=i(t,["error"]);l!=null&&r(e,["error"],l);const a=i(t,["response"]);return a!=null&&r(e,["response"],Wa(a)),e}function Ya(t){const e={},n=i(t,["fileSearchStoreName"]);n!=null&&r(e,["_url","file_search_store_name"],n);const o=i(t,["fileName"]);o!=null&&r(e,["fileName"],o);const s=i(t,["config"]);return s!=null&&Ja(s,e),e}function Wa(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["parent"]);o!=null&&r(e,["parent"],o);const s=i(t,["documentName"]);return s!=null&&r(e,["documentName"],s),e}function Ka(t,e){const n={},o=i(t,["pageSize"]);e!==void 0&&o!=null&&r(e,["_query","pageSize"],o);const s=i(t,["pageToken"]);return e!==void 0&&s!=null&&r(e,["_query","pageToken"],s),n}function Oa(t){const e={},n=i(t,["config"]);return n!=null&&Ka(n,e),e}function za(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["nextPageToken"]);o!=null&&r(e,["nextPageToken"],o);const s=i(t,["fileSearchStores"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(a=>a)),r(e,["fileSearchStores"],l)}return e}function To(t,e){const n={},o=i(t,["mimeType"]);e!==void 0&&o!=null&&r(e,["mimeType"],o);const s=i(t,["displayName"]);e!==void 0&&s!=null&&r(e,["displayName"],s);const l=i(t,["customMetadata"]);if(e!==void 0&&l!=null){let u=l;Array.isArray(u)&&(u=u.map(c=>c)),r(e,["customMetadata"],u)}const a=i(t,["chunkingConfig"]);return e!==void 0&&a!=null&&r(e,["chunkingConfig"],a),n}function Xa(t){const e={},n=i(t,["fileSearchStoreName"]);n!=null&&r(e,["_url","file_search_store_name"],n);const o=i(t,["config"]);return o!=null&&To(o,e),e}function Qa(t){const e={},n=i(t,["sdkHttpResponse"]);return n!=null&&r(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Za="Content-Type",ja="X-Server-Timeout",eu="User-Agent",Oe="x-goog-api-client",tu="1.34.0",nu=`google-genai-sdk/${tu}`,ou="v1beta1",iu="v1beta";class su{constructor(e){var n,o;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const s={};this.clientOptions.vertexai?(s.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:ou,s.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(s.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:iu,s.baseUrl="https://generativelanguage.googleapis.com/"),s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getAuthHeaders(){return g(this,null,function*(){const e=new Headers;return yield this.clientOptions.auth.addAuthHeaders(e),e})}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const o=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&o.push(e.apiVersion),o.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,o){const s=[this.getRequestUrlInternal(n)];return o&&s.push(this.getBaseResourcePath()),e!==""&&s.push(e),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}request(e){return g(this,null,function*(){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,o);if(e.queryParams)for(const[a,u]of Object.entries(e.queryParams))s.searchParams.append(a,String(u));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=yield this.includeExtraHttpOptionsToRequestInit(l,n,s.toString(),e.abortSignal),this.unaryApiCall(s,l,e.httpMethod)})}patchHttpOptions(e,n){const o=JSON.parse(JSON.stringify(e));for(const[s,l]of Object.entries(n))typeof l=="object"?o[s]=Object.assign(Object.assign({},o[s]),l):l!==void 0&&(o[s]=l);return o}requestStream(e){return g(this,null,function*(){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,o);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let l={};return l.body=e.body,l=yield this.includeExtraHttpOptionsToRequestInit(l,n,s.toString(),e.abortSignal),this.streamApiCall(s,l,e.httpMethod)})}includeExtraHttpOptionsToRequestInit(e,n,o,s){return g(this,null,function*(){if(n&&n.timeout||s){const l=new AbortController,a=l.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const u=setTimeout(()=>l.abort(),n.timeout);u&&typeof u.unref=="function"&&u.unref()}s&&s.addEventListener("abort",()=>{l.abort()}),e.signal=a}return n&&n.extraBody!==null&&ru(e,n.extraBody),e.headers=yield this.getHeadersInternal(n,o),e})}unaryApiCall(e,n,o){return g(this,null,function*(){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:o})).then(s=>g(this,null,function*(){return yield Fn(s),new Je(s)})).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})})}streamApiCall(e,n,o){return g(this,null,function*(){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:o})).then(s=>g(this,null,function*(){return yield Fn(s),this.processStreamResponse(s)})).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})})}processStreamResponse(e){return W(this,arguments,function*(){var o;const s=(o=e==null?void 0:e.body)===null||o===void 0?void 0:o.getReader(),l=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let a="";const u="data:",c=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:d,value:f}=yield w(s.read());if(d){if(a.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const p=l.decode(f,{stream:!0});try{const v=JSON.parse(p);if("error"in v){const T=JSON.parse(JSON.stringify(v.error)),y=T.status,_=T.code,I=`got status: ${y}. ${JSON.stringify(v)}`;if(_>=400&&_<600)throw new Ne({message:I,status:_})}}catch(v){if(v.name==="ApiError")throw v}a+=p;let m=-1,h=0;for(;;){m=-1,h=0;for(const y of c){const _=a.indexOf(y);_!==-1&&(m===-1||_<m)&&(m=_,h=y.length)}if(m===-1)break;const v=a.substring(0,m);a=a.substring(m+h);const T=v.trim();if(T.startsWith(u)){const y=T.substring(u.length).trim();try{const _=new Response(y,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield w(new Je(_))}catch(_){throw new Error(`exception parsing stream chunk ${y}. ${_}`)}}}}}finally{s.releaseLock()}})}apiCall(e,n){return g(this,null,function*(){return fetch(e,n).catch(o=>{throw new Error(`exception ${o} sending request`)})})}getDefaultHeaders(){const e={},n=nu+" "+this.clientOptions.userAgentExtra;return e[eu]=n,e[Oe]=n,e[Za]="application/json",e}getHeadersInternal(e,n){return g(this,null,function*(){const o=new Headers;if(e&&e.headers){for(const[s,l]of Object.entries(e.headers))o.append(s,l);e.timeout&&e.timeout>0&&o.append(ja,String(Math.ceil(e.timeout/1e3)))}return yield this.clientOptions.auth.addAuthHeaders(o,n),o})}getFileName(e){var n;let o="";return typeof e=="string"&&(o=e.replace(/[/\\]+$/,""),o=(n=o.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),o}uploadFile(e,n){return g(this,null,function*(){var o;const s={};n!=null&&(s.mimeType=n.mimeType,s.name=n.name,s.displayName=n.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const l=this.clientOptions.uploader,a=yield l.stat(e);s.sizeBytes=String(a.size);const u=(o=n==null?void 0:n.mimeType)!==null&&o!==void 0?o:a.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=u;const c={file:s},d=this.getFileName(e),f=C("upload/v1beta/files",c._url),p=yield this.fetchUploadUrl(f,s.sizeBytes,s.mimeType,d,c,n==null?void 0:n.httpOptions);return l.upload(e,p,this)})}uploadFileToFileSearchStore(e,n,o){return g(this,null,function*(){var s;const l=this.clientOptions.uploader,a=yield l.stat(n),u=String(a.size),c=(s=o==null?void 0:o.mimeType)!==null&&s!==void 0?s:a.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const d=`upload/v1beta/${e}:uploadToFileSearchStore`,f=this.getFileName(n),p={};o!=null&&To(o,p);const m=yield this.fetchUploadUrl(d,u,c,f,p,o==null?void 0:o.httpOptions);return l.uploadToFileSearchStore(n,m,this)})}downloadFile(e){return g(this,null,function*(){yield this.clientOptions.downloader.download(e,this)})}fetchUploadUrl(e,n,o,s,l,a){return g(this,null,function*(){var u;let c={};a?c=a:c={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${o}`},s?{"X-Goog-Upload-File-Name":s}:{})};const d=yield this.request({path:e,body:JSON.stringify(l),httpMethod:"POST",httpOptions:c});if(!d||!(d!=null&&d.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const f=(u=d==null?void 0:d.headers)===null||u===void 0?void 0:u["x-goog-upload-url"];if(f===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return f})}}function Fn(t){return g(this,null,function*(){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let o;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?o=yield t.json():o={error:{message:yield t.text(),code:t.status,status:t.statusText}};const s=JSON.stringify(o);throw n>=400&&n<600?new Ne({message:s,status:n}):new Error(s)}})}function ru(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const l=JSON.parse(t.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))n=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch(l){console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function o(l,a){const u=Object.assign({},l);for(const c in a)if(Object.prototype.hasOwnProperty.call(a,c)){const d=a[c],f=u[c];d&&typeof d=="object"&&!Array.isArray(d)&&f&&typeof f=="object"&&!Array.isArray(f)?u[c]=o(f,d):(f&&d&&typeof f!=typeof d&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${c}". Original type: ${typeof f}, New type: ${typeof d}. Overwriting.`),u[c]=d)}return u}const s=o(n,e);t.body=JSON.stringify(s)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const lu="mcp_used/unknown";let au=!1;function _o(t){for(const e of t)if(uu(e)||typeof e=="object"&&"inputSchema"in e)return!0;return au}function Eo(t){var e;const n=(e=t[Oe])!==null&&e!==void 0?e:"";t[Oe]=(n+` ${lu}`).trimStart()}function uu(t){return t!==null&&typeof t=="object"&&t instanceof at}function du(t){return W(this,arguments,function*(n,o=100){let s,l=0;for(;l<o;){const a=yield w(n.listTools({cursor:s}));for(const u of a.tools)yield yield w(u),l++;if(!a.nextCursor)break;s=a.nextCursor}})}class at{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new at(e,n)}initialize(){return g(this,null,function*(){var e,n,o,s;if(this.mcpTools.length>0)return;const l={},a=[];for(const f of this.mcpClients)try{for(var u=!0,c=(n=void 0,K(du(f))),d;d=yield c.next(),e=d.done,!e;u=!0){s=d.value,u=!1;const p=s;a.push(p);const m=p.name;if(l[m])throw new Error(`Duplicate function name ${m} found in MCP tools. Please ensure function names are unique.`);l[m]=f}}catch(p){n={error:p}}finally{try{!u&&!e&&(o=c.return)&&(yield o.call(c))}finally{if(n)throw n.error}}this.mcpTools=a,this.functionNameToMcpClient=l})}tool(){return g(this,null,function*(){return yield this.initialize(),Bi(this.mcpTools,this.config)})}callTool(e){return g(this,null,function*(){yield this.initialize();const n=[];for(const o of e)if(o.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[o.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const a=yield s.callTool({name:o.name,arguments:o.args},void 0,l);n.push({functionResponse:{name:o.name,response:a.isError?{error:a}:a}})}return n})}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cu(t,e,n){return g(this,null,function*(){const o=new ki;let s;n.data instanceof Blob?s=JSON.parse(yield n.data.text()):s=JSON.parse(n.data),Object.assign(o,s),e(o)})}class fu{constructor(e,n,o){this.apiClient=e,this.auth=n,this.webSocketFactory=o}connect(e){return g(this,null,function*(){var n,o;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),a=hu(this.apiClient.getDefaultHeaders()),u=this.apiClient.getApiKey(),c=`${s}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${u}`;let d=()=>{};const f=new Promise(S=>{d=S}),p=e.callbacks,m=function(){d({})},h=this.apiClient,v={onopen:m,onmessage:S=>{cu(h,p.onmessage,S)},onerror:(n=p==null?void 0:p.onerror)!==null&&n!==void 0?n:function(S){},onclose:(o=p==null?void 0:p.onclose)!==null&&o!==void 0?o:function(S){}},T=this.webSocketFactory.create(c,mu(a),v);T.connect(),yield f;const I={setup:{model:D(this.apiClient,e.model)}};return T.send(JSON.stringify(I)),new pu(T,this.apiClient)})}}class pu{constructor(e,n){this.conn=e,this.apiClient=n}setWeightedPrompts(e){return g(this,null,function*(){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=qr(e);this.conn.send(JSON.stringify({clientContent:n}))})}setMusicGenerationConfig(e){return g(this,null,function*(){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=Vr(e);this.conn.send(JSON.stringify(n))})}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(se.PLAY)}pause(){this.sendPlaybackControl(se.PAUSE)}stop(){this.sendPlaybackControl(se.STOP)}resetContext(){this.sendPlaybackControl(se.RESET_CONTEXT)}close(){this.conn.close()}}function mu(t){const e={};return t.forEach((n,o)=>{e[o]=n}),e}function hu(t){const e=new Headers;for(const[n,o]of Object.entries(t))e.append(n,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const gu="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";function yu(t,e,n){return g(this,null,function*(){const o=new Ui;let s;n.data instanceof Blob?s=yield n.data.text():n.data instanceof ArrayBuffer?s=new TextDecoder().decode(n.data):s=n.data;const l=JSON.parse(s);if(t.isVertexAI()){const a=Br(l);Object.assign(o,a)}else Object.assign(o,l);e(o)})}class vu{constructor(e,n,o){this.apiClient=e,this.auth=n,this.webSocketFactory=o,this.music=new fu(this.apiClient,this.auth,this.webSocketFactory)}connect(e){return g(this,null,function*(){var n,o,s,l,a,u;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const c=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion();let f;const p=this.apiClient.getHeaders();e.config&&e.config.tools&&_o(e.config.tools)&&Eo(p);const m=Cu(p);if(this.apiClient.isVertexAI())f=`${c}/ws/google.cloud.aiplatform.${d}.LlmBidiService/BidiGenerateContent`,yield this.auth.addAuthHeaders(m,f);else{const R=this.apiClient.getApiKey();let U="BidiGenerateContent",F="key";R!=null&&R.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),d!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),U="BidiGenerateContentConstrained",F="access_token"),f=`${c}/ws/google.ai.generativelanguage.${d}.GenerativeService.${U}?${F}=${R}`}let h=()=>{};const v=new Promise(R=>{h=R}),T=e.callbacks,y=function(){var R;(R=T==null?void 0:T.onopen)===null||R===void 0||R.call(T),h({})},_=this.apiClient,I={onopen:y,onmessage:R=>{yu(_,T.onmessage,R)},onerror:(n=T==null?void 0:T.onerror)!==null&&n!==void 0?n:function(R){},onclose:(o=T==null?void 0:T.onclose)!==null&&o!==void 0?o:function(R){}},S=this.webSocketFactory.create(f,Eu(m),I);S.connect(),yield v;let A=D(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&A.startsWith("publishers/")){const R=this.apiClient.getProject(),U=this.apiClient.getLocation();A=`projects/${R}/locations/${U}/`+A}let M={};this.apiClient.isVertexAI()&&((s=e.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Se.AUDIO]}:e.config.responseModalities=[Se.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const P=(u=(a=e.config)===null||a===void 0?void 0:a.tools)!==null&&u!==void 0?u:[],N=[];for(const R of P)if(this.isCallableTool(R)){const U=R;N.push(yield U.tool())}else N.push(R);N.length>0&&(e.config.tools=N);const L={model:A,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?M=Gr(this.apiClient,L):M=Fr(this.apiClient,L),delete M.config,S.send(JSON.stringify(M)),new _u(S,this.apiClient)})}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const Tu={turnComplete:!0};class _u{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let o=[];try{o=B(n.turns),e.isVertexAI()||(o=o.map(s=>Pe(s)))}catch(s){throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:o,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let o=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?o=n.functionResponses:o=[n.functionResponses],o.length===0)throw new Error("functionResponses is required.");for(const l of o){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(gu)}return{toolResponse:{functionResponses:o}}}sendClientContent(e){e=Object.assign(Object.assign({},Tu),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:br(e)}:n={realtimeInput:Hr(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function Eu(t){const e={};return t.forEach((n,o)=>{e[o]=n}),e}function Cu(t){const e=new Headers;for(const[n,o]of Object.entries(t))e.append(n,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Gn=10;function Vn(t){var e,n,o;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let s=!1;for(const a of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(ae(a)){s=!0;break}if(!s)return!0;const l=(o=t==null?void 0:t.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function ae(t){return"callTool"in t&&typeof t.callTool=="function"}function Su(t){var e,n,o;return(o=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(s=>ae(s)))!==null&&o!==void 0?o:!1}function qn(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((o,s)=>{if(ae(o))return;const l=o;l.functionDeclarations&&l.functionDeclarations.length>0&&n.push(s)}),n}function Hn(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Iu extends X{constructor(e){super(),this.apiClient=e,this.generateContent=n=>g(this,null,function*(){var o,s,l,a,u;const c=yield this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!Su(n)||Vn(n.config))return yield this.generateContentInternal(c);const d=qn(n);if(d.length>0){const T=d.map(y=>`tools[${y}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${T}.`)}let f,p;const m=B(c.contents),h=(l=(s=(o=c.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&l!==void 0?l:Gn;let v=0;for(;v<h&&(f=yield this.generateContentInternal(c),!(!f.functionCalls||f.functionCalls.length===0));){const T=f.candidates[0].content,y=[];for(const _ of(u=(a=n.config)===null||a===void 0?void 0:a.tools)!==null&&u!==void 0?u:[])if(ae(_)){const S=yield _.callTool(f.functionCalls);y.push(...S)}v++,p={role:"user",parts:y},c.contents=B(c.contents),c.contents.push(T),c.contents.push(p),Hn(c.config)&&(m.push(T),m.push(p))}return Hn(c.config)&&(f.automaticFunctionCallingHistory=m),f}),this.generateContentStream=n=>g(this,null,function*(){var o,s,l,a,u;if(this.maybeMoveToResponseJsonSchem(n),Vn(n.config)){const p=yield this.processParamsMaybeAddMcpUsage(n);return yield this.generateContentStreamInternal(p)}const c=qn(n);if(c.length>0){const p=c.map(m=>`tools[${m}]`).join(", ");throw new Error(`Incompatible tools found at ${p}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const d=(l=(s=(o=n==null?void 0:n.config)===null||o===void 0?void 0:o.toolConfig)===null||s===void 0?void 0:s.functionCallingConfig)===null||l===void 0?void 0:l.streamFunctionCallArguments,f=(u=(a=n==null?void 0:n.config)===null||a===void 0?void 0:a.automaticFunctionCalling)===null||u===void 0?void 0:u.disable;if(d&&!f)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return yield this.processAfcStream(n)}),this.generateImages=n=>g(this,null,function*(){return yield this.generateImagesInternal(n).then(o=>{var s;let l;const a=[];if(o!=null&&o.generatedImages)for(const c of o.generatedImages)c&&(c!=null&&c.safetyAttributes)&&((s=c==null?void 0:c.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?l=c==null?void 0:c.safetyAttributes:a.push(c);let u;return l?u={generatedImages:a,positivePromptSafetyAttributes:l,sdkHttpResponse:o.sdkHttpResponse}:u={generatedImages:a,sdkHttpResponse:o.sdkHttpResponse},u})}),this.list=n=>g(this,null,function*(){var o;const a={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!a.config.queryBase){if(!((o=a.config)===null||o===void 0)&&o.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");a.config.filter="labels.tune-type:*"}return new oe(z.PAGED_ITEM_MODELS,u=>this.listInternal(u),yield this.listInternal(a),a)}),this.editImage=n=>g(this,null,function*(){const o={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(o.referenceImages=n.referenceImages.map(s=>s.toReferenceImageAPI())),yield this.editImageInternal(o)}),this.upscaleImage=n=>g(this,null,function*(){let o={numberOfImages:1,mode:"upscale"};n.config&&(o=Object.assign(Object.assign({},o),n.config));const s={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:o};return yield this.upscaleImageInternal(s)}),this.generateVideos=n=>g(this,null,function*(){var o,s,l,a,u,c;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((o=n.video)===null||o===void 0)&&o.uri&&(!((s=n.video)===null||s===void 0)&&s.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((a=(l=n.source)===null||l===void 0?void 0:l.video)===null||a===void 0)&&a.uri&&(!((c=(u=n.source)===null||u===void 0?void 0:u.video)===null||c===void 0)&&c.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),yield this.generateVideosInternal(n)})}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}processParamsMaybeAddMcpUsage(e){return g(this,null,function*(){var n,o,s;const l=(n=e.config)===null||n===void 0?void 0:n.tools;if(!l)return e;const a=yield Promise.all(l.map(c=>g(this,null,function*(){return ae(c)?yield c.tool():c}))),u={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:a})};if(u.config.tools=a,e.config&&e.config.tools&&_o(e.config.tools)){const c=(s=(o=e.config.httpOptions)===null||o===void 0?void 0:o.headers)!==null&&s!==void 0?s:{};let d=Object.assign({},c);Object.keys(d).length===0&&(d=this.apiClient.getDefaultHeaders()),Eo(d),u.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:d})}return u})}initAfcToolsMap(e){return g(this,null,function*(){var n,o,s;const l=new Map;for(const a of(o=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&o!==void 0?o:[])if(ae(a)){const u=a,c=yield u.tool();for(const d of(s=c.functionDeclarations)!==null&&s!==void 0?s:[]){if(!d.name)throw new Error("Function declaration name is required.");if(l.has(d.name))throw new Error(`Duplicate tool declaration name: ${d.name}`);l.set(d.name,u)}}return l})}processAfcStream(e){return g(this,null,function*(){var n,o,s;const l=(s=(o=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&s!==void 0?s:Gn;let a=!1,u=0;const c=yield this.initAfcToolsMap(e);return function(d,f,p){return W(this,arguments,function*(){for(var m,h,v,T,y,_;u<l;){a&&(u++,a=!1);const M=yield w(d.processParamsMaybeAddMcpUsage(p)),P=yield w(d.generateContentStreamInternal(M)),N=[],L=[];try{for(var I=!0,S=(h=void 0,K(P)),A;A=yield w(S.next()),m=A.done,!m;I=!0){T=A.value,I=!1;const R=T;if(yield yield w(R),R.candidates&&(!((y=R.candidates[0])===null||y===void 0)&&y.content)){L.push(R.candidates[0].content);for(const U of(_=R.candidates[0].content.parts)!==null&&_!==void 0?_:[])if(u<l&&U.functionCall){if(!U.functionCall.name)throw new Error("Function call name was not returned by the model.");if(f.has(U.functionCall.name)){const F=yield w(f.get(U.functionCall.name).callTool([U.functionCall]));N.push(...F)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${f.keys()}, mising tool: ${U.functionCall.name}`)}}}}catch(R){h={error:R}}finally{try{!I&&!m&&(v=S.return)&&(yield w(v.call(S)))}finally{if(h)throw h.error}}if(N.length>0){a=!0;const R=new fe;R.candidates=[{content:{role:"user",parts:N}}],yield yield w(R);const U=[];U.push(...L),U.push({role:"user",parts:N});const F=B(p.contents).concat(U);p.contents=F}else break}})}(this,c,e)})}generateContentInternal(e){return g(this,null,function*(){var n,o,s,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=Un(this.apiClient,e);return u=C("{model}:generateContent",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=Ln(f),m=new fe;return Object.assign(m,p),m})}else{const d=Dn(this.apiClient,e);return u=C("{model}:generateContent",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=kn(f),m=new fe;return Object.assign(m,p),m})}})}generateContentStreamInternal(e){return g(this,null,function*(){var n,o,s,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=Un(this.apiClient,e);return u=C("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.requestStream({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),a.then(function(p){return W(this,arguments,function*(){var m,h,v,T;try{for(var y=!0,_=K(p),I;I=yield w(_.next()),m=I.done,!m;y=!0){T=I.value,y=!1;const S=T,A=Ln(yield w(S.json()));A.sdkHttpResponse={headers:S.headers};const M=new fe;Object.assign(M,A),yield yield w(M)}}catch(S){h={error:S}}finally{try{!y&&!m&&(v=_.return)&&(yield w(v.call(_)))}finally{if(h)throw h.error}}})})}else{const d=Dn(this.apiClient,e);return u=C("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.requestStream({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),a.then(function(p){return W(this,arguments,function*(){var m,h,v,T;try{for(var y=!0,_=K(p),I;I=yield w(_.next()),m=I.done,!m;y=!0){T=I.value,y=!1;const S=T,A=kn(yield w(S.json()));A.sdkHttpResponse={headers:S.headers};const M=new fe;Object.assign(M,A),yield yield w(M)}}catch(S){h={error:S}}finally{try{!y&&!m&&(v=_.return)&&(yield w(v.call(_)))}finally{if(h)throw h.error}}})})}})}embedContent(e){return g(this,null,function*(){var n,o,s,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=vl(this.apiClient,e);return u=C("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=_l(f),m=new hn;return Object.assign(m,p),m})}else{const d=yl(this.apiClient,e);return u=C("{model}:batchEmbedContents",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=Tl(f),m=new hn;return Object.assign(m,p),m})}})}generateImagesInternal(e){return g(this,null,function*(){var n,o,s,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=xl(this.apiClient,e);return u=C("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=Ul(f),m=new gn;return Object.assign(m,p),m})}else{const d=Pl(this.apiClient,e);return u=C("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=Dl(f),m=new gn;return Object.assign(m,p),m})}})}editImageInternal(e){return g(this,null,function*(){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI()){const u=pl(this.apiClient,e);return l=C("{model}:predict",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),s.then(c=>{const d=ml(c),f=new Ci;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")})}upscaleImageInternal(e){return g(this,null,function*(){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI()){const u=xa(this.apiClient,e);return l=C("{model}:predict",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),s.then(c=>{const d=Da(c),f=new Si;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")})}recontextImage(e){return g(this,null,function*(){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI()){const u=fa(this.apiClient,e);return l=C("{model}:predict",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),s.then(c=>{const d=pa(c),f=new Ii;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")})}segmentImage(e){return g(this,null,function*(){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI()){const u=Ta(this.apiClient,e);return l=C("{model}:predict",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),s.then(c=>{const d=_a(c),f=new Ai;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")})}get(e){return g(this,null,function*(){var n,o,s,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=Xl(this.apiClient,e);return u=C("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>Ke(f))}else{const d=zl(this.apiClient,e);return u=C("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>We(f))}})}listInternal(e){return g(this,null,function*(){var n,o,s,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=sa(this.apiClient,e);return u=C("{models_url}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=la(f),m=new yn;return Object.assign(m,p),m})}else{const d=ia(this.apiClient,e);return u=C("{models_url}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=ra(f),m=new yn;return Object.assign(m,p),m})}})}update(e){return g(this,null,function*(){var n,o,s,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=Na(this.apiClient,e);return u=C("{model}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>Ke(f))}else{const d=Ma(this.apiClient,e);return u=C("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>We(f))}})}delete(e){return g(this,null,function*(){var n,o,s,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=ul(this.apiClient,e);return u=C("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=cl(f),m=new vn;return Object.assign(m,p),m})}else{const d=al(this.apiClient,e);return u=C("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=dl(f),m=new vn;return Object.assign(m,p),m})}})}countTokens(e){return g(this,null,function*(){var n,o,s,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=sl(this.apiClient,e);return u=C("{model}:countTokens",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=ll(f),m=new Tn;return Object.assign(m,p),m})}else{const d=il(this.apiClient,e);return u=C("{model}:countTokens",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=rl(f),m=new Tn;return Object.assign(m,p),m})}})}computeTokens(e){return g(this,null,function*(){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI()){const u=Qr(this.apiClient,e);return l=C("{model}:computeTokens",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),s.then(c=>{const d=Zr(c),f=new Ri;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")})}generateVideosInternal(e){return g(this,null,function*(){var n,o,s,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=ql(this.apiClient,e);return u=C("{model}:predictLongRunning",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>{const p=Gl(f),m=new Ie;return Object.assign(m,p),m})}else{const d=Vl(this.apiClient,e);return u=C("{model}:predictLongRunning",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>{const p=Fl(f),m=new Ie;return Object.assign(m,p),m})}})}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Au extends X{constructor(e){super(),this.apiClient=e}getVideosOperation(e){return g(this,null,function*(){const n=e.operation,o=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let l;o&&"httpOptions"in o&&(l=o.httpOptions);const a=yield this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:l}});return n._fromAPIResponse({apiResponse:a,_isVertexAI:!0})}else{const s=yield this.getVideosOperationInternal({operationName:n.name,config:o});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}})}get(e){return g(this,null,function*(){const n=e.operation,o=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let l;o&&"httpOptions"in o&&(l=o.httpOptions);const a=yield this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:l}});return n._fromAPIResponse({apiResponse:a,_isVertexAI:!0})}else{const s=yield this.getVideosOperationInternal({operationName:n.name,config:o});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}})}getVideosOperationInternal(e){return g(this,null,function*(){var n,o,s,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=gi(e);return u=C("{operationName}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a}else{const d=hi(e);return u=C("{operationName}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a}})}fetchPredictVideosOperationInternal(e){return g(this,null,function*(){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI()){const u=ai(e);return l=C("{resourceName}:fetchPredictOperation",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),s}else throw new Error("This method is only supported by the Vertex AI.")})}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ru(t){const e={},n=i(t,["data"]);if(n!=null&&r(e,["data"],n),i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function wu(t){const e={},n=i(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>Fu(l))),r(e,["parts"],s)}const o=i(t,["role"]);return o!=null&&r(e,["role"],o),e}function Mu(t,e,n){const o={},s=i(e,["expireTime"]);n!==void 0&&s!=null&&r(n,["expireTime"],s);const l=i(e,["newSessionExpireTime"]);n!==void 0&&l!=null&&r(n,["newSessionExpireTime"],l);const a=i(e,["uses"]);n!==void 0&&a!=null&&r(n,["uses"],a);const u=i(e,["liveConnectConstraints"]);n!==void 0&&u!=null&&r(n,["bidiGenerateContentSetup"],Lu(t,u));const c=i(e,["lockAdditionalFields"]);return n!==void 0&&c!=null&&r(n,["fieldMask"],c),o}function Nu(t,e){const n={},o=i(e,["config"]);return o!=null&&r(n,["config"],Mu(t,o,n)),n}function Pu(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["fileUri"]);n!=null&&r(e,["fileUri"],n);const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function xu(t){const e={},n=i(t,["id"]);n!=null&&r(e,["id"],n);const o=i(t,["args"]);o!=null&&r(e,["args"],o);const s=i(t,["name"]);if(s!=null&&r(e,["name"],s),i(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(i(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Du(t){const e={};if(i(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=i(t,["enableWidget"]);return n!=null&&r(e,["enableWidget"],n),e}function Uu(t){const e={};if(i(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(i(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=i(t,["timeRangeFilter"]);return n!=null&&r(e,["timeRangeFilter"],n),e}function ku(t,e){const n={},o=i(t,["generationConfig"]);e!==void 0&&o!=null&&r(e,["setup","generationConfig"],o);const s=i(t,["responseModalities"]);e!==void 0&&s!=null&&r(e,["setup","generationConfig","responseModalities"],s);const l=i(t,["temperature"]);e!==void 0&&l!=null&&r(e,["setup","generationConfig","temperature"],l);const a=i(t,["topP"]);e!==void 0&&a!=null&&r(e,["setup","generationConfig","topP"],a);const u=i(t,["topK"]);e!==void 0&&u!=null&&r(e,["setup","generationConfig","topK"],u);const c=i(t,["maxOutputTokens"]);e!==void 0&&c!=null&&r(e,["setup","generationConfig","maxOutputTokens"],c);const d=i(t,["mediaResolution"]);e!==void 0&&d!=null&&r(e,["setup","generationConfig","mediaResolution"],d);const f=i(t,["seed"]);e!==void 0&&f!=null&&r(e,["setup","generationConfig","seed"],f);const p=i(t,["speechConfig"]);e!==void 0&&p!=null&&r(e,["setup","generationConfig","speechConfig"],lt(p));const m=i(t,["thinkingConfig"]);e!==void 0&&m!=null&&r(e,["setup","generationConfig","thinkingConfig"],m);const h=i(t,["enableAffectiveDialog"]);e!==void 0&&h!=null&&r(e,["setup","generationConfig","enableAffectiveDialog"],h);const v=i(t,["systemInstruction"]);e!==void 0&&v!=null&&r(e,["setup","systemInstruction"],wu(V(v)));const T=i(t,["tools"]);if(e!==void 0&&T!=null){let P=de(T);Array.isArray(P)&&(P=P.map(N=>Vu(ue(N)))),r(e,["setup","tools"],P)}const y=i(t,["sessionResumption"]);e!==void 0&&y!=null&&r(e,["setup","sessionResumption"],Gu(y));const _=i(t,["inputAudioTranscription"]);e!==void 0&&_!=null&&r(e,["setup","inputAudioTranscription"],_);const I=i(t,["outputAudioTranscription"]);e!==void 0&&I!=null&&r(e,["setup","outputAudioTranscription"],I);const S=i(t,["realtimeInputConfig"]);e!==void 0&&S!=null&&r(e,["setup","realtimeInputConfig"],S);const A=i(t,["contextWindowCompression"]);e!==void 0&&A!=null&&r(e,["setup","contextWindowCompression"],A);const M=i(t,["proactivity"]);if(e!==void 0&&M!=null&&r(e,["setup","proactivity"],M),i(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function Lu(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["setup","model"],D(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],ku(s,n)),n}function Fu(t){const e={},n=i(t,["mediaResolution"]);n!=null&&r(e,["mediaResolution"],n);const o=i(t,["codeExecutionResult"]);o!=null&&r(e,["codeExecutionResult"],o);const s=i(t,["executableCode"]);s!=null&&r(e,["executableCode"],s);const l=i(t,["fileData"]);l!=null&&r(e,["fileData"],Pu(l));const a=i(t,["functionCall"]);a!=null&&r(e,["functionCall"],xu(a));const u=i(t,["functionResponse"]);u!=null&&r(e,["functionResponse"],u);const c=i(t,["inlineData"]);c!=null&&r(e,["inlineData"],Ru(c));const d=i(t,["text"]);d!=null&&r(e,["text"],d);const f=i(t,["thought"]);f!=null&&r(e,["thought"],f);const p=i(t,["thoughtSignature"]);p!=null&&r(e,["thoughtSignature"],p);const m=i(t,["videoMetadata"]);return m!=null&&r(e,["videoMetadata"],m),e}function Gu(t){const e={},n=i(t,["handle"]);if(n!=null&&r(e,["handle"],n),i(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Vu(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),r(e,["functionDeclarations"],f)}if(i(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(t,["googleSearchRetrieval"]);o!=null&&r(e,["googleSearchRetrieval"],o);const s=i(t,["computerUse"]);s!=null&&r(e,["computerUse"],s);const l=i(t,["fileSearch"]);l!=null&&r(e,["fileSearch"],l);const a=i(t,["codeExecution"]);if(a!=null&&r(e,["codeExecution"],a),i(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=i(t,["googleMaps"]);u!=null&&r(e,["googleMaps"],Du(u));const c=i(t,["googleSearch"]);c!=null&&r(e,["googleSearch"],Uu(c));const d=i(t,["urlContext"]);return d!=null&&r(e,["urlContext"],d),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function qu(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const o=t[n];if(typeof o=="object"&&o!=null&&Object.keys(o).length>0){const s=Object.keys(o).map(l=>`${n}.${l}`);e.push(...s)}else e.push(n)}return e.join(",")}function Hu(t,e){let n=null;const o=t.bidiGenerateContentSetup;if(typeof o=="object"&&o!==null&&"setup"in o){const l=o.setup;typeof l=="object"&&l!==null?(t.bidiGenerateContentSetup=l,n=l):delete t.bidiGenerateContentSetup}else o!==void 0&&delete t.bidiGenerateContentSetup;const s=t.fieldMask;if(n){const l=qu(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?t.fieldMask=l:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const a=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let u=[];s.length>0&&(u=s.map(d=>a.includes(d)?`generationConfig.${d}`:d));const c=[];l&&c.push(l),u.length>0&&c.push(...u),c.length>0?t.fieldMask=c.join(","):delete t.fieldMask}else delete t.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?t.fieldMask=s.join(","):delete t.fieldMask;return t}class bu extends X{constructor(e){super(),this.apiClient=e}create(e){return g(this,null,function*(){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const u=Nu(this.apiClient,e);l=C("auth_tokens",u._url),a=u._query,delete u.config,delete u._url,delete u._query;const c=Hu(u,e.config);return s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>d)}})}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Bu(t,e){const n={},o=i(t,["force"]);return e!==void 0&&o!=null&&r(e,["_query","force"],o),n}function Ju(t){const e={},n=i(t,["name"]);n!=null&&r(e,["_url","name"],n);const o=i(t,["config"]);return o!=null&&Bu(o,e),e}function $u(t){const e={},n=i(t,["name"]);return n!=null&&r(e,["_url","name"],n),e}function Yu(t,e){const n={},o=i(t,["pageSize"]);e!==void 0&&o!=null&&r(e,["_query","pageSize"],o);const s=i(t,["pageToken"]);return e!==void 0&&s!=null&&r(e,["_query","pageToken"],s),n}function Wu(t){const e={},n=i(t,["parent"]);n!=null&&r(e,["_url","parent"],n);const o=i(t,["config"]);return o!=null&&Yu(o,e),e}function Ku(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["nextPageToken"]);o!=null&&r(e,["nextPageToken"],o);const s=i(t,["documents"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(a=>a)),r(e,["documents"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ou extends X{constructor(e){super(),this.apiClient=e,this.list=n=>g(this,null,function*(){return new oe(z.PAGED_ITEM_DOCUMENTS,o=>this.listInternal({parent:n.parent,config:o.config}),yield this.listInternal(n),n)})}get(e){return g(this,null,function*(){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=$u(e);return l=C("{name}",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),s.then(c=>c)}})}delete(e){return g(this,null,function*(){var n,o;let s="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Ju(e);s=C("{name}",a._url),l=a._query,delete a._url,delete a._query,yield this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}})}listInternal(e){return g(this,null,function*(){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Wu(e);return l=C("{parent}/documents",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),s.then(c=>{const d=Ku(c),f=new wi;return Object.assign(f,d),f})}})}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zu extends X{constructor(e,n=new Ou(e)){super(),this.apiClient=e,this.documents=n,this.list=(...s)=>g(this,[...s],function*(o={}){return new oe(z.PAGED_ITEM_FILE_SEARCH_STORES,l=>this.listInternal(l),yield this.listInternal(o),o)})}uploadToFileSearchStore(e){return g(this,null,function*(){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)})}create(e){return g(this,null,function*(){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=qa(e);return l=C("fileSearchStores",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),s.then(c=>c)}})}get(e){return g(this,null,function*(){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Ba(e);return l=C("{name}",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),s.then(c=>c)}})}delete(e){return g(this,null,function*(){var n,o;let s="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=ba(e);s=C("{name}",a._url),l=a._query,delete a._url,delete a._query,yield this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}})}listInternal(e){return g(this,null,function*(){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Oa(e);return l=C("fileSearchStores",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),s.then(c=>{const d=za(c),f=new Mi;return Object.assign(f,d),f})}})}uploadToFileSearchStoreInternal(e){return g(this,null,function*(){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Xa(e);return l=C("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),s.then(c=>{const d=Qa(c),f=new Ni;return Object.assign(f,d),f})}})}importFile(e){return g(this,null,function*(){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Ya(e);return l=C("{file_search_store_name}:importFile",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),s.then(c=>{const d=$a(c),f=new nt;return Object.assign(f,d),f})}})}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Co=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return Co=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,o=>(+o^n()&15>>+o/4).toString(16))};const Xu=()=>Co();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ze(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const Xe=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch(e){}try{return new Error(JSON.stringify(t))}catch(e){}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class J extends Error{}class H extends J{constructor(e,n,o,s){super(`${H.makeMessage(e,n,o)}`),this.status=e,this.headers=s,this.error=n}static makeMessage(e,n,o){const s=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):o;return e&&s?`${e} ${s}`:e?`${e} status code (no body)`:s||"(no status code or body)"}static generate(e,n,o,s){if(!e||!s)return new Ue({message:o,cause:Xe(n)});const l=n;return e===400?new Io(e,l,o,s):e===401?new Ao(e,l,o,s):e===403?new Ro(e,l,o,s):e===404?new wo(e,l,o,s):e===409?new Mo(e,l,o,s):e===422?new No(e,l,o,s):e===429?new Po(e,l,o,s):e>=500?new xo(e,l,o,s):new H(e,l,o,s)}}class Qe extends H{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Ue extends H{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class So extends Ue{constructor({message:e}={}){super({message:e!=null?e:"Request timed out."})}}class Io extends H{}class Ao extends H{}class Ro extends H{}class wo extends H{}class Mo extends H{}class No extends H{}class Po extends H{}class xo extends H{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Qu=/^[a-z][a-z0-9+.-]*:/i,Zu=t=>Qu.test(t);let Ze=t=>(Ze=Array.isArray,Ze(t));const ju=Ze;let ed=ju;const bn=ed;function td(t){if(!t)return!0;for(const e in t)return!1;return!0}function nd(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const od=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new J(`${t} must be an integer`);if(e<0)throw new J(`${t} must be a positive integer`);return e},id=t=>{try{return JSON.parse(t)}catch(e){return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const sd=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ie="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rd(){return typeof Deno!="undefined"&&Deno.build!=null?"deno":typeof EdgeRuntime!="undefined"?"edge":Object.prototype.toString.call(typeof globalThis.process!="undefined"?globalThis.process:0)==="[object process]"?"node":"unknown"}const ld=()=>{var t,e,n,o,s;const l=rd();if(l==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ie,"X-Stainless-OS":Jn(Deno.build.os),"X-Stainless-Arch":Bn(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime!="undefined")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ie,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(l==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ie,"X-Stainless-OS":Jn((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":Bn((o=globalThis.process.arch)!==null&&o!==void 0?o:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(s=globalThis.process.version)!==null&&s!==void 0?s:"unknown"};const a=ad();return a?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ie,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${a.browser}`,"X-Stainless-Runtime-Version":a.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ie,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function ad(){if(typeof navigator=="undefined"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const o=n.exec(navigator.userAgent);if(o){const s=o[1]||0,l=o[2]||0,a=o[3]||0;return{browser:e,version:`${s}.${l}.${a}`}}}return null}const Bn=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",Jn=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let ge;const ud=()=>ge!=null?ge:ge=ld();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dd(){if(typeof fetch!="undefined")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function Do(...t){const e=globalThis.ReadableStream;if(typeof e=="undefined")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function cd(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return Do({start(){},pull(o){return g(this,null,function*(){const{done:s,value:l}=yield e.next();s?o.close():o.enqueue(l)})},cancel(){return g(this,null,function*(){var o;yield(o=e.return)===null||o===void 0?void 0:o.call(e)})}})}function Uo(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{next(){return g(this,null,function*(){try{const o=yield e.read();return o!=null&&o.done&&e.releaseLock(),o}catch(o){throw e.releaseLock(),o}})},return(){return g(this,null,function*(){const o=e.cancel();return e.releaseLock(),yield o,{done:!0,value:void 0}})},[Symbol.asyncIterator](){return this}}}function fd(t){return g(this,null,function*(){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){yield(n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e);return}const o=t.getReader(),s=o.cancel();o.releaseLock(),yield s})}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const pd=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ko=()=>{var t;if(typeof File=="undefined"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Ve(t,e,n){return ko(),new File(t,e!=null?e:"unknown_file",n)}function md(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const hd=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Lo=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",gd=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&Lo(t),yd=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";function vd(t,e,n){return g(this,null,function*(){if(ko(),t=yield t,gd(t))return t instanceof File?t:Ve([yield t.arrayBuffer()],t.name);if(yd(t)){const s=yield t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Ve(yield je(s),e,n)}const o=yield je(t);if(e||(e=md(t)),!(n!=null&&n.type)){const s=o.find(l=>typeof l=="object"&&"type"in l&&l.type);typeof s=="string"&&(n=Object.assign(Object.assign({},n),{type:s}))}return Ve(o,e,n)})}function je(t){return g(this,null,function*(){var e,n,o,s,l;let a=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)a.push(t);else if(Lo(t))a.push(t instanceof Blob?t:yield t.arrayBuffer());else if(hd(t))try{for(var u=!0,c=K(t),d;d=yield c.next(),e=d.done,!e;u=!0){s=d.value,u=!1;const f=s;a.push(...yield je(f))}}catch(f){n={error:f}}finally{try{!u&&!e&&(o=c.return)&&(yield o.call(c))}finally{if(n)throw n.error}}else{const f=(l=t==null?void 0:t.constructor)===null||l===void 0?void 0:l.name;throw new Error(`Unexpected data type: ${typeof t}${f?`; constructor: ${f}`:""}${Td(t)}`)}return a})}function Td(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Fo{constructor(e){this._client=e}}Fo._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Go(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const $n=Object.freeze(Object.create(null)),_d=(t=Go)=>function(n,...o){if(n.length===1)return n[0];let s=!1;const l=[],a=n.reduce((f,p,m)=>{var h,v,T;/[?#]/.test(p)&&(s=!0);const y=o[m];let _=(s?encodeURIComponent:t)(""+y);return m!==o.length&&(y==null||typeof y=="object"&&y.toString===((T=Object.getPrototypeOf((v=Object.getPrototypeOf((h=y.hasOwnProperty)!==null&&h!==void 0?h:$n))!==null&&v!==void 0?v:$n))===null||T===void 0?void 0:T.toString))&&(_=y+"",l.push({start:f.length+p.length,length:_.length,error:`Value of type ${Object.prototype.toString.call(y).slice(8,-1)} is not a valid path parameter`})),f+p+(m===o.length?"":_)},""),u=a.split(/[?#]/,1)[0],c=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let d;for(;(d=c.exec(u))!==null;)l.push({start:d.index,length:d[0].length,error:`Value "${d[0]}" can't be safely passed as a path parameter`});if(l.sort((f,p)=>f.start-p.start),l.length>0){let f=0;const p=l.reduce((m,h)=>{const v=" ".repeat(h.start-f),T="^".repeat(h.length);return f=h.start+h.length,m+v+T},"");throw new J(`Path parameters result in path with invalid segments:
${l.map(m=>m.error).join(`
`)}
${a}
${p}`)}return a},ye=_d(Go);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Vo extends Fo{create(e,n){var o;const{api_version:s=this._client.apiVersion}=e,l=Re(e,["api_version"]);if("model"in l&&"agent_config"in l)throw new J("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in l&&"generation_config"in l)throw new J("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(ye`/${s}/interactions`,Object.assign(Object.assign({body:l},n),{stream:(o=e.stream)!==null&&o!==void 0?o:!1}))}delete(e,n={},o){const{api_version:s=this._client.apiVersion}=n!=null?n:{};return this._client.delete(ye`/${s}/interactions/${e}`,o)}cancel(e,n={},o){const{api_version:s=this._client.apiVersion}=n!=null?n:{};return this._client.post(ye`/${s}/interactions/${e}/cancel`,o)}get(e,n={},o){var s;const l=n!=null?n:{},{api_version:a=this._client.apiVersion}=l,u=Re(l,["api_version"]);return this._client.get(ye`/${a}/interactions/${e}`,Object.assign(Object.assign({query:u},o),{stream:(s=n==null?void 0:n.stream)!==null&&s!==void 0?s:!1}))}}Vo._key=Object.freeze(["interactions"]);class qo extends Vo{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ed(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let o=0;for(const s of t)n.set(s,o),o+=s.length;return n}let ve;function ut(t){let e;return(ve!=null?ve:(e=new globalThis.TextEncoder,ve=e.encode.bind(e)))(t)}let Te;function Yn(t){let e;return(Te!=null?Te:(e=new globalThis.TextDecoder,Te=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ke{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?ut(e):e;this.buffer=Ed([this.buffer,n]);const o=[];let s;for(;(s=Cd(this.buffer,this.carriageReturnIndex))!=null;){if(s.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=s.index;continue}if(this.carriageReturnIndex!=null&&(s.index!==this.carriageReturnIndex+1||s.carriage)){o.push(Yn(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const l=this.carriageReturnIndex!==null?s.preceding-1:s.preceding,a=Yn(this.buffer.subarray(0,l));o.push(a),this.buffer=this.buffer.subarray(s.index),this.carriageReturnIndex=null}return o}flush(){return this.buffer.length?this.decode(`
`):[]}}ke.NEWLINE_CHARS=new Set([`
`,"\r"]);ke.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function Cd(t,e){for(let s=e!=null?e:0;s<t.length;s++){if(t[s]===10)return{preceding:s,index:s+1,carriage:!1};if(t[s]===13)return{preceding:s,index:s+1,carriage:!0}}return null}function Sd(t){for(let o=0;o<t.length-1;o++){if(t[o]===10&&t[o+1]===10||t[o]===13&&t[o+1]===13)return o+2;if(t[o]===13&&t[o+1]===10&&o+3<t.length&&t[o+2]===13&&t[o+3]===10)return o+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const we={off:0,error:200,warn:300,info:400,debug:500},Wn=(t,e,n)=>{if(t){if(nd(we,t))return t;q(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(we))}`)}};function he(){}function _e(t,e,n){return!e||we[t]>we[n]?he:e[t].bind(e)}const Id={error:he,warn:he,info:he,debug:he};let Kn=new WeakMap;function q(t){var e;const n=t.logger,o=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return Id;const s=Kn.get(n);if(s&&s[0]===o)return s[1];const l={error:_e("error",n,o),warn:_e("warn",n,o),info:_e("info",n,o),debug:_e("debug",n,o)};return Kn.set(n,[o,l]),l}const ne=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class re{constructor(e,n,o){this.iterator=e,this.controller=n,this.client=o}static fromSSEResponse(e,n,o){let s=!1;const l=o?q(o):console;function a(){return W(this,arguments,function*(){var c,d,f,p;if(s)throw new J("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let m=!1;try{try{for(var h=!0,v=K(Ad(e,n)),T;T=yield w(v.next()),c=T.done,!c;h=!0){p=T.value,h=!1;const y=p;if(!m)if(y.data.startsWith("[DONE]")){m=!0;continue}else try{yield yield w(JSON.parse(y.data))}catch(_){throw l.error("Could not parse message into JSON:",y.data),l.error("From chunk:",y.raw),_}}}catch(y){d={error:y}}finally{try{!h&&!c&&(f=v.return)&&(yield w(f.call(v)))}finally{if(d)throw d.error}}m=!0}catch(y){if(ze(y))return yield w(void 0);throw y}finally{m||n.abort()}})}return new re(a,n,o)}static fromReadableStream(e,n,o){let s=!1;function l(){return W(this,arguments,function*(){var c,d,f,p;const m=new ke,h=Uo(e);try{for(var v=!0,T=K(h),y;y=yield w(T.next()),c=y.done,!c;v=!0){p=y.value,v=!1;const _=p;for(const I of m.decode(_))yield yield w(I)}}catch(_){d={error:_}}finally{try{!v&&!c&&(f=T.return)&&(yield w(f.call(T)))}finally{if(d)throw d.error}}for(const _ of m.flush())yield yield w(_)})}function a(){return W(this,arguments,function*(){var c,d,f,p;if(s)throw new J("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let m=!1;try{try{for(var h=!0,v=K(l()),T;T=yield w(v.next()),c=T.done,!c;h=!0){p=T.value,h=!1;const y=p;m||y&&(yield yield w(JSON.parse(y)))}}catch(y){d={error:y}}finally{try{!h&&!c&&(f=v.return)&&(yield w(f.call(v)))}finally{if(d)throw d.error}}m=!0}catch(y){if(ze(y))return yield w(void 0);throw y}finally{m||n.abort()}})}return new re(a,n,o)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],o=this.iterator(),s=l=>({next:()=>{if(l.length===0){const a=o.next();e.push(a),n.push(a)}return l.shift()}});return[new re(()=>s(e),this.controller,this.client),new re(()=>s(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return Do({start(){return g(this,null,function*(){n=e[Symbol.asyncIterator]()})},pull(s){return g(this,null,function*(){try{const{value:l,done:a}=yield n.next();if(a)return s.close();const u=ut(JSON.stringify(l)+`
`);s.enqueue(u)}catch(l){s.error(l)}})},cancel(){return g(this,null,function*(){var s;yield(s=n.return)===null||s===void 0?void 0:s.call(n)})}})}}function Ad(t,e){return W(this,arguments,function*(){var o,s,l,a;if(!t.body)throw e.abort(),typeof globalThis.navigator!="undefined"&&globalThis.navigator.product==="ReactNative"?new J("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new J("Attempted to iterate over a response with no body");const u=new wd,c=new ke,d=Uo(t.body);try{for(var f=!0,p=K(Rd(d)),m;m=yield w(p.next()),o=m.done,!o;f=!0){a=m.value,f=!1;const h=a;for(const v of c.decode(h)){const T=u.decode(v);T&&(yield yield w(T))}}}catch(h){s={error:h}}finally{try{!f&&!o&&(l=p.return)&&(yield w(l.call(p)))}finally{if(s)throw s.error}}for(const h of c.flush()){const v=u.decode(h);v&&(yield yield w(v))}})}function Rd(t){return W(this,arguments,function*(){var n,o,s,l;let a=new Uint8Array;try{for(var u=!0,c=K(t),d;d=yield w(c.next()),n=d.done,!n;u=!0){l=d.value,u=!1;const f=l;if(f==null)continue;const p=f instanceof ArrayBuffer?new Uint8Array(f):typeof f=="string"?ut(f):f;let m=new Uint8Array(a.length+p.length);m.set(a),m.set(p,a.length),a=m;let h;for(;(h=Sd(a))!==-1;)yield yield w(a.slice(0,h)),a=a.slice(h)}}catch(f){o={error:f}}finally{try{!u&&!n&&(s=c.return)&&(yield w(s.call(c)))}finally{if(o)throw o.error}}a.length>0&&(yield yield w(a))})}class wd{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const l={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],l}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,o,s]=Md(e,":");return s.startsWith(" ")&&(s=s.substring(1)),n==="event"?this.event=s:n==="data"&&this.data.push(s),null}}function Md(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Nd(t,e){return g(this,null,function*(){const{response:n,requestLogID:o,retryOfRequestLogID:s,startTime:l}=e,a=yield g(this,null,function*(){var u;if(e.options.stream)return q(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):re.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const c=n.headers.get("content-type"),d=(u=c==null?void 0:c.split(";")[0])===null||u===void 0?void 0:u.trim();return(d==null?void 0:d.includes("application/json"))||(d==null?void 0:d.endsWith("+json"))?yield n.json():yield n.text()});return q(t).debug(`[${o}] response parsed`,ne({retryOfRequestLogID:s,url:n.url,status:n.status,body:a,durationMs:Date.now()-l})),a})}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class dt extends Promise{constructor(e,n,o=Nd){super(s=>{s(null)}),this.responsePromise=n,this.parseResponse=o,this.client=e}_thenUnwrap(e){return new dt(this.client,this.responsePromise,(n,o)=>g(this,null,function*(){return e(yield this.parseResponse(n,o),o)}))}asResponse(){return this.responsePromise.then(e=>e.response)}withResponse(){return g(this,null,function*(){const[e,n]=yield Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}})}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ho=Symbol("brand.privateNullableHeaders");function*Pd(t){if(!t)return;if(Ho in t){const{values:o,nulls:s}=t;yield*pt(o.entries());for(const l of s)yield[l,null];return}let e=!1,n;t instanceof Headers?n=t.entries():bn(t)?n=t:(e=!0,n=Object.entries(t!=null?t:{}));for(let o of n){const s=o[0];if(typeof s!="string")throw new TypeError("expected header name to be a string");const l=bn(o[1])?o[1]:[o[1]];let a=!1;for(const u of l)u!==void 0&&(e&&!a&&(a=!0,yield[s,null]),yield[s,u])}}const pe=t=>{const e=new Headers,n=new Set;for(const o of t){const s=new Set;for(const[l,a]of Pd(o)){const u=l.toLowerCase();s.has(u)||(e.delete(l),s.add(u)),a===null?(e.delete(l),n.add(u)):(e.append(l,a),n.delete(u))}}return{[Ho]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qe=t=>{var e,n,o,s,l,a;if(typeof globalThis.process!="undefined")return(o=(n=(e=ni)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&o!==void 0?o:void 0;if(typeof globalThis.Deno!="undefined")return(a=(l=(s=globalThis.Deno.env)===null||s===void 0?void 0:s.get)===null||l===void 0?void 0:l.call(s,t))===null||a===void 0?void 0:a.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var bo;class Le{constructor(e){var n,o,s,l,a,u,c,{baseURL:d=qe("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:f=(n=qe("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:p="v1beta"}=e,m=Re(e,["baseURL","apiKey","apiVersion"]);const h=Object.assign(Object.assign({apiKey:f,apiVersion:p},m),{baseURL:d||"https://generativelanguage.googleapis.com"});this.baseURL=h.baseURL,this.timeout=(o=h.timeout)!==null&&o!==void 0?o:Le.DEFAULT_TIMEOUT,this.logger=(s=h.logger)!==null&&s!==void 0?s:console;const v="warn";this.logLevel=v,this.logLevel=(a=(l=Wn(h.logLevel,"ClientOptions.logLevel",this))!==null&&l!==void 0?l:Wn(qe("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&a!==void 0?a:v,this.fetchOptions=h.fetchOptions,this.maxRetries=(u=h.maxRetries)!==null&&u!==void 0?u:2,this.fetch=(c=h.fetch)!==null&&c!==void 0?c:dd(),this.encoder=pd,this._options=h,this.apiKey=f,this.apiVersion=p,this.clientAdapter=h.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}authHeaders(e){return g(this,null,function*(){const n=pe([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return pe([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return pe([yield this.clientAdapter.getAuthHeaders()])}})}stringifyQuery(e){return Object.entries(e).filter(([n,o])=>typeof o!="undefined").map(([n,o])=>{if(typeof o=="string"||typeof o=="number"||typeof o=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(o)}`;if(o===null)return`${encodeURIComponent(n)}=`;throw new J(`Cannot stringify type ${typeof o}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${ie}`}defaultIdempotencyKey(){return`stainless-node-retry-${Xu()}`}makeStatusError(e,n,o,s){return H.generate(e,n,o,s)}buildURL(e,n,o){const s=!this.baseURLOverridden()&&o||this.baseURL,l=Zu(e)?new URL(e):new URL(s+(s.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),a=this.defaultQuery();return td(a)||(n=Object.assign(Object.assign({},a),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(l.search=this.stringifyQuery(n)),l.toString()}prepareOptions(e){return g(this,null,function*(){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}})}prepareRequest(s,l){return g(this,arguments,function*(e,{url:n,options:o}){})}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,o){return this.request(Promise.resolve(o).then(s=>Object.assign({method:e,path:n},s)))}request(e,n=null){return new dt(this,this.makeRequest(e,n,void 0))}makeRequest(e,n,o){return g(this,null,function*(){var s,l,a;const u=yield e,c=(s=u.maxRetries)!==null&&s!==void 0?s:this.maxRetries;n==null&&(n=c),yield this.prepareOptions(u);const{req:d,url:f,timeout:p}=yield this.buildRequest(u,{retryCount:c-n});yield this.prepareRequest(d,{url:f,options:u});const m="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),h=o===void 0?"":`, retryOf: ${o}`,v=Date.now();if(q(this).debug(`[${m}] sending request`,ne({retryOfRequestLogID:o,method:u.method,url:f,options:u,headers:d.headers})),!((l=u.signal)===null||l===void 0)&&l.aborted)throw new Qe;const T=new AbortController,y=yield this.fetchWithTimeout(f,d,p,T).catch(Xe),_=Date.now();if(y instanceof globalThis.Error){const S=`retrying, ${n} attempts remaining`;if(!((a=u.signal)===null||a===void 0)&&a.aborted)throw new Qe;const A=ze(y)||/timed? ?out/i.test(String(y)+("cause"in y?String(y.cause):""));if(n)return q(this).info(`[${m}] connection ${A?"timed out":"failed"} - ${S}`),q(this).debug(`[${m}] connection ${A?"timed out":"failed"} (${S})`,ne({retryOfRequestLogID:o,url:f,durationMs:_-v,message:y.message})),this.retryRequest(u,n,o!=null?o:m);throw q(this).info(`[${m}] connection ${A?"timed out":"failed"} - error; no more retries left`),q(this).debug(`[${m}] connection ${A?"timed out":"failed"} (error; no more retries left)`,ne({retryOfRequestLogID:o,url:f,durationMs:_-v,message:y.message})),A?new So:new Ue({cause:y})}const I=`[${m}${h}] ${d.method} ${f} ${y.ok?"succeeded":"failed"} with status ${y.status} in ${_-v}ms`;if(!y.ok){const S=yield this.shouldRetry(y);if(n&&S){const R=`retrying, ${n} attempts remaining`;return yield fd(y.body),q(this).info(`${I} - ${R}`),q(this).debug(`[${m}] response error (${R})`,ne({retryOfRequestLogID:o,url:y.url,status:y.status,headers:y.headers,durationMs:_-v})),this.retryRequest(u,n,o!=null?o:m,y.headers)}const A=S?"error; no more retries left":"error; not retryable";q(this).info(`${I} - ${A}`);const M=yield y.text().catch(R=>Xe(R).message),P=id(M),N=P?void 0:M;throw q(this).debug(`[${m}] response error (${A})`,ne({retryOfRequestLogID:o,url:y.url,status:y.status,headers:y.headers,message:N,durationMs:Date.now()-v})),this.makeStatusError(y.status,P,N,y.headers)}return q(this).info(I),q(this).debug(`[${m}] response start`,ne({retryOfRequestLogID:o,url:y.url,status:y.status,headers:y.headers,durationMs:_-v})),{response:y,options:u,controller:T,requestLogID:m,retryOfRequestLogID:o,startTime:v}})}fetchWithTimeout(e,n,o,s){return g(this,null,function*(){const l=n||{},{signal:a,method:u}=l,c=Re(l,["signal","method"]);a&&a.addEventListener("abort",()=>s.abort());const d=setTimeout(()=>s.abort(),o),f=globalThis.ReadableStream&&c.body instanceof globalThis.ReadableStream||typeof c.body=="object"&&c.body!==null&&Symbol.asyncIterator in c.body,p=Object.assign(Object.assign(Object.assign({signal:s.signal},f?{duplex:"half"}:{}),{method:"GET"}),c);u&&(p.method=u.toUpperCase());try{return yield this.fetch.call(void 0,e,p)}finally{clearTimeout(d)}})}shouldRetry(e){return g(this,null,function*(){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500})}retryRequest(e,n,o,s){return g(this,null,function*(){var l;let a;const u=s==null?void 0:s.get("retry-after-ms");if(u){const d=parseFloat(u);Number.isNaN(d)||(a=d)}const c=s==null?void 0:s.get("retry-after");if(c&&!a){const d=parseFloat(c);Number.isNaN(d)?a=Date.parse(c)-Date.now():a=d*1e3}if(!(a&&0<=a&&a<60*1e3)){const d=(l=e.maxRetries)!==null&&l!==void 0?l:this.maxRetries;a=this.calculateDefaultRetryTimeoutMillis(n,d)}return yield sd(a),this.makeRequest(e,n-1,o)})}calculateDefaultRetryTimeoutMillis(e,n){const l=n-e,a=Math.min(.5*Math.pow(2,l),8),u=1-Math.random()*.25;return a*u*1e3}buildRequest(o){return g(this,arguments,function*(e,{retryCount:n=0}={}){var s,l,a;const u=Object.assign({},e),{method:c,path:d,query:f,defaultBaseURL:p}=u,m=this.buildURL(d,f,p);"timeout"in u&&od("timeout",u.timeout),u.timeout=(s=u.timeout)!==null&&s!==void 0?s:this.timeout;const{bodyHeaders:h,body:v}=this.buildBody({options:u}),T=yield this.buildHeaders({options:e,method:c,bodyHeaders:h,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:c,headers:T},u.signal&&{signal:u.signal}),globalThis.ReadableStream&&v instanceof globalThis.ReadableStream&&{duplex:"half"}),v&&{body:v}),(l=this.fetchOptions)!==null&&l!==void 0?l:{}),(a=u.fetchOptions)!==null&&a!==void 0?a:{}),url:m,timeout:u.timeout}})}buildHeaders(l){return g(this,arguments,function*({options:e,method:n,bodyHeaders:o,retryCount:s}){let a={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const u=yield this.authHeaders(e);let c=pe([a,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(s)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),ud()),this._options.defaultHeaders,o,e.headers,u]);return this.validateHeaders(c),c.values})}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const o=pe([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&o.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:cd(e)}:this.encoder({body:e,headers:o})}}Le.DEFAULT_TIMEOUT=6e4;class G extends Le{constructor(){super(...arguments),this.interactions=new qo(this)}}bo=G;G.GeminiNextGenAPIClient=bo;G.GeminiNextGenAPIClientError=J;G.APIError=H;G.APIConnectionError=Ue;G.APIConnectionTimeoutError=So;G.APIUserAbortError=Qe;G.NotFoundError=wo;G.ConflictError=Mo;G.RateLimitError=Po;G.BadRequestError=Io;G.AuthenticationError=Ao;G.InternalServerError=xo;G.PermissionDeniedError=Ro;G.UnprocessableEntityError=No;G.toFile=vd;G.Interactions=qo;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xd(t,e){const n={},o=i(t,["name"]);return o!=null&&r(n,["_url","name"],o),n}function Dd(t,e){const n={},o=i(t,["name"]);return o!=null&&r(n,["_url","name"],o),n}function Ud(t,e){const n={},o=i(t,["sdkHttpResponse"]);return o!=null&&r(n,["sdkHttpResponse"],o),n}function kd(t,e){const n={},o=i(t,["sdkHttpResponse"]);return o!=null&&r(n,["sdkHttpResponse"],o),n}function Ld(t,e,n){const o={};if(i(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const s=i(t,["tunedModelDisplayName"]);if(e!==void 0&&s!=null&&r(e,["displayName"],s),i(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=i(t,["epochCount"]);e!==void 0&&l!=null&&r(e,["tuningTask","hyperparameters","epochCount"],l);const a=i(t,["learningRateMultiplier"]);if(a!=null&&r(o,["tuningTask","hyperparameters","learningRateMultiplier"],a),i(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(i(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(i(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const u=i(t,["batchSize"]);e!==void 0&&u!=null&&r(e,["tuningTask","hyperparameters","batchSize"],u);const c=i(t,["learningRate"]);if(e!==void 0&&c!=null&&r(e,["tuningTask","hyperparameters","learningRate"],c),i(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(i(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return o}function Fd(t,e,n){const o={};let s=i(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const h=i(t,["validationDataset"]);e!==void 0&&h!=null&&r(e,["supervisedTuningSpec"],On(h))}else if(s==="PREFERENCE_TUNING"){const h=i(t,["validationDataset"]);e!==void 0&&h!=null&&r(e,["preferenceOptimizationSpec"],On(h))}const l=i(t,["tunedModelDisplayName"]);e!==void 0&&l!=null&&r(e,["tunedModelDisplayName"],l);const a=i(t,["description"]);e!==void 0&&a!=null&&r(e,["description"],a);let u=i(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const h=i(t,["epochCount"]);e!==void 0&&h!=null&&r(e,["supervisedTuningSpec","hyperParameters","epochCount"],h)}else if(u==="PREFERENCE_TUNING"){const h=i(t,["epochCount"]);e!==void 0&&h!=null&&r(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],h)}let c=i(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const h=i(t,["learningRateMultiplier"]);e!==void 0&&h!=null&&r(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],h)}else if(c==="PREFERENCE_TUNING"){const h=i(t,["learningRateMultiplier"]);e!==void 0&&h!=null&&r(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],h)}let d=i(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const h=i(t,["exportLastCheckpointOnly"]);e!==void 0&&h!=null&&r(e,["supervisedTuningSpec","exportLastCheckpointOnly"],h)}else if(d==="PREFERENCE_TUNING"){const h=i(t,["exportLastCheckpointOnly"]);e!==void 0&&h!=null&&r(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],h)}let f=i(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const h=i(t,["adapterSize"]);e!==void 0&&h!=null&&r(e,["supervisedTuningSpec","hyperParameters","adapterSize"],h)}else if(f==="PREFERENCE_TUNING"){const h=i(t,["adapterSize"]);e!==void 0&&h!=null&&r(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],h)}if(i(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(i(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const p=i(t,["labels"]);e!==void 0&&p!=null&&r(e,["labels"],p);const m=i(t,["beta"]);return e!==void 0&&m!=null&&r(e,["preferenceOptimizationSpec","hyperParameters","beta"],m),o}function Gd(t,e){const n={},o=i(t,["baseModel"]);o!=null&&r(n,["baseModel"],o);const s=i(t,["preTunedModel"]);s!=null&&r(n,["preTunedModel"],s);const l=i(t,["trainingDataset"]);l!=null&&Od(l);const a=i(t,["config"]);return a!=null&&Ld(a,n),n}function Vd(t,e){const n={},o=i(t,["baseModel"]);o!=null&&r(n,["baseModel"],o);const s=i(t,["preTunedModel"]);s!=null&&r(n,["preTunedModel"],s);const l=i(t,["trainingDataset"]);l!=null&&zd(l,n,e);const a=i(t,["config"]);return a!=null&&Fd(a,n,e),n}function qd(t,e){const n={},o=i(t,["name"]);return o!=null&&r(n,["_url","name"],o),n}function Hd(t,e){const n={},o=i(t,["name"]);return o!=null&&r(n,["_url","name"],o),n}function bd(t,e,n){const o={},s=i(t,["pageSize"]);e!==void 0&&s!=null&&r(e,["_query","pageSize"],s);const l=i(t,["pageToken"]);e!==void 0&&l!=null&&r(e,["_query","pageToken"],l);const a=i(t,["filter"]);return e!==void 0&&a!=null&&r(e,["_query","filter"],a),o}function Bd(t,e,n){const o={},s=i(t,["pageSize"]);e!==void 0&&s!=null&&r(e,["_query","pageSize"],s);const l=i(t,["pageToken"]);e!==void 0&&l!=null&&r(e,["_query","pageToken"],l);const a=i(t,["filter"]);return e!==void 0&&a!=null&&r(e,["_query","filter"],a),o}function Jd(t,e){const n={},o=i(t,["config"]);return o!=null&&bd(o,n),n}function $d(t,e){const n={},o=i(t,["config"]);return o!=null&&Bd(o,n),n}function Yd(t,e){const n={},o=i(t,["sdkHttpResponse"]);o!=null&&r(n,["sdkHttpResponse"],o);const s=i(t,["nextPageToken"]);s!=null&&r(n,["nextPageToken"],s);const l=i(t,["tunedModels"]);if(l!=null){let a=l;Array.isArray(a)&&(a=a.map(u=>Bo(u))),r(n,["tuningJobs"],a)}return n}function Wd(t,e){const n={},o=i(t,["sdkHttpResponse"]);o!=null&&r(n,["sdkHttpResponse"],o);const s=i(t,["nextPageToken"]);s!=null&&r(n,["nextPageToken"],s);const l=i(t,["tuningJobs"]);if(l!=null){let a=l;Array.isArray(a)&&(a=a.map(u=>et(u))),r(n,["tuningJobs"],a)}return n}function Kd(t,e){const n={},o=i(t,["name"]);o!=null&&r(n,["model"],o);const s=i(t,["name"]);return s!=null&&r(n,["endpoint"],s),n}function Od(t,e){const n={};if(i(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(i(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const o=i(t,["examples"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>l)),r(n,["examples","examples"],s)}return n}function zd(t,e,n){const o={};let s=i(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const a=i(t,["gcsUri"]);e!==void 0&&a!=null&&r(e,["supervisedTuningSpec","trainingDatasetUri"],a)}else if(s==="PREFERENCE_TUNING"){const a=i(t,["gcsUri"]);e!==void 0&&a!=null&&r(e,["preferenceOptimizationSpec","trainingDatasetUri"],a)}let l=i(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const a=i(t,["vertexDatasetResource"]);e!==void 0&&a!=null&&r(e,["supervisedTuningSpec","trainingDatasetUri"],a)}else if(l==="PREFERENCE_TUNING"){const a=i(t,["vertexDatasetResource"]);e!==void 0&&a!=null&&r(e,["preferenceOptimizationSpec","trainingDatasetUri"],a)}if(i(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return o}function Bo(t,e){const n={},o=i(t,["sdkHttpResponse"]);o!=null&&r(n,["sdkHttpResponse"],o);const s=i(t,["name"]);s!=null&&r(n,["name"],s);const l=i(t,["state"]);l!=null&&r(n,["state"],oo(l));const a=i(t,["createTime"]);a!=null&&r(n,["createTime"],a);const u=i(t,["tuningTask","startTime"]);u!=null&&r(n,["startTime"],u);const c=i(t,["tuningTask","completeTime"]);c!=null&&r(n,["endTime"],c);const d=i(t,["updateTime"]);d!=null&&r(n,["updateTime"],d);const f=i(t,["description"]);f!=null&&r(n,["description"],f);const p=i(t,["baseModel"]);p!=null&&r(n,["baseModel"],p);const m=i(t,["_self"]);return m!=null&&r(n,["tunedModel"],Kd(m)),n}function et(t,e){const n={},o=i(t,["sdkHttpResponse"]);o!=null&&r(n,["sdkHttpResponse"],o);const s=i(t,["name"]);s!=null&&r(n,["name"],s);const l=i(t,["state"]);l!=null&&r(n,["state"],oo(l));const a=i(t,["createTime"]);a!=null&&r(n,["createTime"],a);const u=i(t,["startTime"]);u!=null&&r(n,["startTime"],u);const c=i(t,["endTime"]);c!=null&&r(n,["endTime"],c);const d=i(t,["updateTime"]);d!=null&&r(n,["updateTime"],d);const f=i(t,["error"]);f!=null&&r(n,["error"],f);const p=i(t,["description"]);p!=null&&r(n,["description"],p);const m=i(t,["baseModel"]);m!=null&&r(n,["baseModel"],m);const h=i(t,["tunedModel"]);h!=null&&r(n,["tunedModel"],h);const v=i(t,["preTunedModel"]);v!=null&&r(n,["preTunedModel"],v);const T=i(t,["supervisedTuningSpec"]);T!=null&&r(n,["supervisedTuningSpec"],T);const y=i(t,["preferenceOptimizationSpec"]);y!=null&&r(n,["preferenceOptimizationSpec"],y);const _=i(t,["tuningDataStats"]);_!=null&&r(n,["tuningDataStats"],_);const I=i(t,["encryptionSpec"]);I!=null&&r(n,["encryptionSpec"],I);const S=i(t,["partnerModelTuningSpec"]);S!=null&&r(n,["partnerModelTuningSpec"],S);const A=i(t,["customBaseModel"]);A!=null&&r(n,["customBaseModel"],A);const M=i(t,["experiment"]);M!=null&&r(n,["experiment"],M);const P=i(t,["labels"]);P!=null&&r(n,["labels"],P);const N=i(t,["outputUri"]);N!=null&&r(n,["outputUri"],N);const L=i(t,["pipelineJob"]);L!=null&&r(n,["pipelineJob"],L);const R=i(t,["serviceAccount"]);R!=null&&r(n,["serviceAccount"],R);const U=i(t,["tunedModelDisplayName"]);U!=null&&r(n,["tunedModelDisplayName"],U);const F=i(t,["veoTuningSpec"]);return F!=null&&r(n,["veoTuningSpec"],F),n}function Xd(t,e){const n={},o=i(t,["sdkHttpResponse"]);o!=null&&r(n,["sdkHttpResponse"],o);const s=i(t,["name"]);s!=null&&r(n,["name"],s);const l=i(t,["metadata"]);l!=null&&r(n,["metadata"],l);const a=i(t,["done"]);a!=null&&r(n,["done"],a);const u=i(t,["error"]);return u!=null&&r(n,["error"],u),n}function On(t,e){const n={},o=i(t,["gcsUri"]);o!=null&&r(n,["validationDatasetUri"],o);const s=i(t,["vertexDatasetResource"]);return s!=null&&r(n,["validationDatasetUri"],s),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Qd extends X{constructor(e){super(),this.apiClient=e,this.list=(...o)=>g(this,[...o],function*(n={}){return new oe(z.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),yield this.listInternal(n),n)}),this.get=n=>g(this,null,function*(){return yield this.getInternal(n)}),this.tune=n=>g(this,null,function*(){var o;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const s={tunedModelName:n.baseModel};!((o=n.config)===null||o===void 0)&&o.preTunedModelCheckpointId&&(s.checkpointId=n.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},n),{preTunedModel:s});return l.baseModel=void 0,yield this.tuneInternal(l)}else{const s=Object.assign({},n);return yield this.tuneInternal(s)}else{const s=Object.assign({},n),l=yield this.tuneMldevInternal(s);let a="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?a=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(a=l.name.split("/operations/")[0]),{name:a,state:Be.JOB_STATE_QUEUED}}})}getInternal(e){return g(this,null,function*(){var n,o,s,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=Hd(e);return u=C("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>et(f))}else{const d=qd(e);return u=C("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>Bo(f))}})}listInternal(e){return g(this,null,function*(){var n,o,s,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=$d(e);return u=C("tuningJobs",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=Wd(f),m=new _n;return Object.assign(m,p),m})}else{const d=Jd(e);return u=C("tunedModels",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=Yd(f),m=new _n;return Object.assign(m,p),m})}})}cancel(e){return g(this,null,function*(){var n,o,s,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=Dd(e);return u=C("{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=kd(f),m=new En;return Object.assign(m,p),m})}else{const d=xd(e);return u=C("{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=Ud(f),m=new En;return Object.assign(m,p),m})}})}tuneInternal(e){return g(this,null,function*(){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI()){const u=Vd(e,e);return l=C("tuningJobs",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),s.then(c=>et(c))}else throw new Error("This method is only supported by the Vertex AI.")})}tuneMldevInternal(e){return g(this,null,function*(){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Gd(e);return l=C("tunedModels",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),s.then(c=>Xd(c))}})}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Zd{download(e,n){return g(this,null,function*(){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")})}}const jd=1024*1024*8,ec=3,tc=1e3,nc=2,Me="x-goog-upload-status";function oc(t,e,n){return g(this,null,function*(){var o;const s=yield Jo(t,e,n),l=yield s==null?void 0:s.json();if(((o=s==null?void 0:s.headers)===null||o===void 0?void 0:o[Me])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return l.file})}function ic(t,e,n){return g(this,null,function*(){var o;const s=yield Jo(t,e,n),l=yield s==null?void 0:s.json();if(((o=s==null?void 0:s.headers)===null||o===void 0?void 0:o[Me])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const a=Qn(l),u=new ot;return Object.assign(u,a),u})}function Jo(t,e,n){return g(this,null,function*(){var o,s;let l=0,a=0,u=new Je(new Response),c="upload";for(l=t.size;a<l;){const d=Math.min(jd,l-a),f=t.slice(a,a+d);a+d>=l&&(c+=", finalize");let p=0,m=tc;for(;p<ec&&(u=yield n.request({path:"",body:f,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":c,"X-Goog-Upload-Offset":String(a),"Content-Length":String(d)}}}),!(!((o=u==null?void 0:u.headers)===null||o===void 0)&&o[Me]));)p++,yield rc(m),m=m*nc;if(a+=d,((s=u==null?void 0:u.headers)===null||s===void 0?void 0:s[Me])!=="active")break;if(l<=a)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return u})}function sc(t){return g(this,null,function*(){return{size:t.size,type:t.type}})}function rc(t){return new Promise(e=>setTimeout(e,t))}class lc{upload(e,n,o){return g(this,null,function*(){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return yield oc(e,n,o)})}uploadToFileSearchStore(e,n,o){return g(this,null,function*(){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return yield ic(e,n,o)})}stat(e){return g(this,null,function*(){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return yield sc(e)})}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ac{create(e,n,o){return new uc(e,n,o)}}class uc{constructor(e,n,o){this.url=e,this.headers=n,this.callbacks=o}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const zn="x-goog-api-key";class dc{constructor(e){this.apiKey=e}addAuthHeaders(e,n){return g(this,null,function*(){if(e.get(zn)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(zn,this.apiKey)}})}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const cc="gl-node/";class fc{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new G({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const o=ri(e.httpOptions,e.vertexai,void 0,void 0);o&&(e.httpOptions?e.httpOptions.baseUrl=o:e.httpOptions={baseUrl:o}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const s=new dc(this.apiKey);this.apiClient=new su({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:cc+"web",uploader:new lc,downloader:new Zd}),this.models=new Iu(this.apiClient),this.live=new vu(this.apiClient,s,new ac),this.batches=new Ls(this.apiClient),this.chats=new gr(this.models,this.apiClient),this.caches=new pr(this.apiClient),this.files=new Rr(this.apiClient),this.operations=new Au(this.apiClient),this.authTokens=new bu(this.apiClient),this.tunings=new Qd(this.apiClient),this.fileSearchStores=new zu(this.apiClient)}}const He=()=>x.jsxs("div",{className:"h-full bg-light-surface dark:bg-dark-surface p-4 rounded-lg shadow-md animate-pulse",children:[x.jsx("div",{className:"w-full h-24 bg-light-border dark:bg-dark-border rounded-md"}),x.jsx("div",{className:"mt-3 h-4 bg-light-border dark:bg-dark-border rounded w-3/4"}),x.jsx("div",{className:"mt-2 h-3 bg-light-border dark:bg-dark-border rounded w-1/2"})]}),pc=({item:t})=>{var u;const{handleNavigate:e}=Xn();if(t.itemType==="teacher"){const c=t;return x.jsxs("button",{onClick:()=>e({name:"teacher_profile",teacherId:c.id}),className:"w-full h-full text-left bg-light-surface dark:bg-dark-surface rounded-lg shadow-md overflow-hidden group transform hover:-translate-y-1 transition-transform duration-300 flex flex-col p-4 justify-center",children:[x.jsxs("div",{className:"flex items-center text-xs font-semibold text-primary mb-2",children:[x.jsx(Zo,{className:"w-4 h-4"}),x.jsx("span",{className:"ml-1.5 uppercase tracking-wider",children:"Teacher"})]}),x.jsxs("div",{className:"flex items-center space-x-4",children:[x.jsx("img",{src:ht(c.profileImage,128,128),alt:c.name,className:"w-16 h-16 rounded-full object-cover flex-shrink-0 border-2 border-white dark:border-dark-surface"}),x.jsxs("div",{className:"flex-grow",children:[x.jsx("h4",{className:"font-bold text-sm text-light-text dark:text-dark-text group-hover:text-primary transition-colors",children:c.name}),x.jsx("p",{className:"text-xs text-light-subtle dark:text-dark-subtle mt-1",children:c.tagline})]})]})]})}let n="",o="",s="",l=null,a=()=>{};if(t.itemType==="course"){const c=t;n=c.title,o=`Course by ${c.teacher.name}`,s=c.coverImage,l=x.jsx(jo,{className:"w-4 h-4"}),a=()=>e({name:"course_detail",courseId:c.id})}else if(t.itemType==="class"){const c=t;n=c.title,o=`Class by ${c.teacher.name}`,s=((u=c.teacher.coverImages)==null?void 0:u[0])||c.teacher.profileImage,l=x.jsx(ei,{className:"w-4 h-4"}),a=()=>e({name:"class_detail",classId:c.id})}return x.jsxs("button",{onClick:a,className:"w-full h-full text-left bg-light-surface dark:bg-dark-surface rounded-lg shadow-md overflow-hidden group transform hover:-translate-y-1 transition-transform duration-300 flex flex-col",children:[x.jsx("img",{src:ht(s,400),alt:n,className:"w-full h-24 object-cover flex-shrink-0"}),x.jsxs("div",{className:"p-4 flex-grow flex flex-col justify-between",children:[x.jsxs("div",{children:[x.jsxs("div",{className:"flex items-center text-xs font-semibold text-primary mb-1",children:[l,x.jsx("span",{className:"ml-1.5 uppercase tracking-wider",children:t.itemType})]}),x.jsx("h4",{className:"font-bold text-sm text-light-text dark:text-dark-text group-hover:text-primary transition-colors",children:n})]}),x.jsx("p",{className:"text-xs text-light-subtle dark:text-dark-subtle mt-1 truncate",children:o})]})]})},yc=({currentUser:t})=>{const[e,n]=me.useState([]),[o,s]=me.useState(!0),[l,a]=me.useState(null),{teachers:u,sales:c,submissions:d}=Qo(),{genAiKey:f}=Xn();return me.useEffect(()=>{g(void 0,null,function*(){var h,v,T;const m=sessionStorage.getItem("aiRecommendations");if(m)try{const y=JSON.parse(m);n(y),s(!1);return}catch(y){console.error("Failed to parse cached AI recommendations, fetching new ones.",y),sessionStorage.removeItem("aiRecommendations")}try{const y=u.flatMap(E=>E.courses.map(k=>te(ee({},k),{teacher:E}))),_=u.flatMap(E=>E.individualClasses.filter(k=>mt(k)!=="finished"&&mt(k)!=="canceled").map(k=>te(ee({},k),{teacher:E}))),I={gender:t.gender,preferredLanguage:t.preferredLanguage,schools:t.schools,learningInstitutes:t.learningInstitutes,careerAspirations:t.careerAspirations,achievements:t.achievements,targetAudience:t.targetAudience,customExams:(h=t.customExams)==null?void 0:h.map(E=>({name:E.name,targetAudience:E.targetAudience})),profileSummary:t.profileSummary,technicalSkills:t.technicalSkills,softSkills:t.softSkills,languages:t.languages,education:(v=t.education)==null?void 0:v.map(E=>({qualification:E.qualification,institution:E.institution})),experience:(T=t.experience)==null?void 0:T.map(E=>({role:E.role,organization:E.organization})),projects:t.projects,hobbies:t.hobbies,certifications:t.certifications},S=c.filter(E=>E.studentId===t.id&&E.status==="completed"&&E.itemSnapshot).map(E=>({title:E.itemName,type:E.itemType,subject:E.itemSnapshot.subject})).slice(-10),A=d.filter(E=>E.studentId===t.id).map(E=>{const k=c.find(b=>b.itemId===E.quizId&&b.itemType==="quiz");if(!k)return null;const Y=k.itemSnapshot;return{title:Y.title,score:`${E.score}/${Y.questions.length}`}}).filter(Boolean).slice(-5),M=new Set(c.filter(E=>E.studentId===t.id).map(E=>E.itemId)),P=[...u.filter(E=>E.registrationStatus==="approved").map(E=>({id:E.id,type:"teacher",name:E.name,subjects:E.subjects,tagline:E.tagline.substring(0,100)})),...y.filter(E=>E.isPublished&&E.adminApproval==="approved").map(E=>({id:E.id,type:"course",title:E.title,subject:E.subject,description:E.description.substring(0,100)})),..._.filter(E=>E.isPublished).map(E=>({id:E.id,type:"class",title:E.title,subject:E.subject,description:E.description.substring(0,100)}))].filter(E=>!M.has(E.id));if(P.length===0){s(!1);return}const N=new fc({apiKey:f}),L=`You are a recommendation engine for an online learning platform called clazz.lk. Your goal is to suggest relevant items to a student based on their profile and activity.

                STUDENT PROFILE: ${JSON.stringify(I)}
                STUDENT ENROLLMENT HISTORY: ${JSON.stringify(S)}
                STUDENT QUIZ PERFORMANCE: ${JSON.stringify(A)}
                AVAILABLE ITEMS TO RECOMMEND (teachers, courses, classes): ${JSON.stringify(P.slice(0,200))}

                Based on all the provided data, recommend up to 3 items from the "AVAILABLE ITEMS TO RECOMMEND" list that would be most beneficial for this student. If you can only find one or two good recommendations, that is fine. Prioritize items that match their target audience, career goals, and subjects of interest from their past enrollments.

                Respond ONLY with a valid JSON array of objects in this exact format:
                [
                  { "id": "item_id_1", "type": "teacher" | "course" | "class" }
                ]`,U=(yield N.models.generateContent({model:"gemini-2.5-flash",contents:L,config:{responseMimeType:"application/json"}})).text.trim(),$=JSON.parse(U).map(E=>{if(E.type==="teacher"){const k=u.find(Y=>Y.id===E.id);return k?te(ee({},k),{itemType:"teacher"}):null}else if(E.type==="course"){const k=y.find(Y=>Y.id===E.id);return k?te(ee({},k),{itemType:"course"}):null}else if(E.type==="class"){const k=_.find(Y=>Y.id===E.id);return k?te(ee({},k),{itemType:"class"}):null}return null}).filter(E=>E!==null);n($),sessionStorage.setItem("aiRecommendations",JSON.stringify($))}catch(y){console.error("AI Recommendation Error:",y),a("Could not fetch recommendations.")}finally{s(!1)}})},[t,u,c,d]),o?x.jsxs("section",{className:"mt-12",children:[x.jsxs("h2",{className:"text-3xl font-bold mb-6",children:["Just for You, ",t.firstName]}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[x.jsx(He,{}),x.jsx(He,{}),x.jsx(He,{})]})]}):l||e.length===0?null:x.jsxs("section",{className:"mt-12",children:[x.jsxs("h2",{className:"text-3xl font-bold mb-6",children:["Just for You, ",t.firstName]}),x.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:e.map(p=>x.jsx(pc,{item:p},`${p.itemType}-${p.id}`))})]})},vc=({user:t})=>{const e=me.useMemo(()=>{if(!(t!=null&&t.customExams))return[];const n=new Date,o=new Date(n.getTime()-24*60*60*1e3);o.setHours(0,0,0,0);const s=t.customExams.filter(l=>new Date(l.date).getTime()>=o.getTime());return s.sort((l,a)=>new Date(l.date).getTime()-new Date(a.date).getTime()),s.map(l=>te(ee({},l),{isHighPriority:!1}))},[t]);return e.length===0?null:x.jsxs("div",{className:"mb-8",children:[x.jsx("div",{className:"flex justify-between items-center mb-6",children:x.jsx("h2",{className:"text-3xl font-bold",children:"My Upcoming Exams"})}),x.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:e.map(n=>x.jsx(ti,{exam:n},n.id))})]})};export{yc as A,fc as G,vc as M};
