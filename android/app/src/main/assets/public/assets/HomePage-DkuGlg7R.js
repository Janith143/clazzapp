var me=Object.defineProperty,he=Object.defineProperties;var ue=Object.getOwnPropertyDescriptors;var q=Object.getOwnPropertySymbols;var xe=Object.prototype.hasOwnProperty,ge=Object.prototype.propertyIsEnumerable;var B=(l,o,a)=>o in l?me(l,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):l[o]=a,y=(l,o)=>{for(var a in o||(o={}))xe.call(o,a)&&B(l,a,o[a]);if(q)for(var a of q(o))ge.call(o,a)&&B(l,a,o[a]);return l},C=(l,o)=>he(l,ue(o));var O=(l,o,a)=>new Promise((c,r)=>{var n=d=>{try{m(a.next(d))}catch(j){r(j)}},u=d=>{try{m(a.throw(d))}catch(j){r(j)}},m=d=>d.done?c(d.value):Promise.resolve(d.value).then(n,u);m((a=a.apply(l,o)).next())});import{r as h,j as e,c as pe,C as fe,a as je,R as be,u as F,b as te,S as ve,M as we,d as Ne,e as ye,g as I,f as Ce,h as K,i as Y}from"./index-BXN-gaEy.js";import{S as ke}from"./SearchBar-WR6MAao9.js";import{T as W}from"./TeacherCard-BA7EbZSp.js";import{C as J}from"./CourseCard-uZsExVwk.js";import{C as X}from"./ClassCard-BBTr9XzW.js";import{Q as Z}from"./QuizCard-COBKBKhv.js";import{E as ee}from"./EventCard-Smhp_CKP.js";import{E as se}from"./ExamCard-DZTlommE.js";import{G as Se,M as ze,A as Me}from"./MyExamsSection-DJubUmUf.js";import{s as P}from"./slug-Be7lxzw5.js";import{S as Ee}from"./SEOHead-fOquVp0s.js";import"./vendor-firebase-CLtQg3ae.js";import"./StarRating-BeOC4AZb.js";import"./Countdown-tuRDrQvi.js";const Ae=({slides:l,onCtaClick:o})=>{const[a,c]=h.useState(0),r=()=>{const m=a===0?l.length-1:a-1;c(m)},n=h.useCallback(()=>{const m=a===l.length-1?0:a+1;c(m)},[a,l.length]);return h.useEffect(()=>{const u=setTimeout(n,5e3);return()=>clearTimeout(u)},[a,n]),e.jsxs("div",{className:"relative h-[500px] w-full m-auto group",children:[e.jsx("img",{src:l[a].image,alt:l[a].title,fetchpriority:"high",className:"absolute inset-0 w-full h-full object-cover transition-all duration-1000 ease-in-out z-0",width:"1920",height:"500",srcSet:pe(l[a].image,[400,800,1200,1920]),sizes:"(max-width: 640px) 400px, (max-width: 1024px) 1200px, 1920px"}),e.jsx("div",{className:"absolute inset-0 bg-black/50 z-10"}),e.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center text-center text-white p-4 relative z-20",children:[e.jsx("h1",{className:"text-4xl md:text-6xl font-bold animate-slideInUp",style:{animationDelay:"100ms"},children:l[a].title}),e.jsx("p",{className:"mt-4 text-lg md:text-xl max-w-2xl animate-slideInUp",style:{animationDelay:"300ms"},children:l[a].subtitle}),e.jsx("button",{onClick:()=>o(l[a].ctaText),className:"mt-8 px-8 py-3 bg-primary text-white font-semibold rounded-md hover:bg-primary-dark transition-transform hover:scale-105 animate-slideInUp",style:{animationDelay:"500ms"},children:l[a].ctaText})]}),e.jsx("button",{onClick:r,className:"absolute top-1/2 -translate-y-1/2 left-5 text-white p-2 bg-black/30 rounded-full hover:bg-black/50 transition-colors z-30",children:e.jsx(fe,{className:"h-6 w-6"})}),e.jsx("button",{onClick:n,className:"absolute top-1/2 -translate-y-1/2 right-5 text-white p-2 bg-black/30 rounded-full hover:bg-black/50 transition-colors z-30",children:e.jsx(je,{className:"h-6 w-6"})}),e.jsx("div",{className:"absolute bottom-5 left-1/2 -translate-x-1/2 flex space-x-2 z-30",children:l.map((u,m)=>e.jsx("button",{onClick:()=>c(m),className:`h-2 rounded-full transition-all duration-300 ${a===m?"w-6 bg-white":"w-2 bg-white/50"}`,"aria-label":`Go to slide ${m+1}`},m))})]})},Te=({ongoingClasses:l,onClassClick:o,onBarClick:a})=>{const c=e.jsx("span",{className:"mx-4 font-normal",children:"|"}),r=l.map((n,u)=>e.jsxs(be.Fragment,{children:[u>0&&c,e.jsx("button",{onClick:()=>o(n.classInfo),className:"hover:underline focus:underline focus:outline-none text-left",children:`${n.classInfo.title} by ${n.teacher.name}`})]},n.classInfo.id));return e.jsx("div",{className:"w-full bg-red-600 dark:bg-red-700 text-white py-2.5 group animate-fadeIn",children:e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center space-x-3 overflow-hidden",children:[e.jsxs("button",{onClick:a,className:"flex-shrink-0 flex items-center hover:opacity-80 transition-opacity",children:[e.jsxs("span",{className:"relative flex h-3 w-3",children:[e.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-white/70 opacity-75"}),e.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-white"})]}),e.jsx("span",{className:"ml-2 font-bold text-sm uppercase tracking-wider",children:"Live Now"})]}),e.jsx("div",{className:"flex-1 overflow-hidden whitespace-nowrap",children:e.jsxs("div",{className:"inline-block animate-marquee group-hover:[animation-play-state:paused]",children:[e.jsx("span",{className:"inline-flex items-center mx-8 font-medium text-sm",children:r}),e.jsx("span",{className:"inline-flex items-center mx-8 font-medium text-sm",children:r})]})})]})})})},Pe=()=>{const{upcomingExams:l,handleNavigate:o}=F(),{currentUser:a}=te(),c=h.useMemo(()=>{if(!l)return[];const n=new Date;n.setHours(0,0,0,0);const u=l.filter(m=>new Date(m.date)>=n);if(u.sort((m,d)=>m.isHighPriority!==d.isHighPriority?m.isHighPriority?-1:1:new Date(m.date).getTime()-new Date(d.date).getTime()),a!=null&&a.targetAudience){const m=a.targetAudience,d=[],j=[];return u.forEach(f=>{f.targetAudience===m?d.push(f):j.push(f)}),[...d,...j]}return u},[l,a]),r=c.slice(0,4);return c.length===0?null:e.jsxs("div",{className:"lg:bg-light-surface lg:dark:bg-dark-surface lg:p-6 lg:rounded-lg lg:shadow-md lg:h-[500px] lg:flex lg:flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6 lg:mb-4",children:[e.jsx("h2",{className:"text-3xl lg:text-xl font-bold",children:"Upcoming Exams"}),e.jsx("button",{onClick:()=>o({name:"all_exams"}),className:"text-sm font-medium text-primary hover:underline",children:"View All"})]}),e.jsxs("div",{className:"lg:flex-grow lg:overflow-y-auto lg:pr-2",children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6 lg:hidden",children:r.map(n=>e.jsx(se,{exam:n},n.id))}),e.jsx("div",{className:"hidden lg:flex lg:flex-col lg:space-y-4",children:c.map(n=>e.jsx(se,{exam:n},n.id))})]})]})},De=({searchQuery:l})=>{const[o,a]=h.useState(""),[c,r]=h.useState(!0),[n,u]=h.useState(null),{genAiKey:m}=F();return h.useEffect(()=>{if(!l.trim()){r(!1);return}O(void 0,null,function*(){r(!0),u(null),a("");try{const j=new Se({apiKey:m}),f=`You are a helpful assistant for an online learning platform in Sri Lanka called clazz.lk. A user searched for "${l}" but found no direct results on our platform. 
                
                Please provide some helpful suggestions to guide the user. Your response should:
                1. Suggest alternative, broader, or related search terms that might exist on our platform (e.g., if they search "Quantum Mechanics," suggest "A/L Physics").
                2. Briefly explain related foundational topics they could search for.
                3. Keep the tone encouraging and helpful.
                4. Format the response in simple, clear Markdown. Use bullet points for suggestions. Do not use headings.
                
                Example for a search of "Astrophysics":
                * We couldn't find a specific course on Astrophysics, but you could try searching for "A/L Physics" which covers foundational concepts.
                * Explore topics like "Gravitation" or "Modern Physics" which are related to your search.
                * Consider searching for tutors who specialize in "Physics" as they may cover this topic in their classes.`,D=yield j.models.generateContent({model:"gemini-2.5-flash",contents:f});a(D.text)}catch(j){console.error("Gemini API Error:",j),u("Sorry, we couldn't get AI suggestions at this time. Please try refining your search.")}finally{r(!1)}})},[l]),e.jsxs("section",{children:[e.jsxs("h2",{className:"text-3xl font-bold mb-6",children:['No results for "',l,'"']}),e.jsxs("div",{className:"bg-light-surface dark:bg-dark-surface p-6 rounded-lg shadow-md border-l-4 border-primary",children:[e.jsx("h3",{className:"text-xl font-bold text-light-text dark:text-dark-text mb-4",children:"AI-Powered Suggestions"}),c&&e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(ve,{className:"w-8 h-8 text-primary"}),e.jsx("p",{className:"ml-4 text-light-subtle dark:text-dark-subtle",children:"Thinking of some ideas for you..."})]}),n&&e.jsx("p",{className:"text-red-500",children:n}),!c&&!n&&o&&e.jsx(we,{content:o})]})]})},Ye=()=>{const{teachers:l,users:o,tuitionInstitutes:a}=Ne(),{currentUser:c}=te(),{handleNavigate:r,searchQuery:n,setSearchQuery:u,homeSlides:m,homePageCardCounts:d}=F(),{setModalState:j}=ye(),[f,D]=h.useState(new Date),[S,Q]=h.useState(n);h.useEffect(()=>{const s=setTimeout(()=>{u(S)},500);return()=>{clearTimeout(s)}},[S,u]),h.useEffect(()=>{n!==S&&Q(n)},[n]),h.useEffect(()=>{const s=setInterval(()=>{D(new Date)},3e4);return()=>clearInterval(s)},[]);const R=(s,i)=>r({name:"course_detail_slug",slug:P(s.title)}),V=(s,i)=>r({name:"class_detail_slug",slug:P(s.title)}),$=s=>r({name:"quiz_detail_slug",slug:P(s.title)}),H=s=>r({name:"event_detail_slug",slug:P(s.title)}),ae=()=>r({name:"all_teachers"}),ie=()=>r({name:"all_courses"}),U=s=>r({name:"all_classes",options:s}),le=()=>r({name:"all_quizzes"}),ne=()=>r({name:"all_events"}),re=s=>{switch(s){case"Find a Teacher":r({name:"all_teachers"});break;case"Explore Classes":r({name:"all_classes"});break;case"Start Teaching":if((c==null?void 0:c.role)==="teacher"){const i=l.find(b=>b.userId===c.id);i?r({name:"teacher_profile",teacherId:i.id}):j({name:"register"})}else j({name:"register"});break;default:r({name:"home"});break}},g=h.useMemo(()=>l.filter(s=>s.registrationStatus==="approved"),[l]),G=h.useMemo(()=>g.flatMap(s=>s.individualClasses.map(i=>({classInfo:i,teacher:s}))).filter(({classInfo:s})=>s.isPublished&&(s.mode==="Online"||s.mode==="Both")&&I(s)==="live"&&!!s.joiningLink),[g,f]),z=h.useMemo(()=>{const s=new Map(o.map(i=>[i.id,i]));return[...g].sort((i,b)=>{const w=s.get(i.userId),N=s.get(b.userId);return new Date((N==null?void 0:N.createdAt)||0).getTime()-new Date((w==null?void 0:w.createdAt)||0).getTime()}).slice(0,d.teachers)},[g,o,d.teachers]),M=h.useMemo(()=>g.flatMap(s=>s.courses.map(i=>({course:i,teacher:s}))).filter(({course:s})=>s.isPublished).sort((s,i)=>i.course.ratings.length-s.course.ratings.length).slice(0,d.courses),[g,d.courses]),E=h.useMemo(()=>g.flatMap(s=>s.individualClasses.map(i=>({classInfo:i,teacher:s}))).map(s=>{const b=I(s.classInfo,f)==="live",w=Ce(s.classInfo,f),N=b?f:w;return C(y({},s),{isLive:b,nextSession:w,sortDate:N})}).filter(({classInfo:s,isLive:i,nextSession:b})=>s.isPublished&&(i||b)).sort((s,i)=>s.sortDate.getTime()-i.sortDate.getTime()).slice(0,d.classes),[g,f,d.classes]),A=h.useMemo(()=>g.flatMap(s=>s.quizzes.map(i=>({quiz:i,teacher:s}))).filter(({quiz:s})=>s.isPublished&&K(s)==="scheduled").sort((s,i)=>i.quiz.id.localeCompare(s.quiz.id)).slice(0,d.quizzes),[g,f,d.quizzes]),T=h.useMemo(()=>a.flatMap(s=>(s.events||[]).map(i=>({event:i,organizer:s}))).filter(({event:s})=>s.isPublished&&Y(s)==="scheduled").sort((s,i)=>new Date(s.event.startDate).getTime()-new Date(i.event.startDate).getTime()).slice(0,d.events||3),[a,f,d.events]),x=h.useMemo(()=>{if(!n.trim())return{teachers:[],courses:[],classes:[],quizzes:[],events:[]};const s=n.toLowerCase(),i=g.filter(t=>{var k;const p=t.teachingLocations?t.teachingLocations.map(_=>`${_.instituteName} ${_.town} ${_.district}`).join(" "):"";return[t.name,t.tagline,(k=t.contact)==null?void 0:k.location,t.id,t.username,...t.subjects,...t.qualifications,p].join(" ").toLowerCase().includes(s)}),b=g.flatMap(t=>t.courses.map(p=>C(y({},p),{teacher:t}))).filter(t=>{var v;return t.isPublished?[t.title,t.description,t.subject,t.teacher.name,t.teacher.id,t.teacher.username,(v=t.teacher.contact)==null?void 0:v.location].join(" ").toLowerCase().includes(s):!1}),w=g.flatMap(t=>t.individualClasses.map(p=>C(y({},p),{teacher:t}))).filter(t=>{var k;const p=I(t);return!t.isPublished||p==="finished"||p==="canceled"?!1:[t.title,t.description,t.subject,t.teacher.name,t.teacher.id,t.teacher.username,(k=t.teacher.contact)==null?void 0:k.location].join(" ").toLowerCase().includes(s)}),N=g.flatMap(t=>t.quizzes.map(p=>C(y({},p),{teacher:t}))).filter(t=>{var v;return!t.isPublished||K(t)!=="scheduled"?!1:[t.title,t.description,t.subject,t.teacher.name,t.teacher.id,t.teacher.username,(v=t.teacher.contact)==null?void 0:v.location].join(" ").toLowerCase().includes(s)}),de=a.flatMap(t=>(t.events||[]).map(p=>C(y({},p),{organizer:t}))).filter(t=>{var v;return!t.isPublished||Y(t)!=="scheduled"?!1:[t.title,t.description,t.category,t.venue,t.organizer.name,t.organizer.id,(v=t.organizer.contact)==null?void 0:v.location].join(" ").toLowerCase().includes(s)});return{teachers:i,courses:b,classes:w,quizzes:N,events:de}},[n,g,a,f]),L=h.useMemo(()=>n.trim()?x.teachers.length>0||x.courses.length>0||x.classes.length>0||x.quizzes.length>0||x.events.length>0:!1,[n,x]),oe=h.useMemo(()=>n.trim()!==""&&!L,[n,L]),ce=h.useMemo(()=>z.length>0||M.length>0||E.length>0||A.length>0||T.length>0,[z,M,E,A,T]);return e.jsxs("div",{className:"space-y-12",children:[e.jsx(Ee,{}),G.length>0&&e.jsx(Te,{ongoingClasses:G,onClassClick:s=>V(s),onBarClick:()=>U({ongoingOnly:!0})}),e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"lg:grid lg:grid-cols-3 lg:gap-8 items-start",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx(Ae,{slides:m,onCtaClick:re})}),e.jsx("div",{className:"hidden lg:block lg:col-span-1",children:e.jsx(Pe,{})})]})}),e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 -mt-8 relative z-10",children:e.jsx(ke,{searchQuery:S,setSearchQuery:Q})}),e.jsx("div",{className:"lg:hidden container mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx(ze,{user:c})}),c&&c.role==="student"&&!n.trim()&&e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx(Me,{currentUser:c})}),e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 space-y-16 pb-16",children:L?e.jsxs("section",{children:[e.jsxs("h2",{className:"text-3xl font-bold mb-6",children:['Search Results for "',n,'"']}),e.jsxs("div",{className:"space-y-12",children:[x.teachers.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-semibold mb-4",children:"Teachers"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:e.jsx(e.Fragment,{children:x.teachers.map(s=>e.jsx(W,{teacher:s,onViewProfile:i=>r({name:"teacher_profile",teacherId:i})},s.id))})})]}),x.courses.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-semibold mb-4",children:"Courses"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:e.jsx(e.Fragment,{children:x.courses.map(s=>e.jsx(J,{course:s,teacher:s.teacher,viewMode:"public",onView:R},s.id))})})]}),x.classes.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-semibold mb-4",children:"Classes"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:e.jsx(e.Fragment,{children:x.classes.map(s=>e.jsx(X,{classInfo:s,teacher:s.teacher,viewMode:"public",onView:V},s.id))})})]}),x.quizzes.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-semibold mb-4",children:"Quizzes"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:e.jsx(e.Fragment,{children:x.quizzes.map(s=>e.jsx(Z,{quiz:s,teacher:s.teacher,viewMode:"public",onView:$,currentUser:c},s.id))})})]}),x.events.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-semibold mb-4",children:"Events"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:e.jsx(e.Fragment,{children:x.events.map(s=>e.jsx(ee,{event:s,organizer:s.organizer,onView:H},s.id))})})]})]})]}):oe?e.jsx(De,{searchQuery:n}):e.jsxs(e.Fragment,{children:[!ce&&e.jsxs("div",{className:"text-center py-16 text-light-subtle dark:text-dark-subtle",children:[e.jsx("p",{className:"text-xl font-semibold",children:"No featured content available right now."}),e.jsx("p",{children:"Try searching for specific teachers, courses, or classes."})]}),z.length>0&&e.jsxs("section",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-3xl font-bold",children:"Featured Teachers"}),e.jsx("button",{onClick:ae,className:"text-sm font-medium text-primary hover:underline",children:"View All"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:z.map(s=>e.jsx(W,{teacher:s,onViewProfile:i=>r({name:"teacher_profile",teacherId:i})},s.id))})]}),M.length>0&&e.jsxs("section",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-3xl font-bold",children:"Popular Courses"}),e.jsx("button",{onClick:ie,className:"text-sm font-medium text-primary hover:underline",children:"View All"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:M.map(({course:s,teacher:i})=>e.jsx(J,{course:s,teacher:i,viewMode:"public",onView:R},s.id))})]}),E.length>0&&e.jsxs("section",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-3xl font-bold",children:"Upcoming Classes"}),e.jsx("button",{onClick:()=>U(),className:"text-sm font-medium text-primary hover:underline",children:"View All"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:E.map(({classInfo:s,teacher:i})=>e.jsx(X,{classInfo:s,teacher:i,viewMode:"public",onView:V},s.id))})]}),A.length>0&&e.jsxs("section",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-3xl font-bold",children:"Latest Quizzes"}),e.jsx("button",{onClick:le,className:"text-sm font-medium text-primary hover:underline",children:"View All"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:A.map(({quiz:s,teacher:i})=>e.jsx(Z,{quiz:s,teacher:i,viewMode:"public",onView:$,currentUser:c},s.id))})]}),T.length>0&&e.jsxs("section",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-3xl font-bold",children:"Upcoming Events"}),e.jsx("button",{onClick:ne,className:"text-sm font-medium text-primary hover:underline",children:"View All"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:T.map(({event:s,organizer:i})=>e.jsx(ee,{event:s,organizer:i,onView:H},s.id))})]})]})})]})};export{Ye as default};
