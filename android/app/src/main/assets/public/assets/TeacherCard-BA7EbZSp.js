import{d as N,r as n,k as I,l as d,j as e,C,a as z,m as P}from"./index-BXN-gaEy.js";import{S as L}from"./StarRating-BeOC4AZb.js";const $=({teacher:t,onViewProfile:h})=>{const{defaultCoverImages:c}=N(),[g,i]=n.useState(0),[x,l]=n.useState(!1),m=I(t.ratings),r=n.useMemo(()=>{const s=(t.coverImages||[]).filter(a=>a&&!a.includes("default-cover-images"));return s.length>0?s:c.length>0?c:["https://via.placeholder.com/800x400?text=No+Cover"]},[t.coverImages,c]);n.useEffect(()=>{if(r.length<=1)return;const s=setInterval(()=>{l(!0),i(a=>(a+1)%r.length)},5e3);return()=>clearInterval(s)},[r.length,g]);const u=r[g],p=s=>{s.stopPropagation(),l(!0),i(a=>(a+1)%r.length)},f=s=>{s.stopPropagation(),l(!0),i(a=>(a-1+r.length)%r.length)},b=(s,a)=>{s.stopPropagation(),l(!0),i(a)},v=()=>{l(!1)},w=d(u,400),j=d(t.profileImage,100,100),k=()=>{if(t.teachingItems&&t.teachingItems.length>0){const s=t.teachingItems.slice(0,3),a=t.teachingItems.length>3;return e.jsxs("div",{className:"flex flex-wrap gap-2 justify-center mt-4",children:[s.map(o=>e.jsxs("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-primary/10 text-primary-dark dark:text-primary-light border border-primary/20",children:[o.subject," ",e.jsxs("span",{className:"opacity-70 text-[10px]",children:["(",o.mediums.map(y=>y[0]).join("/"),")"]})]},o.id)),a&&e.jsxs("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-light-border dark:bg-dark-border text-light-subtle dark:text-dark-subtle",children:["+",t.teachingItems.length-3," more"]})]})}else if(t.subjects&&t.subjects.length>0)return e.jsx("div",{className:"flex flex-wrap gap-2 justify-center mt-4",children:t.subjects.slice(0,3).map(s=>e.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-primary/10 text-primary-dark dark:text-primary-light",children:s},s))});return null};return e.jsxs("div",{className:"bg-light-surface dark:bg-dark-surface rounded-lg shadow-md overflow-hidden flex flex-col group animate-fadeIn transition-transform duration-300 hover:-translate-y-1 hover:shadow-xl cursor-pointer",onClick:()=>h(t.id),children:[e.jsxs("div",{className:"relative h-32 bg-light-border dark:bg-dark-border overflow-hidden",children:[e.jsx("img",{src:w,alt:`${t.name}'s cover`,className:`w-full h-full object-cover transition-opacity duration-300 ${x?"opacity-50":"opacity-100"}`,onLoad:v,loading:"lazy",decoding:"async",width:"400",height:"128",srcSet:`${d(u,400)} 400w, ${d(u,800)} 800w`,sizes:"(max-width: 768px) 100vw, 400px"}),r.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:f,className:"absolute left-2 top-1/2 -translate-y-1/2 p-1 bg-black/30 hover:bg-black/50 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-200 z-10",children:e.jsx(C,{className:"w-5 h-5"})}),e.jsx("button",{onClick:p,className:"absolute right-2 top-1/2 -translate-y-1/2 p-1 bg-black/30 hover:bg-black/50 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-200 z-10",children:e.jsx(z,{className:"w-5 h-5"})}),e.jsx("div",{className:"absolute bottom-2 left-0 right-0 flex justify-center space-x-1.5 z-10",children:r.map((s,a)=>e.jsx("button",{onClick:o=>b(o,a),className:`w-1.5 h-1.5 rounded-full transition-colors shadow-sm ${a===g?"bg-white":"bg-white/40 hover:bg-white/70"}`,"aria-label":`Go to image ${a+1}`},a))})]}),e.jsx("button",{onClick:s=>{s.preventDefault(),s.stopPropagation(),t.username||t.id;let a=window.location.origin+"/";t.username?a+=t.username:a+="teacher/"+t.id,navigator.clipboard.writeText(a),alert("Link copied: "+a)},className:"absolute top-2 right-2 p-2 bg-white/80 dark:bg-black/50 rounded-full hover:bg-white dark:hover:bg-black/70 transition-colors text-gray-700 dark:text-gray-200 z-20 opacity-0 group-hover:opacity-100",title:"Share Profile",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-5 h-5",children:e.jsx("path",{d:"M13 4.5a2.5 2.5 0 11.702 1.737L6.97 9.604a2.51 2.51 0 010 .792l6.733 3.367a2.5 2.5 0 11-.671 1.341l-6.733-3.367a2.5 2.5 0 110-3.508l6.733-3.367A2.5 2.5 0 0113 4.5z"})})})]}),e.jsxs("div",{className:"flex-grow flex flex-col items-center text-center p-4 pb-6 relative",children:[e.jsx("div",{className:"w-24 h-24 -mt-16 rounded-full border-4 border-light-surface dark:border-dark-surface overflow-hidden shadow-lg flex-shrink-0 z-10 bg-light-surface dark:bg-dark-surface",children:e.jsx("img",{src:j,alt:t.name,className:"w-full h-full object-cover",loading:"lazy",decoding:"async",width:"96",height:"96"})}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h3",{className:"text-xl font-bold text-light-text dark:text-dark-text tracking-tight group-hover:text-primary transition-colors",children:t.name}),e.jsx("p",{className:"text-sm text-light-subtle dark:text-dark-subtle",children:t.tagline})]}),m.count>0&&e.jsx("div",{className:"mt-2",children:e.jsx(L,{rating:m.average,count:m.count,readOnly:!0,size:"sm"})}),e.jsx("div",{className:"flex-grow mt-3 w-full",children:e.jsx("p",{className:"prose-sm text-center prose-p:my-0 text-light-subtle dark:text-dark-subtle",children:P(t.bio,80)})}),k()]}),e.jsx("div",{className:"p-4 pt-0 mt-auto",children:e.jsx("button",{className:"w-full px-4 py-2 text-sm font-medium text-white bg-primary rounded-md hover:bg-primary-dark transition-colors",children:"View Profile"})})]})};export{$ as T};
