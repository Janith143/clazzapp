import{d as E,u as I,r as a,k as w,j as e,C as M}from"./index-BXN-gaEy.js";import{T as A}from"./TeacherCard-BA7EbZSp.js";import{S as L}from"./SearchBar-WR6MAao9.js";import{u as O}from"./useSEO-BjUGcIuA.js";import"./vendor-firebase-CLtQg3ae.js";import"./StarRating-BeOC4AZb.js";const R=[{value:"newest",label:"Newest First"},{value:"rating_desc",label:"Highest Rated"},{value:"name_asc",label:"Name (A-Z)"},{value:"name_desc",label:"Name (Z-A)"},{value:"experience_desc",label:"Most Experienced"}],b=9,V=()=>{const{teachers:x,users:v}=E(),{handleNavigate:h}=I(),[g,j]=a.useState(b),[d,S]=a.useState("newest"),[c,C]=a.useState(""),k=a.useRef(null),p=a.useRef(!1);O("All Teachers | clazz.lk","Browse and find expert tutors for a variety of subjects across Sri Lanka.");const _=s=>{const r=x.find(o=>o.id===s);r!=null&&r.username?h({name:"teacher_profile_slug",slug:r.username}):r&&h({name:"teacher_profile",teacherId:r.id})},T=()=>h({name:"home"}),m=a.useMemo(()=>{const r=x.filter(t=>t.registrationStatus==="approved").filter(t=>{var y;if(!c.trim())return!0;const n=c.toLowerCase(),l=t.teachingLocations?t.teachingLocations.map(f=>`${f.instituteName} ${f.town} ${f.district}`).join(" "):"";return[t.id,t.name,t.tagline,t.bio,(y=t.contact)==null?void 0:y.location,...t.subjects,...t.qualifications,l].join(" ").toLowerCase().includes(n)}),o=new Map(v.map(t=>[t.id,t]));return[...r].sort((t,n)=>{switch(d){case"newest":const l=o.get(t.userId),u=o.get(n.userId);return new Date((u==null?void 0:u.createdAt)||0).getTime()-new Date((l==null?void 0:l.createdAt)||0).getTime();case"rating_desc":return w(n.ratings).average-w(t.ratings).average;case"name_desc":return n.name.localeCompare(t.name);case"experience_desc":return n.experienceYears-t.experienceYears;case"name_asc":default:return t.name.localeCompare(n.name)}})},[x,v,c,d]);a.useEffect(()=>{j(b)},[c,d]);const i=a.useMemo(()=>m.slice(0,g),[m,g]),N=a.useCallback(s=>{s[0].isIntersecting&&!p.current&&(p.current=!0,j(o=>o+b))},[]);return a.useEffect(()=>{p.current=!1},[g]),a.useEffect(()=>{const s=new IntersectionObserver(N,{root:null,rootMargin:"200px",threshold:0}),r=k.current;return r&&s.observe(r),()=>{r&&s.unobserve(r)}},[N,i]),e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8 animate-slideInUp",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("button",{onClick:T,className:"flex items-center space-x-2 text-sm font-medium text-primary hover:text-primary-dark transition-colors",children:[e.jsx(M,{className:"h-5 w-5"}),e.jsx("span",{children:"Back to Home"})]})}),e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("p",{className:"mb-3 text-xs text-light-subtle dark:text-dark-subtle",children:["Interested in teaching? ",e.jsx("a",{href:"https://info.clazz.lk",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline font-medium",children:"Join as a teacher today"})]}),e.jsx("h1",{className:"text-4xl font-bold",children:"Meet Our Educators"}),e.jsx("p",{className:"mt-2 text-lg text-light-subtle dark:text-dark-subtle",children:"Find the perfect teacher to guide you on your learning journey."})]}),e.jsx("div",{className:"sticky top-16 z-20 py-4 bg-light-background/80 dark:bg-dark-background/80 backdrop-blur-sm -mx-4 sm:-mx-6 lg:-mx-8 px-4 sm:px-6 lg:px-8 mb-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto grid grid-cols-1 md:grid-cols-3 gap-4 items-center",children:[e.jsx("div",{className:"md:col-span-2",children:e.jsx(L,{searchQuery:c,setSearchQuery:C})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("label",{htmlFor:"sort-teachers",className:"text-sm font-medium flex-shrink-0",children:"Sort by:"}),e.jsx("select",{id:"sort-teachers",value:d,onChange:s=>S(s.target.value),className:"w-full px-3 py-2 border border-light-border dark:border-dark-border text-light-text dark:text-dark-text bg-light-surface dark:bg-dark-surface rounded-md focus:outline-none focus:ring-primary focus:border-primary sm:text-sm",children:R.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]})]})}),i.length>0?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-sm text-light-subtle dark:text-dark-subtle mb-6",children:["Showing ",i.length," of ",m.length," teachers."]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:i.map(s=>e.jsx(A,{teacher:s,onViewProfile:_},s.id))}),i.length<m.length&&e.jsx("div",{ref:k,className:"flex justify-center items-center h-20",children:e.jsx("div",{className:"w-8 h-8 border-4 border-dashed rounded-full animate-spin border-primary"})})]}):e.jsxs("div",{className:"text-center py-16 text-light-subtle dark:text-dark-subtle",children:[e.jsx("p",{className:"text-xl font-semibold",children:"No teachers found"}),e.jsx("p",{children:"Try adjusting your search query or filters."})]})]})};export{V as default};
