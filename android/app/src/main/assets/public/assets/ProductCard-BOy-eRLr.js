import{e as g,l as f,j as e,ai as v,aj as k,P as j,T as y,ak as N,al as w,y as C}from"./index-BXN-gaEy.js";import{s as I}from"./slug-Be7lxzw5.js";const z=({product:t,teacher:x,viewMode:s,onViewDetails:a,onEdit:i,onDelete:o,onTogglePublish:l})=>{var c;const{addToast:n}=g(),m=new Intl.NumberFormat("en-LK",{style:"currency",currency:"LKR",minimumFractionDigits:0}),h=f(((c=t.coverImages)==null?void 0:c[0])||"",400),p=r=>{r.stopPropagation();const u=`${window.location.origin}/store/${I(t.title)}`;navigator.clipboard.writeText(u).then(()=>{n("Product link copied to clipboard!","success")}).catch(()=>{n("Failed to copy link.","error")})},b=()=>{if(!l||s!=="teacher")return null;if(t.adminApproval==="approved")return e.jsx("button",{onClick:()=>l(t.id),className:"p-2 text-light-subtle dark:text-dark-subtle hover:text-primary dark:hover:text-primary-light",title:t.isPublished?"Unpublish":"Publish",children:t.isPublished?e.jsx(N,{className:"h-4 w-4"}):e.jsx(w,{className:"h-4 w-4"})});if(t.adminApproval==="pending")return e.jsxs("div",{className:"p-2 text-xs font-semibold flex items-center text-yellow-600 dark:text-yellow-400",children:[e.jsx(C,{className:"h-4 w-4 mr-1"}),"Pending"]});const r=t.adminApproval==="rejected"?"Resubmit":"Request Publish";return e.jsx("button",{onClick:()=>l(t.id,"request_approval"),className:"px-2 py-1 text-xs font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700",children:r})},d=e.jsxs("div",{className:"bg-light-surface dark:bg-dark-surface rounded-lg shadow-md overflow-hidden flex flex-col group animate-fadeIn transition-transform duration-300 hover:-translate-y-1 hover:shadow-xl h-full",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:h||"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 400 225' fill='%23e2e8f0'%3E%3Crect width='400' height='225'/%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' font-family='sans-serif' font-size='24px' fill='%2364748b'%3ENo Image%3C/text%3E%3C/svg%3E",alt:t.title,className:"w-full h-48 object-cover",loading:"lazy",decoding:"async"}),e.jsx("div",{className:"absolute top-2 left-2 px-2 py-1 text-xs font-semibold rounded-full bg-black/50 text-white backdrop-blur-sm capitalize",children:t.type}),t.adminApproval==="rejected"&&s==="teacher"&&e.jsx("div",{className:"absolute top-2 right-2 px-2 py-1 text-xs font-bold rounded-full bg-red-500 text-white",children:"Rejected"})]}),e.jsxs("div",{className:"p-4 flex-grow flex flex-col",children:[e.jsx("h3",{className:"text-md font-bold text-light-text dark:text-dark-text group-hover:text-primary transition-colors flex-grow",children:t.title}),e.jsxs("p",{className:"text-xs text-light-subtle dark:text-dark-subtle mt-1",children:["by ",x.name]}),e.jsx("p",{className:"mt-2 text-lg font-bold text-primary",children:m.format(t.price)})]}),s==="teacher"?e.jsx("div",{className:"p-4 pt-0",children:e.jsxs("div",{className:"flex justify-end items-center space-x-2 border-t border-light-border dark:border-dark-border pt-3",children:[e.jsx("button",{onClick:p,className:"p-2 text-light-subtle dark:text-dark-subtle hover:text-primary dark:hover:text-primary-light transition-colors",title:"Share Link",children:e.jsx(v,{className:"h-4 w-4"})}),e.jsx("button",{onClick:r=>{r.stopPropagation(),a&&a(t)},className:"p-2 text-light-subtle dark:text-dark-subtle hover:text-primary dark:hover:text-primary-light transition-colors",title:"Preview Product",children:e.jsx(k,{className:"h-4 w-4"})}),b(),e.jsx("button",{onClick:()=>i&&i(t),className:"p-2 text-light-subtle dark:text-dark-subtle hover:text-primary dark:hover:text-primary-light transition-colors",title:"Edit",children:e.jsx(j,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>o&&o(t.id),className:"p-2 text-red-500 hover:text-red-700 dark:hover:text-red-400",title:"Delete",children:e.jsx(y,{className:"h-4 w-4"})})]})}):e.jsx("div",{className:"p-4 pt-0 mt-auto",children:e.jsx("button",{onClick:r=>{r.stopPropagation(),a&&a(t)},className:"w-full text-center px-4 py-2 text-sm font-medium text-primary border border-primary rounded-md hover:bg-primary/10 transition-colors",children:"View Details"})})]});return s==="public"?e.jsx("div",{onClick:()=>a&&a(t),className:"w-full h-full text-left cursor-pointer",children:d}):d};export{z as P};
